(window.webpackJsonp=window.webpackJsonp||[]).push([[6,23],{154:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r);t.default=function(e){var t=e.children;return o.a.createElement("div",{className:"console"},o.a.createElement("pre",null,t),o.a.createElement("div",{className:"anchor"}))}},166:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(735),a=n(609),c=n(618),u=n(565),s=n(582),l=n(611),f=n(642),p=n(620),h=Object.prototype.hasOwnProperty;var y=function(e){if(null==e)return!0;if(Object(s.a)(e)&&(Object(u.a)(e)||"string"==typeof e||"function"==typeof e.splice||Object(l.a)(e)||Object(p.a)(e)||Object(c.a)(e)))return!e.length;var t=Object(a.a)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Object(f.a)(e))return!Object(i.a)(e).length;for(var n in e)if(h.call(e,n))return!1;return!0},b=n(588),d=n(56),v=n.n(d),m=o.a.createContext(null);var g=function(e){e()},O={notify:function(){}};function w(){var e=g,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var j=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=O,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=w())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=O)},e}();var S=function(e){var t=e.store,n=e.context,i=e.children,a=Object(r.useMemo)((function(){var e=new j(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),c=Object(r.useMemo)((function(){return t.getState()}),[t]);Object(r.useEffect)((function(){var e=a.subscription;return e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,c]);var u=n||m;return o.a.createElement(u.Provider,{value:a},i)};function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var _=n(149),k=n.n(_),x=n(115),C="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,T=[],q=[null,null];function R(e,t){var n=e[1];return[t.payload,n+1]}function A(e,t,n){C((function(){return e.apply(void 0,t)}),n)}function D(e,t,n,r,o,i,a){e.current=r,t.current=o,n.current=!1,i.current&&(i.current=null,a())}function M(e,t,n,r,o,i,a,c,u,s){if(e){var l=!1,f=null,p=function(){if(!l){var e,n,p=t.getState();try{e=r(p,o.current)}catch(e){n=e,f=e}n||(f=null),e===i.current?a.current||u():(i.current=e,c.current=e,a.current=!0,s({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=p,n.trySubscribe(),p();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var F=function(){return[null,0]};function H(e,t){void 0===t&&(t={});var n=t,i=n.getDisplayName,a=void 0===i?function(e){return"ConnectAdvanced("+e+")"}:i,c=n.methodName,u=void 0===c?"connectAdvanced":c,s=n.renderCountProp,l=void 0===s?void 0:s,f=n.shouldHandleStateChanges,p=void 0===f||f,h=n.storeKey,y=void 0===h?"store":h,b=(n.withRef,n.forwardRef),d=void 0!==b&&b,v=n.context,g=void 0===v?m:v,O=E(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),w=g;return function(t){var n=t.displayName||t.name||"Component",i=a(n),c=P({},O,{getDisplayName:a,methodName:u,renderCountProp:l,shouldHandleStateChanges:p,storeKey:y,displayName:i,wrappedComponentName:n,WrappedComponent:t}),s=O.pure;var f=s?r.useMemo:function(e){return e()};function h(n){var i=Object(r.useMemo)((function(){var e=n.forwardedRef,t=E(n,["forwardedRef"]);return[n.context,e,t]}),[n]),a=i[0],u=i[1],s=i[2],l=Object(r.useMemo)((function(){return a&&a.Consumer&&Object(x.isContextConsumer)(o.a.createElement(a.Consumer,null))?a:w}),[a,w]),h=Object(r.useContext)(l),y=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(h)&&Boolean(h.store);var b=y?n.store:h.store,d=Object(r.useMemo)((function(){return function(t){return e(t.dispatch,c)}(b)}),[b]),v=Object(r.useMemo)((function(){if(!p)return q;var e=new j(b,y?null:h.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[b,y,h]),m=v[0],g=v[1],O=Object(r.useMemo)((function(){return y?h:P({},h,{subscription:m})}),[y,h,m]),S=Object(r.useReducer)(R,T,F),_=S[0][0],k=S[1];if(_&&_.error)throw _.error;var C=Object(r.useRef)(),H=Object(r.useRef)(s),L=Object(r.useRef)(),B=Object(r.useRef)(!1),W=f((function(){return L.current&&s===H.current?L.current:d(b.getState(),s)}),[b,_,s]);A(D,[H,C,B,s,W,L,g]),A(M,[p,b,m,d,H,C,B,L,g,k],[b,m,d]);var I=Object(r.useMemo)((function(){return o.a.createElement(t,P({},W,{ref:u}))}),[u,t,W]);return Object(r.useMemo)((function(){return p?o.a.createElement(l.Provider,{value:O},I):I}),[l,I,O])}var b=s?o.a.memo(h):h;if(b.WrappedComponent=t,b.displayName=i,d){var v=o.a.forwardRef((function(e,t){return o.a.createElement(b,P({},e,{forwardedRef:t}))}));return v.displayName=i,v.WrappedComponent=t,k()(v,t)}return k()(b,t)}}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function W(e,t){if(B(e,t))return!0;if("object"!==L(e)||null===e||"object"!==L(t)||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!B(e[n[o]],t[n[o]]))return!1;return!0}var I=n(794);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(){return Math.random().toString(36).substring(7).split("").join(".")},V={INIT:"@@redux/INIT"+N(),REPLACE:"@@redux/REPLACE"+N(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+N()}};function Y(e){if("object"!==z(e)||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function X(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(X)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,i=t,a=[],c=a,u=!1;function s(){c===a&&(c=a.slice())}function l(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function f(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return s(),c.push(e),function(){if(t){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,s();var n=c.indexOf(e);c.splice(n,1),a=null}}}function p(e){if(!Y(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,i=o(i,e)}finally{u=!1}for(var t=a=c,n=0;n<t.length;n++){(0,t[n])()}return e}function h(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,p({type:V.REPLACE})}function y(){var e,t=f;return(e={subscribe:function(e){if("object"!==z(e)||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[I.a]=function(){return this},e}return p({type:V.INIT}),(r={dispatch:p,subscribe:f,getState:l,replaceReducer:h})[I.a]=y,r}function U(e,t){return function(){return t(e.apply(this,arguments))}}function G(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function K(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function Z(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=K(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=K(o),o=r(t,n)),o},r}}function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $=[function(e){return"function"==typeof e?Z(e):void 0},function(e){return e?void 0:G((function(e){return{dispatch:e}}))},function(e){return e&&"object"===Q(e)?G((function(t){return function(e,t){if("function"==typeof e)return U(e,t);if("object"!==z(e)||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":z(e))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=U(o,t))}return n}(e,t)})):void 0}];var J=[function(e){return"function"==typeof e?Z(e):void 0},function(e){return e?void 0:G((function(){return{}}))}];function ee(e,t,n){return P({},n,{},e,{},t)}var te=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(t,n,c){var u=e(t,n,c);return a?o&&i(u,r)||(r=u):(a=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return ee}}];function ne(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}}function re(e,t,n,r,o){var i,a,c,u,s,l=o.areStatesEqual,f=o.areOwnPropsEqual,p=o.areStatePropsEqual,h=!1;function y(o,h){var y,b,d=!f(h,a),v=!l(o,i);return i=o,a=h,d&&v?(c=e(i,a),t.dependsOnOwnProps&&(u=t(r,a)),s=n(c,u,a)):d?(e.dependsOnOwnProps&&(c=e(i,a)),t.dependsOnOwnProps&&(u=t(r,a)),s=n(c,u,a)):v?(y=e(i,a),b=!p(y,c),c=y,b&&(s=n(c,u,a)),s):s}return function(o,l){return h?y(o,l):(c=e(i=o,a=l),u=t(r,a),s=n(c,u,a),h=!0,s)}}function oe(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,i=E(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,i),c=r(e,i),u=o(e,i);return(i.pure?re:ne)(a,c,u,e,i)}function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw new Error("Invalid value of type "+ie(e)+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function ce(e,t){return e===t}function ue(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?H:n,o=t.mapStateToPropsFactories,i=void 0===o?J:o,a=t.mapDispatchToPropsFactories,c=void 0===a?$:a,u=t.mergePropsFactories,s=void 0===u?te:u,l=t.selectorFactory,f=void 0===l?oe:l;return function(e,t,n,o){void 0===o&&(o={});var a=o,u=a.pure,l=void 0===u||u,p=a.areStatesEqual,h=void 0===p?ce:p,y=a.areOwnPropsEqual,b=void 0===y?W:y,d=a.areStatePropsEqual,v=void 0===d?W:d,m=a.areMergedPropsEqual,g=void 0===m?W:m,O=E(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),w=ae(e,i,"mapStateToProps"),j=ae(t,c,"mapDispatchToProps"),S=ae(n,s,"mergeProps");return r(f,P({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:j,initMergeProps:S,pure:l,areStatesEqual:h,areOwnPropsEqual:b,areStatePropsEqual:v,areMergedPropsEqual:g},O))}}var se=ue();var le,fe=n(113),pe=n.n(fe);function he(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var i;return 0===n.length?i=r[0]:(i={},n.forEach((function(e,t){i[n[t]]=r[t]}))),{type:e,payload:i}};return o.toString=function(){return e.toString()},o.key=o.toString(),o}le=fe.unstable_batchedUpdates,g=le;var ye=he("PROPS_UPDATE"),be=he("PROP_UPDATE","key","value"),de=he("SEQUENCES_UPDATE"),ve=he("CONSERVSTION_UPDATE"),me={updateProp:be,updateProps:ye,updateSequences:de,updateConservation:ve};var ge=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e},Oe=n(599);var we=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=Object(Oe.a)(n))==n?n:0),void 0!==t&&(t=(t=Object(Oe.a)(t))==t?t:0),ge(Object(Oe.a)(e),t,n)},je=n(575),Se=n(645),Pe=n(574),Ee=n(617),_e=n(572),ke=n(566);var xe=function(e,t,n,r){if(!Object(_e.a)(e))return e;for(var o=-1,i=(t=Object(Pe.a)(t,e)).length,a=i-1,c=e;null!=c&&++o<i;){var u=Object(ke.a)(t[o]),s=n;if(o!=a){var l=c[u];void 0===(s=r?r(l,u,c):void 0)&&(s=Object(_e.a)(l)?l:Object(Ee.a)(t[o+1])?[]:{})}Object(Se.a)(c,u,s),c=c[u]}return e};var Ce=function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],c=Object(je.a)(e,a);n(c,a)&&xe(i,Object(Pe.a)(a,e),c)}return i},Te=n(602);var qe=function(e,t){return Ce(e,t,(function(t,n){return Object(Te.a)(e,n)}))},Re=n(628);var Ae=function(e){return(null==e?0:e.length)?Object(Re.a)(e,1):[]},De=n(731),Me=n(709);var Fe=function(e){return Object(Me.a)(Object(De.a)(e,void 0,Ae),e+"")},He=Fe((function(e,t){return null==e?{}:qe(e,t)})),Le=n(608),Be=n(603),We=n(604),Ie=Le.a.isFinite,ze=Math.min;var Ne=function(e){var t=Math[e];return function(e,n){if(e=Object(Oe.a)(e),(n=null==n?0:ze(Object(Be.a)(n),292))&&Ie(e)){var r=(Object(We.a)(e)+"e").split("e"),o=t(r[0]+"e"+(+r[1]+n));return+((r=(Object(We.a)(o)+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}("floor"),Ve=n(796);function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){Ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ge=he("MAINSTORE_UPDATE"),Ke=he("POSITION_MOVE"),Ze=he("POSITION_UPDATE"),Qe=he("POSITION_BY_RESIDUE_UPDATE"),$e=he("HIGHLIGHT_REGION"),Je=he("REMOVE_HIGHLIGHT_REGION"),et={updateMainStore:Ge,updatePosition:Ze,movePosition:Ke,updatePositionByResidue:Qe,highlightRegion:$e,removeHighlightRegion:Je};function tt(e,t){var n=e.sequences.maxLength*e.props.tileWidth-e.props.width;t.xPos=we(t.xPos,0,n);var r=e.sequences.raw.length*e.props.tileHeight-e.props.height;return t.yPos=we(t.yPos,0,r),Xe(Xe({},e),{},{position:t})}var nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:{xPos:0,yPos:0}},t=arguments.length>1?arguments[1]:void 0,n=e.position;switch(t.type){case Ke.key:Ve(void 0!==t.payload.xMovement||void 0!==t.payload.yMovement,"must contain at least xMovement or yMovement");var r=Xe({},n);return r.xPos+=t.payload.xMovement||0,r.yPos+=t.payload.yMovement||0,tt(e,r);case Ze.key:Ve(void 0!==t.payload.xPos||void 0!==t.payload.yPos,"must contain at least xPos or yPos");var o={xPos:t.payload.xPos||n.xPos,yPos:t.payload.yPos||n.yPos};return tt(e,o);case Qe.key:Ve(void 0!==t.payload.aaPos,"must contain at least aaPos");var i={xPos:e.props.tileWidth*(t.payload.aaPos-1),yPos:n.yPos};return tt(e,i);default:return e}};function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:{xPos:0,yPos:0},highlight:null},t=arguments.length>1?arguments[1]:void 0,n=e,r=e.position,o=e.highlight;switch(t.type){case Ge.key:n=Xe(Xe({},He(n,["props","sequenceStats","sequences"])),t.payload);break;case Ze.key:case Ke.key:case Qe.key:r=nt(n,t).position;break;case $e.key:o=t.payload;break;case Je.key:o=null;break;default:return n}var i={xPosOffset:-r.xPos%n.props.tileWidth,yPosOffset:-r.yPos%n.props.tileWidth,currentViewSequence:we(Ne(r.yPos/n.props.tileHeight),0,n.sequences.length-1),currentViewSequencePosition:we(Ne(r.xPos/n.props.tileWidth),0,n.sequences.maxLength),position:r};return Xe(Xe(Xe({},n),i),{},{highlight:o})}var ot=n(606),it=n(568),at=n(706);var ct=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var ut=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i};var st=function(e,t){return t.length<2?e:Object(je.a)(e,ut(t,0,-1))};var lt=function(e,t){return t=Object(Pe.a)(t,e),null==(e=st(e,t))||delete e[Object(ke.a)(ct(t))]},ft=n(619),pt=n(587),ht=n(644),yt=n(570),bt=Function.prototype,dt=Object.prototype,vt=bt.toString,mt=dt.hasOwnProperty,gt=vt.call(Object);var Ot=function(e){if(!Object(yt.a)(e)||"[object Object]"!=Object(pt.a)(e))return!1;var t=Object(ht.a)(e);if(null===t)return!0;var n=mt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&vt.call(n)==gt};var wt=function(e){return Ot(e)?void 0:e},jt=n(664),St=Fe((function(e,t){var n={};if(null==e)return n;var r=!1;t=Object(it.a)(t,(function(t){return t=Object(Pe.a)(t,e),r||(r=t.length>1),t})),Object(ft.a)(e,Object(jt.a)(e),n),r&&(n=Object(at.a)(n,7,wt));for(var o=t.length;o--;)lt(n,t[o]);return n})),Pt=n(600),Et=n(615);var _t=function(e){return"function"==typeof e?e:Et.a};var kt=function(e,t){return e&&Object(Pt.a)(e,_t(t))},xt=function(e){this.defaultColor="#ffffff",this.type="static",this.map=e,this.getColor=function(e){return void 0!==this.map[e]?this.map[e]:this.defaultColor}},Ct=function(e,t){this.type="dyn",this.opt=t,void 0!==e.init?(e.init.call(this),this.getColor=e.run,this.reset=e.init,this.map=e.map):this.getColor=e},Tt={A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},qt={A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},Rt={A:" #FF83FA",C:" #40E0D0",G:" #FF83FA",R:" #FF83FA",T:" #40E0D0",U:" #40E0D0",Y:" #40E0D0"},At={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},Dt={A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"},Mt={init:function(){}},Ft=[""," ","-","_","."];function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Mt.run=function(e,t,n){if(!n||1!==n.progress||t>n.map.length||Ft.includes(e))return"#ffffff";var r=n.map[t][e]||0;return r>.8?"#6464ff":r>.6?"#9da5ff":r>.4?"#cccccc":"#ffffff"},Mt.map={"> 0.8":"#6464ff","> 0.6":"#9da5ff","> 0.4":"#cccccc","> 0":"#ffffff"};var Lt={aliphatic:{A:"#00639a",V:"#00639a",L:"#00639a",I:"#00639a",P:"#00639a"},aromatic:{F:"#00639a",W:"#00639a",Y:"#00639a",H:"#00639a"},buried:Tt,buried_index:Tt,charged:{D:"#00639a",E:"#00639a",K:"#00639a",R:"#00639a",H:"#00639a"},cinema:{A:"#BBBBBB",B:"grey",C:"yellow",D:"red",E:"red",F:"magenta",G:"brown",H:"#00FFFF",I:"#BBBBBB",J:"#fff",K:"#00FFFF",L:"#BBBBBB",M:"#BBBBBB",N:"green",O:"#fff",P:"brown",Q:"green",R:"#00FFFF",S:"green",T:"green",U:"#fff",V:"#BBBBBB",W:"magenta",X:"grey",Y:"magenta",Z:"grey",Gap:"grey"},clustal2:{A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff"},clustal:{A:"orange",B:"#fff",C:"green",D:"red",E:"red",F:"blue",G:"orange",H:"red",I:"green",J:"#fff",K:"red",L:"green",M:"green",N:"#fff",O:"#fff",P:"orange",Q:"#fff",R:"red",S:"orange",T:"orange",U:"#fff",V:"green",W:"blue",X:"#fff",Y:"blue",Z:"#fff",Gap:"#fff"},helix:qt,helix_propensity:qt,hydro:{A:"#ad0052",B:"#0c00f3",C:"#c2003d",D:"#0c00f3",E:"#0c00f3",F:"#cb0034",G:"#6a0095",H:"#1500ea",I:"#ff0000",J:"#fff",K:"#0000ff",L:"#ea0015",M:"#b0004f",N:"#0c00f3",O:"#fff",P:"#4600b9",Q:"#0c00f3",R:"#0000ff",S:"#5e00a1",T:"#61009e",U:"#fff",V:"#f60009",W:"#5b00a4",X:"#680097",Y:"#4f00b0",Z:"#0c00f3"},lesk:{A:" orange",B:" #fff",C:" green",D:" red",E:" red",F:" green",G:" orange",H:" magenta",I:" green",J:" #fff",K:" red",L:" green",M:" green",N:" magenta",O:" #fff",P:" green",Q:" magenta",R:" red",S:" orange",T:" orange",U:" #fff",V:" green",W:" green",X:" #fff",Y:" green",Z:" #fff",Gap:" #fff"},mae:{A:" #77dd88",B:" #fff",C:" #99ee66",D:" #55bb33",E:" #55bb33",F:" #9999ff",G:" #77dd88",H:" #5555ff",I:" #66bbff",J:" #fff",K:" #ffcc77",L:" #66bbff",M:" #66bbff",N:" #55bb33",O:" #fff",P:" #eeaaaa",Q:" #55bb33",R:" #ffcc77",S:" #ff4455",T:" #ff4455",U:" #fff",V:" #66bbff",W:" #9999ff",X:" #fff",Y:" #9999ff",Z:" #fff",Gap:" #fff"},negative:{D:"#00639a",E:"#00639a"},nucleotide:{A:" #64F73F",C:" #FFB340",G:" #EB413C",T:" #3C88EE",U:" #3C88EE"},polar:{R:"#00639a",N:"#00639a",D:"#00639a",Q:"#00639a",E:"#00639a",G:"#00639a",H:"#00639a",K:"#00639a",S:"#00639a",T:"#00639a",Y:"#00639a"},positive:{K:"#00639a",R:"#00639a",H:"#00639a"},purine:Rt,purine_pyrimidine:Rt,serine_threonine:{S:"#00639a",T:"#00639a"},strand:At,strand_propensity:At,taylor:{A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff"},turn:Dt,turn_propensity:Dt,zappo:{A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf",B:"#fff",X:"#fff",Z:"#fff"}},Bt={conservation:Mt},Wt=function(e){this.maps=It(Lt),this.dyn=It(Bt),this.opt=e};function It(e){if(null==e||"object"!==Ht(e))return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Wt.getScheme=function(e){return Lt[e]},Wt.prototype.getScheme=function(e){var t=this.maps[e];return void 0===t&&(t={},void 0!==this.dyn[e])?new Ct(this.dyn[e],this.opt):new xt(t)},Wt.prototype.addStaticScheme=function(e,t){this.maps[e]=t},Wt.prototype.addDynScheme=function(e,t){this.dyn[e]=t};var Nt=new Wt,Vt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scheme=Nt.getScheme(t)}var t,n,r;return t=e,(n=[{key:"updateConservation",value:function(e){Nt.conservation=e}},{key:"getColor",value:function(e,t){return this.scheme.getColor(e,t,Nt.conservation)}}])&&zt(t.prototype,n),r&&zt(t,r),e}();function Yt(e){return e&&"function"==typeof e.getColor}var Xt=v.a.shape({name:v.a.string,sequence:v.a.string}),Ut=v.a.oneOfType([v.a.oneOf(["aliphatic","aromatic","charged","negative","polar","positive","serine_threonine","buried_index","clustal","clustal2","cinema","helix_propensity","hydro","lesk","mae","nucleotide","purine_pyrimidine","strand_propensity","taylor","turn_propensity","zappo","conservation"]),v.a.instanceOf(Vt),function(e,t,n){if(!Yt(e[t]))return new Error("Invalid prop `"+t+"` supplied to `"+n+"`. Validation failed.")}]),Gt=v.a.shape({xPos:v.a.number,yPos:v.a.number}),Kt={width:v.a.number,height:v.a.number,tileWidth:v.a.number,tileHeight:v.a.number,colorScheme:Ut,calculateConservation:v.a.bool,overlayConservation:v.a.bool,sampleSizeConservation:v.a.number},Zt={width:800,height:600,tileWidth:20,tileHeight:20,colorScheme:"clustal",calculateConservation:!1,overlayConservation:!1,sampleSizeConservation:void 0};var Qt=function(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n},$t=n(592),Jt=n(586);var en=function(e,t,n,r,o){return o(e,(function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)})),n};var tn=function(e,t,n){var r=Object(u.a)(e)?Qt:en,o=arguments.length<3;return r(e,Object(Jt.a)(t,4),n,o,$t.a)},nn=n(578);var rn=function(e,t){return Object(nn.a)(e,t)},on=n(590),an=n(612),cn=n(613);var un=function(e,t,n){(void 0!==n&&!Object(cn.a)(e[t],n)||void 0===n&&!(t in e))&&Object(an.a)(e,t,n)},sn=n(605),ln=n(660),fn=n(663),pn=n(641),hn=n(661),yn=n(598),bn=n(684);var dn=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},vn=n(634);var mn=function(e){return Object(ft.a)(e,Object(vn.a)(e))};var gn=function(e,t,n,r,o,i,a){var s=dn(e,n),f=dn(t,n),h=a.get(f);if(h)un(e,n,h);else{var y=i?i(s,f,n+"",e,t,a):void 0,b=void 0===y;if(b){var d=Object(u.a)(f),v=!d&&Object(l.a)(f),m=!d&&!v&&Object(p.a)(f);y=f,d||v||m?Object(u.a)(s)?y=s:Object(yn.a)(s)?y=Object(pn.a)(s):v?(b=!1,y=Object(ln.a)(f,!0)):m?(b=!1,y=Object(fn.a)(f,!0)):y=[]:Ot(f)||Object(c.a)(f)?(y=s,Object(c.a)(s)?y=mn(s):Object(_e.a)(s)&&!Object(bn.a)(s)||(y=Object(hn.a)(f))):b=!1}b&&(a.set(f,y),o(y,f,r,i,a),a.delete(f)),un(e,n,y)}};var On=function e(t,n,r,o,i){t!==n&&Object(sn.a)(n,(function(a,c){if(i||(i=new on.a),Object(_e.a)(a))gn(t,n,c,r,e,o,i);else{var u=o?o(dn(t,c),a,c+"",t,n,i):void 0;void 0===u&&(u=a),un(t,c,u)}}),vn.a)},wn=n(593);function jn(e){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Sn=function(e,t,n){if(!Object(_e.a)(n))return!1;var r=jn(t);return!!("number"==r?Object(s.a)(n)&&Object(Ee.a)(t,n.length):"string"==r&&t in n)&&Object(cn.a)(n[t],e)};var Pn=function(e){return Object(wn.a)((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&Sn(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var c=n[r];c&&e(t,c,r,i)}return t}))},En=Pn((function(e,t,n){On(e,t,n)}));var _n=function(e,t){var n={raw:t,length:t.length};return n.maxLength=tn(t,(function(e,t){return Math.max(e,t.sequence.length)}),0),n};function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){Cn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tn(e){var t;Yt(e.colorScheme)||(e.colorScheme=new Vt(e.colorScheme)),"function"==typeof(null==e||null===(t=e.colorScheme)||void 0===t?void 0:t.updateConservation)&&e.colorScheme.updateConservation(e.conservation)}var qn,Rn,An=function(e,t){var n=Object.keys(t);return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,i=e(r,o);if(r!==i)for(var a=0;a<n.length;a++){var c=n[a],u=t[c](i[c],o,i);if(void 0===u)throw new Error("A reducer can't return 'undefined'");i[c]=u}return i}}(function(e){var t=Object.keys(e);return function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,o={},i=!1,a=0;a<t.length;a++){var c=t[a],u=e[c](n[c],r);if(void 0===u)throw new Error("A reducer can't return 'undefined'");o[c]=u,i=i||u!==n[c]}return i?o:n}}({props:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case me.updateProps.key:return e=xn(xn({},e),r),"colorScheme"in r&&Tn(e),e;case me.updateProp.key:var o=r.key,i=r.value;return e=xn(xn({},e),{},Cn({},o,i)),"colorScheme"===o&&Tn(e),e;case me.updateConservation.key:var a=r.progress,c=r.conservation;return e.conservation={progress:a,map:c},e.colorScheme.updateConservation(e.conservation),e;default:return void 0!==e.colorScheme&&Tn(e),e}},sequences:(qn=Cn({},me.updateSequences,_n),Rn=[],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return qn.hasOwnProperty(n)?qn[n](e,r):e})}),{sequenceStats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentViewSequence:0,currentViewSequencePosition:0},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;switch(t.type){case me.updateProp.key:case me.updateProps.key:case me.updateSequences.key:if(n.props&&n.props.tileHeight&&n.props.tileWidth&&n.sequences){var r={};return r.nrXTiles=Math.ceil(n.props.width/n.props.tileWidth)+1,r.nrYTiles=Math.ceil(n.props.height/n.props.tileHeight)+1,r.fullWidth=n.props.tileWidth*n.sequences.maxLength,r.fullHeight=n.props.tileHeight*n.sequences.length,r}}return e}});function Dn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Mn=function(e){v.a.checkPropTypes(Kt,e,"prop","MSAViewer");var t=En({},Zt,e),n=t.sequences,r=(t.position,Dn(t,["sequences","position"])),o=X(An,!1);return o.dispatch(ye(r)),o.dispatch(de(n)),o};var Fn=function(e,t){void 0===e.nextFrame&&(e.nextFrame=window.requestAnimationFrame(function(){t(),this.nextFrame=void 0}.bind(e)))},Hn=n(701),Ln=n.n(Hn);function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wn(){return(Wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function In(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xn(e);if(t){var o=Xn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yn(this,n)}}function Yn(e,t){return!t||"object"!==Bn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xn(e){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Un=null,Gn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;(Un=new Ln.a).postMessage({sequences:t,sampleSize:n}),Un.onmessage=function(n){e.dispatch(me.updateConservation(n.data)),r&&r.current&&r.current.el&&r.current.el.current&&r.current.el.current.dispatchEvent(new CustomEvent("conservationProgress",{bubbles:!0,detail:n.data})),1===n.data.progress&&(console.log("completed conservation analisys"),e.dispatch(me.updateSequences(t)))}},Kn={sequences:"updateSequences"};Object.keys(Kt).forEach((function(e){!(e in Kn)&&Kt[e]&&(Kn[e]="updateProp")}));var Zn=Object.keys(Kn),Qn=function(e){return tn(e,(function(e,t,n){return e[t.key]=t,e}),{})},$n=Qn(me),Jn=Qn(et),er=function(e){var t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(c,t);var n,r,i,a=Vn(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=a.call(this,e);var n=He(e,Zn)||{};return t.el=o.a.createRef(),t.msaStore=e.msaStore,void 0!==n.sequences?(t.msaStore=Mn(n),n.calculateConservation&&t.msaStore&&Gn(t.msaStore,n.sequences,n.sampleSizeConservation,t.el)):console.warn("Check your MSA properties",n),t}return n=c,(r=[{key:"componentDidMount",value:function(){void 0!==this.props.position&&this.updatePosition(this.props.position)}},{key:"componentDidUpdate",value:function(e){var t=this.props;for(var n in He(t,Zn))if(!rn(e[n],t[n]))if("position"===n)this.updatePosition(t[n]);else if(n in Kn){var r=void 0;switch("calculateConservation"===n&&(t[n]?Gn(this.msaStore,this.props.sequences,this.props.sampleSizeConservation,this.el):Un.terminate()),"sampleSizeConservation"===n&&(Un&&Un.terminate(),Gn(this.msaStore,this.props.sequences,this.props.sampleSizeConservation,this.el)),Kn[n]){case"updateProp":r=me[Kn[n]](n,t[n]);break;default:r=me[Kn[n]](t[n])}this.msaStore.dispatch(r)}else console.error(n," is unknown.")}},{key:"dispatch",value:function(e){if(e.type in $n)this.msaStore.dispatch(e);else{if(!(e.type in Jn))throw new Error("Invalid action",e);this.el.current.positionStore.dispatch(e)}}},{key:"getColorMap",value:function(){var e=this.props.colorScheme,t={};try{t=this.msaStore.getState().props.colorScheme.scheme.map}catch(e){}return{name:e,map:t}}},{key:"render",value:function(){var t=St(this.props,Zn),n=t.msaStore,r=In(t,["msaStore"]);return void 0===this.msaStore?o.a.createElement("div",null," Error initializing the MSAViewer. "):o.a.createElement(e,Wn({ref:this.el,msaStore:n||this.msaStore},r))}}])&&zn(n.prototype,r),i&&zn(n,i),c}(r.Component);return kt(me,(function(e,n){t.prototype[n]=function(t){this.msaStore.dispatch(e(t))}})),kt(et,(function(e,n){t.prototype[n]=function(t){var n=this;Fn(this,(function(){n.el.current.positionStore.dispatch(e(t))}))}})),t},tr="FORWARD_SAME_PROP_NAME";function nr(e,t){var n={},r=e;return kt(t,(function(e,t){var o=function(e,t){var n={},r={};return kt(e,(function(e,o){if(o in t){var i=t[o];n[i===tr?o:i]=e}else r[o]=e})),{forward:n,other:r}}(r,e);n[t]=o.forward,r=o.other})),{forward:n,other:r}}var rr=n(719),or=rr.a&&new rr.a,ir=or?function(e,t){return or.set(e,t),e}:Et.a,ar=n(643);var cr=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Object(ar.a)(e.prototype),r=e.apply(n,t);return Object(_e.a)(r)?r:n}};var ur=function(e,t,n){var r=1&t,o=cr(e);return function t(){var i=this&&this!==Le.a&&this instanceof t?o:e;return i.apply(r?n:this,arguments)}},sr=n(694),lr=Math.max;var fr=function(e,t,n,r){for(var o=-1,i=e.length,a=n.length,c=-1,u=t.length,s=lr(i-a,0),l=Array(u+s),f=!r;++c<u;)l[c]=t[c];for(;++o<a;)(f||o<i)&&(l[n[o]]=e[o]);for(;s--;)l[c++]=e[o++];return l},pr=Math.max;var hr=function(e,t,n,r){for(var o=-1,i=e.length,a=-1,c=n.length,u=-1,s=t.length,l=pr(i-c,0),f=Array(l+s),p=!r;++o<l;)f[o]=e[o];for(var h=o;++u<s;)f[h+u]=t[u];for(;++a<c;)(p||o<i)&&(f[h+n[a]]=e[o++]);return f};var yr=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r};var br=function(){};function dr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}dr.prototype=Object(ar.a)(br.prototype),dr.prototype.constructor=dr;var vr=dr,mr=n(627),gr=or?function(e){return or.get(e)}:mr.a,Or={},wr=Object.prototype.hasOwnProperty;var jr=function(e){for(var t=e.name+"",n=Or[t],r=wr.call(Or,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t};function Sr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Sr.prototype=Object(ar.a)(br.prototype),Sr.prototype.constructor=Sr;var Pr=Sr;var Er=function(e){if(e instanceof vr)return e.clone();var t=new Pr(e.__wrapped__,e.__chain__);return t.__actions__=Object(pn.a)(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},_r=Object.prototype.hasOwnProperty;function kr(e){if(Object(yt.a)(e)&&!Object(u.a)(e)&&!(e instanceof vr)){if(e instanceof Pr)return e;if(_r.call(e,"__wrapped__"))return Er(e)}return new Pr(e)}kr.prototype=br.prototype,kr.prototype.constructor=kr;var xr=kr;var Cr=function(e){var t=jr(e),n=xr[t];if("function"!=typeof n||!(t in vr.prototype))return!1;if(e===n)return!0;var r=gr(n);return!!r&&e===r[0]},Tr=n(730),qr=Object(Tr.a)(ir),Rr=/\{\n\/\* \[wrapped with (.+)\] \*/,Ar=/,? & /;var Dr=function(e){var t=e.match(Rr);return t?t[1].split(Ar):[]},Mr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var Fr=function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Mr,"{\n/* [wrapped with "+t+"] */\n")},Hr=n(652),Lr=n(597),Br=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var Wr=function(e,t){return Object(Hr.a)(Br,(function(n){var r="_."+n[0];t&n[1]&&!Object(Lr.a)(e,r)&&e.push(r)})),e.sort()};var Ir=function(e,t,n){var r=t+"";return Object(Me.a)(e,Fr(r,Wr(Dr(r),n)))};var zr=function(e,t,n,r,o,i,a,c,u,s){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var f=[e,t,o,l?i:void 0,l?a:void 0,l?void 0:i,l?void 0:a,c,u,s],p=n.apply(void 0,f);return Cr(e)&&qr(p,f),p.placeholder=r,Ir(p,e,t)};var Nr=function(e){return e.placeholder},Vr=Math.min;var Yr=function(e,t){for(var n=e.length,r=Vr(t.length,n),o=Object(pn.a)(e);r--;){var i=t[r];e[r]=Object(Ee.a)(i,n)?o[i]:void 0}return e};var Xr=function(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n];a!==t&&"__lodash_placeholder__"!==a||(e[n]="__lodash_placeholder__",i[o++]=n)}return i};var Ur=function e(t,n,r,o,i,a,c,u,s,l){var f=128&n,p=1&n,h=2&n,y=24&n,b=512&n,d=h?void 0:cr(t);return function v(){for(var m=arguments.length,g=Array(m),O=m;O--;)g[O]=arguments[O];if(y)var w=Nr(v),j=yr(g,w);if(o&&(g=fr(g,o,i,y)),a&&(g=hr(g,a,c,y)),m-=j,y&&m<l){var S=Xr(g,w);return zr(t,n,e,v.placeholder,r,g,S,u,s,l-m)}var P=p?r:this,E=h?P[t]:t;return m=g.length,u?g=Yr(g,u):b&&m>1&&g.reverse(),f&&s<m&&(g.length=s),this&&this!==Le.a&&this instanceof v&&(E=d||cr(E)),E.apply(P,g)}};var Gr=function(e,t,n){var r=cr(e);return function o(){for(var i=arguments.length,a=Array(i),c=i,u=Nr(o);c--;)a[c]=arguments[c];var s=i<3&&a[0]!==u&&a[i-1]!==u?[]:Xr(a,u);if((i-=s.length)<n)return zr(e,t,Ur,o.placeholder,void 0,a,s,void 0,void 0,n-i);var l=this&&this!==Le.a&&this instanceof o?r:e;return Object(sr.a)(l,this,a)}};var Kr=function(e,t,n,r){var o=1&t,i=cr(e);return function t(){for(var a=-1,c=arguments.length,u=-1,s=r.length,l=Array(s+c),f=this&&this!==Le.a&&this instanceof t?i:e;++u<s;)l[u]=r[u];for(;c--;)l[u++]=arguments[++a];return Object(sr.a)(f,o?n:this,l)}},Zr=Math.min;var Qr=function(e,t){var n=e[1],r=t[1],o=n|r,i=o<131,a=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!i&&!a)return e;1&r&&(e[2]=t[2],o|=1&n?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?fr(u,c,t[4]):c,e[4]=u?Xr(e[3],"__lodash_placeholder__"):t[4]}return(c=t[5])&&(u=e[5],e[5]=u?hr(u,c,t[6]):c,e[6]=u?Xr(e[5],"__lodash_placeholder__"):t[6]),(c=t[7])&&(e[7]=c),128&r&&(e[8]=null==e[8]?t[8]:Zr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e},$r=Math.max;var Jr=function(e,t,n,r,o,i,a,c){var u=2&t;if(!u&&"function"!=typeof e)throw new TypeError("Expected a function");var s=r?r.length:0;if(s||(t&=-97,r=o=void 0),a=void 0===a?a:$r(Object(Be.a)(a),0),c=void 0===c?c:Object(Be.a)(c),s-=o?o.length:0,64&t){var l=r,f=o;r=o=void 0}var p=u?void 0:gr(e),h=[e,t,n,r,o,l,f,i,a,c];if(p&&Qr(h,p),e=h[0],t=h[1],n=h[2],r=h[3],o=h[4],!(c=h[9]=void 0===h[9]?u?0:e.length:$r(h[9]-s,0))&&24&t&&(t&=-25),t&&1!=t)y=8==t||16==t?Gr(e,t,c):32!=t&&33!=t||o.length?Ur.apply(void 0,h):Kr(e,t,n,r);else var y=ur(e,t,n);return Ir((p?ir:qr)(y,h),e,t)},eo=Object(wn.a)((function(e,t){var n=Xr(t,Nr(eo));return Jr(e,64,void 0,t,n)}));eo.placeholder={};var to=eo;var no=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return se(e,t,n,r)};function ro(e){return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oo(e,t){return e===t}function io(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e(t[o],n[o]))return!1;return!0}function ao(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oo,n=null,r=null;return function(){return io(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}function co(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return ro(e)})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}function uo(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=0,a=r.pop(),c=co(r),u=e.apply(void 0,[function(){return i++,a.apply(null,arguments)}].concat(n)),s=e((function(){for(var e=[],t=c.length,n=0;n<t;n++)e.push(c[n].apply(null,arguments));return u.apply(null,e)}));return s.resultFunc=a,s.dependencies=c,s.recomputations=function(){return i},s.resetRecomputations=function(){return i=0},s}}var so=uo(ao);function lo(e){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fo(e,t,n,r){var o=n?n.call(r,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!==lo(e)||!e||"object"!==lo(t)||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(t),u=0;u<i.length;u++){var s=i[u];if(!c(s))return!1;var l=e[s],f=t[s];if(!1===(o=n?n.call(r,l,f,s):void 0)||void 0===o&&l!==f)return!1}return!0}var po=uo(ao,fo);function ho(e){Ve(arguments.length>1,"Must provide methods for binding");for(var t=1;t<arguments.length;t++){var n=arguments[t];e[n]=e[n].bind(e)}}function yo(e){return(yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(n),!0).forEach((function(t){ko(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oo(e,t,n){return t&&go(e.prototype,t),n&&go(e,n),e}function wo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jo(e,t)}function jo(e,t){return(jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function So(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_o(e);if(t){var o=_o(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Po(this,n)}}function Po(e,t){return!t||"object"!==yo(t)&&"function"!=typeof t?Eo(e):t}function Eo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _o(e){return(_o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ko(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.withX,i=void 0!==n&&n,a=t.withY,c=void 0!==a&&a,u=function(t){wo(r,t);var n=So(r);function r(e){var t;return mo(this,r),ko(Eo(t=n.call(this,e)),"updateFromPositionStore",(function(){Ve(t.context&&t.context.positionMSAStore,"MSA PositionStore needs to be injected");var e=t.context.positionMSAStore.getState();t.position=t.position||{};var n=He(e,["currentViewSequence","currentViewSequencePosition","xPosOffset","yPosOffset"]);e.position&&(n.xPos=e.position.xPos,n.yPos=e.position.yPos),t.setState({highlight:e.highlight,hasBeenInitialized:!0}),t.el.current&&t.shouldRerender(n)?(t.position=n,t.setState({position:t.position})):(kt(n,(function(e,n){t.position[n]=e})),t.el.current&&t.updateScrollPosition())})),ko(Eo(t),"shouldRerender",(function(e){var n=t.el.current;if(void 0!==n.shouldRerender)return n.shouldRerender(e);var r=n.props.cacheElements;return!!(c&&Math.abs(e.currentViewSequence-t.position.lastCurrentViewSequence)>=r)||!!(i&&Math.abs(e.currentViewSequencePosition-t.position.lastCurrentViewSequencePosition)>=r)})),ko(Eo(t),"updateScrollPosition",(function(){var e=t.el.current;if(e&&void 0!==e.updateScrollPosition)e.updateScrollPosition();else if(e&&e.el&&e.el.current){if(i){var n=e.props.tileWidth,r=-t.position.xPosOffset;r+=(t.position.lastCurrentViewSequencePosition-t.position.lastStartXTile)*n,t.position.currentViewSequencePosition!==t.position.lastCurrentViewSequencePosition&&(r+=(t.position.currentViewSequencePosition-t.position.lastCurrentViewSequencePosition)*n),e.el.current.scrollLeft=r}if(c){var o=e.props.tileHeight,a=-t.position.yPosOffset;a+=(t.position.lastCurrentViewSequence-t.position.lastStartYTile)*o,t.position.currentViewSequence!==t.position.lastCurrentViewSequence&&(a+=(t.position.currentViewSequence-t.position.lastCurrentViewSequence)*o),e.el.current.scrollTop=a}}})),ko(Eo(t),"dispatch",(function(e){t.context.positionMSAStore.dispatch(e)})),t.el=o.a.createRef(),t.state={highlight:null,hasBeenInitialized:!1},t}return Oo(r,[{key:"componentDidMount",value:function(){this.unsubscribe=this.context.positionMSAStore.subscribe(this.updateFromPositionStore),this.updateScrollPosition(!0),this.updateFromPositionStore()}},{key:"componentDidUpdate",value:function(){this.updateScrollPosition()}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){return this.state.hasBeenInitialized?o.a.createElement(e,vo({ref:this.el,position:this.position,positionDispatch:this.dispatch,highlight:this.state.highlight},this.props)):null}}]),r}(r.PureComponent);return u.displayName="withPosition(".concat(e.displayName||e.name,")"),u.contextTypes={positionMSAStore:v.a.object},u};function Co(e){return(Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function To(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ro(e,t){return(Ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ao(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mo(e);if(t){var o=Mo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Do(this,n)}}function Do(e,t){return!t||"object"!==Co(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mo(e){return(Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ro(e,t)}(a,e);var t,n,r,i=Ao(a);function a(){return To(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"renderTile",value:function(e){var t=this.props.tileComponent;if(e in this.props.componentCache)return this.props.componentCache[e];var n=o.a.createElement(t,{key:e,index:e});return this.props.componentCache[e]=n,n}},{key:"render",value:function(){for(var e=[],t=this.props.startTile;t<this.props.endTile;t++)e.push(this.renderTile(t));return 0===e.length&&console.warn("The TileComponent rendered returned 0 elements from ".concat(this.props.startTile," to ").concat(this.props.endTile)),o.a.createElement("div",null,e)}}])&&qo(t.prototype,n),r&&qo(t,r),a}(r.PureComponent);Fo.propTypes={startTile:v.a.number.isRequired,endTile:v.a.number.isRequired,componentCache:v.a.func.isRequired};var Ho=Fo;function Lo(e){return(Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Io(e,t){return(Io=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo(e);if(t){var o=Vo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return No(this,n)}}function No(e,t){return!t||"object"!==Lo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vo(e){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Io(e,t)}(a,e);var t,n,r,i=zo(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).el=o.a.createRef(),t}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=(e.yPosOffset,e.tileHeight,e.currentViewSequence,e.sequences,e.height),n=(e.cacheElements,e.tileComponent,e.nrYTiles,e.position,e.positionDispatch,e.componentCache,Bo(e,["yPosOffset","tileHeight","currentViewSequence","sequences","height","cacheElements","tileComponent","nrYTiles","position","positionDispatch","componentCache"])),r={height:t,overflow:"hidden",position:"relative",whiteSpace:"nowrap"},i=Math.max(0,this.props.position.currentViewSequence-this.props.cacheElements),a=Math.min(this.props.sequences.length,i+Math.ceil(t/this.props.tileHeight)+2*this.props.cacheElements);return this.props.position.lastCurrentViewSequence=this.props.position.currentViewSequence,this.props.position.lastStartYTile=i,o.a.createElement("div",n,o.a.createElement("div",{style:r,ref:this.el},o.a.createElement(Ho,{componentCache:this.props.componentCache,startTile:i,endTile:a,tileComponent:this.props.tileComponent})))}}])&&Wo(t.prototype,n),r&&Wo(t,r),a}(r.PureComponent);Yo.propTypes={tileComponent:v.a.oneOfType([v.a.func,v.a.object]).isRequired,cacheElements:v.a.number.isRequired,tileHeight:v.a.number.isRequired,nrYTiles:v.a.number.isRequired,componentCache:v.a.func.isRequired};var Xo=xo(Yo,{withY:!0});function Uo(e){return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Go(){return(Go=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ko(Object(n),!0).forEach((function(t){Qo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Jo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ti(e,t,n){return t&&ei(e.prototype,t),n&&ei(e,n),e}function ni(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ri(e,t)}function ri(e,t){return(ri=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ci(e);if(t){var o=ci(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ii(this,n)}}function ii(e,t){return!t||"object"!==Uo(t)&&"function"!=typeof t?ai(e):t}function ai(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ci(e){return(ci=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ui=function(e){ni(n,e);var t=oi(n);function n(e){var r;return Jo(this,n),ho(ai(r=t.call(this,e)),"createLabel"),r.label=po(to(He,r.constructor.labelProps),r.createLabel),r}return ti(n,[{key:"createLabel",value:function(e){return this.cache=function(){},n=(t=e).sequences,i=t.tileHeight,a=t.labelComponent,c=t.labelStyle,u=t.labelAttributes,function(e){ni(r,e);var t=oi(r);function r(){return Jo(this,r),t.apply(this,arguments)}return ti(r,[{key:"render",value:function(){var e=this.props,t=e.index,r=$o(e,["index"]);if(a){var s=a;return o.a.createElement(s,{sequence:n[t],index:t})}r.style=Zo(Zo({},this.props.style),{},{height:i},c);var l=Zo(Zo({},r),u);return o.a.createElement("div",l,n[t].name)}}]),r}(r.PureComponent);var t,n,i,a,c,u}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,n=(e.dispatch,e.labelComponent,e.labelStyle,e.labelAttributes,$o(e,["cacheElements","dispatch","labelComponent","labelStyle","labelAttributes"]));return o.a.createElement(Xo,Go({tileComponent:this.label(this.props),cacheElements:t,componentCache:this.cache},n))}}]),n}(r.PureComponent);Qo(ui,"labelProps",["sequences","tileHeight","labelComponent","labelStyle","labelAttributes"]),ui.defaultProps={cacheElements:10,labelStyle:{}},ui.propTypes={font:v.a.string,labelComponent:v.a.oneOfType([v.a.object,v.a.func]),style:v.a.object,labelStyle:v.a.object,labelAttributes:v.a.object};var si=no((function(e){return{height:e.props.height,tileHeight:e.props.tileHeight,sequences:e.sequences.raw,nrYTiles:e.sequenceStats.nrYTiles}}))(ui);function li(e){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fi(){return(fi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pi(Object(n),!0).forEach((function(t){yi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bi(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vi(e,t){return(vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oi(e);if(t){var o=Oi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gi(this,n)}}function gi(e,t){return!t||"object"!==li(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oi(e){return(Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vi(e,t)}(a,e);var t,n,r,i=mi(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).el=o.a.createRef(),t}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.tileWidth,n=e.sequences,r=e.width,i=(e.cacheElements,e.tileComponent),a=(e.nrXTiles,e.maxLength,e.position,e.positionDispatch,e.componentCache,bi(e,["tileWidth","sequences","width","cacheElements","tileComponent","nrXTiles","maxLength","position","positionDispatch","componentCache"])),c={width:r,overflow:"hidden",position:"relative",whiteSpace:"nowrap"},u=hi(hi({},this.props.style),{},{height:this.props.height}),s={tileWidth:t,sequences:n,tileComponent:i},l=Math.max(0,this.props.position.currentViewSequencePosition-this.props.cacheElements),f=Math.min(this.props.maxLength,l+this.props.nrXTiles+2*this.props.cacheElements),p=this.props.width+2*this.props.cacheElements*this.props.tileWidth;return this.props.position.lastStartXTile=l,this.props.position.lastCurrentViewSequencePosition=this.props.position.currentViewSequencePosition,o.a.createElement("div",fi({style:u},a),o.a.createElement("div",{style:c,ref:this.el},o.a.createElement(Ho,fi({},s,{componentCache:this.props.componentCache,startTile:l,endTile:f,maxWidth:p}))))}}])&&di(t.prototype,n),r&&di(t,r),a}(r.PureComponent);wi.propTypes={tileComponent:v.a.oneOfType([v.a.func,v.a.object]).isRequired,cacheElements:v.a.number.isRequired,tileWidth:v.a.number.isRequired,nrXTiles:v.a.number.isRequired,maxLength:v.a.number.isRequired,componentCache:v.a.func.isRequired};var ji=xo(wi,{withX:!0}),Si=Pn((function(e,t){Object(ft.a)(t,Object(vn.a)(t),e)}));var Pi=function(e,t){return(Object(u.a)(e)?Hr.a:$t.a)(e,_t(t))};var Ei=function(e,t){var n={};return t=Object(Jt.a)(t,3),Object(Pt.a)(e,(function(e,r,o){Object(an.a)(n,r,t(e,r,o))})),n};var _i=function(e,t){var n=-1,r=Object(s.a)(e)?Array(e.length):[];return Object($t.a)(e,(function(e,o,i){r[++n]=t(e,o,i)})),r};var ki=function(e,t){return(Object(u.a)(e)?it.a:_i)(e,Object(Jt.a)(t,3))},xi=n(721);var Ci=function(e,t){var n=[];return Object($t.a)(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n};var Ti=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}};var qi=function(e,t){return(Object(u.a)(e)?xi.a:Ci)(e,Ti(Object(Jt.a)(t,3)))},Ri=n(567);var Ai=function(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=t(i);if(null!=a&&(void 0===c?a==a&&!Object(Ri.a)(a):n(a,c)))var c=a,u=i}return u};var Di=function(e,t){return e>t};var Mi=function(e){return e&&e.length?Ai(e,Et.a,Di):void 0},Fi=function e(t,n){if(!this||this.constructor!==e)return new e(t);if(void 0===t||"string"==typeof t)throw new TypeError("you need to give the seq stat an array");this.resetSeqs(t),this.alphabetSize=4,this._useBackground=!1,this.useGaps=!1,this.ignoredChars=["-","*"],Si(this,n)};Fi.prototype.addSeq=function(e){this.seqs.push(e),this._reset()},Fi.prototype.removeSeq=function(e){"number"==typeof e?this.seqs.splice(e,1):Pi(this.seqs,function(t,n){e===t&&this.seqs.splice(n,1)}.bind(this)),this._reset()},Fi.prototype.addSeqs=function(e){e.forEach(function(e){this.addSeq(e)}.bind(this))},Fi.prototype.resetSeqs=function(e){if(this.seqs=[],!e instanceof Array||"at"in e){this.mseqs=e;var t=function(){var e=this.mseqs.pluck("seq");this.resetSeqs(e)};e.on("add change reset ",t,this),t.call(this)}else this.addSeqs(e),this._reset()};var Hi=["consensus","frequency","maxLength","ic","gaps"];Fi.prototype._reset=function(){for(var e=0;e<Hi.length;e++)this["_"+Hi[e]]=void 0;this._identity=void 0,this._background=void 0},Fi.prototype.setBackground=function(e){this._useBackground=e,this._reset()},Fi.prototype.useBackground=function(){this.setBackground(!0)},Fi.prototype.setDNA=function(){this.alphabetSize=4},Fi.prototype.setProtein=function(){this.alphabetSize=20},Hi.forEach((function(e){Fi.prototype[e]=function(){return void 0===this["_"+e]&&(this["_"+e]=this[e+"Calc"]()),this["_"+e]}})),Fi.prototype.identity=function(e){var t;return(void 0===this._identity||e)&&(t=this.identityCalc(e),this._identity=void 0),this._identity||t},Fi.prototype.background=function(){return void 0!==this.bg?this.bg:(void 0===this._background&&this.backgroundCalc(),this._background)},Fi.prototype.frequencyCalc=function(e){var t,n;t=new Array(this.maxLength()),n=new Array(this.seqs.length);var r=this.ignoredChars;return void 0!==e&&e.all&&(r=[]),Pi(this.seqs,(function(e){Pi(e,(function(e,o){r.indexOf(e)>=0||(void 0===t[o]&&(t[o]={}),void 0===t[o][e]&&(t[o][e]=0),t[o][e]++,void 0===n[o]&&(n[o]=0),n[o]++)}))})),Pi(t,(function(e,r){return Pi(e,(function(e,o){return t[r][o]=e/n[r]}))})),this._frequency=t,t},Fi.prototype.backgroundCalc=function(){var e={},t=0;return Pi(this.seqs,(function(n){Pi(n,(function(n){return void 0===e[n]&&(e[n]=0),e[n]++,t++}))})),e=Ei(e,(function(e){return e/t})),this._background=e,e},Fi.prototype.icCalc=function(){var e=this.frequency();if(this._useBackground)var t=this.background();var n=this.ignoredChars,r=this._useBackground,o=ki(e,(function(e){return tn(e,(function(e,o,i){return n.indexOf(i)>=0?e:(r&&(o/=t[i]),e-o*(Math.log(o)/Math.log(2)))}),0)}));return this._ic=o,o},Fi.prototype.conservation=function(e){var t=this.ic(),n=this.gaps(),r=this;e=e||this.alphabetSize;var o=Math.log(e)/Math.log(2),i=0;return ki(t,(function(e){var t=o-e;return r.useGaps&&(t*=1-n[i++]),t}))},Fi.prototype.conservResidue=function(e){var t,n=e?e.alphabetSize:void 0,r=this.ignoredChars;t=void 0!==e&&e.scaled?this.scale(this.conservation(n)):this.conservation(n);var o,i=this.frequency();return ki(i,(function(e,n){o=qi(o(e),(function(e){return r.indexOf(e)>=0}));var i={};return Pi(o,(function(r){i[r]=e[r]*t[n]})),i}))},Fi.prototype.conservResidue2=function(e){var t=this.frequency(),n=this.conservation(e),r=this.background();return ki(t,(function(e,o){return ki(e,(function(e){var i=tn(t[o],(function(e,t){return e+t/r[o]}),0);return e/r[o]/i*n[o]}),0)}))},Fi.prototype.scale=function(e,t){t=t||this.alphabetSize;var n=Math.log(t)/Math.log(2);return ki(e,(function(e){return e/n}))},Fi.prototype.maxLengthCalc=function(){return 0===this.seqs.length?0:Mi(this.seqs,(function(e){return e.length})).length},Fi.prototype.consensusCalc=function(){var e=new Array(this.maxLength());return Pi(this.seqs,(function(t){Pi(t,(function(t,n){void 0===e[n]&&(e[n]={}),void 0===e[n][t]&&(e[n][t]=0),e[n][t]++}))})),this._consensus=tn(e,(function(e,t){var n;return n=Object.keys(t),e+Mi(n,(function(e){return t[e]}))}),""),this._consensus},Fi.prototype.identityCalc=function(e){var t=e||this.consensus();return this._identity=this.seqs.map((function(e){for(var n=0,r=0,o=0;o<e.length;o++)"-"!==e[o]&&"-"!==t[o]&&(r++,e[o]===t[o]&&n++);return n/r})),this._identity},Fi.prototype.gapsCalc=function(){var e=this.maxLength();if(e<=1||void 0===e)return[];var t=new Array(this.maxLength());return Pi(this.seqs,(function(e){Pi(e,(function(e,n){void 0===t[n]&&(t[n]={g:0,t:0}),e="-"===e?"g":"t",t[n][e]++}))})),this._gaps=ki(t,(function(e){return e.g/(e.g+e.t)})),this._gaps};var Li=Fi;function Bi(e){return(Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wi(){return(Wi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ii(Object(n),!0).forEach((function(t){Ni(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ii(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ni(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vi(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Yi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ui(e,t,n){return t&&Xi(e.prototype,t),n&&Xi(e,n),e}function Gi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ki(e,t)}function Ki(e,t){return(Ki=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ji(e);if(t){var o=Ji(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qi(this,n)}}function Qi(e,t){return!t||"object"!==Bi(t)&&"function"!=typeof t?$i(e):t}function $i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ji(e){return(Ji=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ea=function(e){Gi(n,e);var t=Zi(n);function n(e){var r;return Yi(this,n),(r=t.call(this,e)).cache=function(){},r.initializeColumnHeights(),ho($i(r),"createBar"),r.bar=po((function(e){return He(e,r.constructor.barAttributes)}),r.columnHeights,r.createBar),r}return Ui(n,[{key:"createBar",value:function(e,t){return this.cache=function(){},function(e){var t=e.columnHeights,n=e.tileWidth,i=e.height,a=e.fillColor;return e.barStyle,e.barAttributes,function(e){Gi(c,e);var r=Zi(c);function c(){return Yi(this,c),r.apply(this,arguments)}return Ui(c,[{key:"render",value:function(){var e=this.props,r=e.index,c=Vi(e,["index"]);return c.style={height:Math.round(t[r]*i),width:n,display:"inline-block",textAlign:"center",backgroundColor:a},o.a.createElement("div",c)}}]),c}(r.PureComponent)}(zi(zi({},e),{},{columnHeights:t}))}},{key:"initializeColumnHeights",value:function(){this.columnHeights=so((function(e){return e.sequences}),(function(e){return e.method}),(function(e,t){var n,r=Li(e.map((function(e){return e.sequence})));switch(t){case"conservation":n=r.scale(r.conservation());break;case"information-content":n=r.scale(r.ic());break;default:console.error(t+"is an invalid aggregation method for <OverviewBar />")}return n})).bind(this)}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,n=(e.height,e.method,e.fillColor,e.dispatch,e.barStyle,e.barAttributes,Vi(e,["cacheElements","height","method","fillColor","dispatch","barStyle","barAttributes"]));return o.a.createElement(ji,Wi({tileComponent:this.bar(this.props),cacheElements:t,componentCache:this.cache},n))}}]),n}(r.PureComponent);Ni(ea,"barAttributes",["tileWidth","height","fillColor","barStyle","barAttributes"]),ea.defaultProps={height:50,fillColor:"#999999",method:"conservation",cacheElements:10},ea.propTypes={method:v.a.oneOf(["information-content","conservation"]),height:v.a.number,fillColor:v.a.string,style:v.a.object,barStyle:v.a.object,barAttributes:v.a.object};var ta=no((function(e){return{sequences:e.sequences.raw,maxLength:e.sequences.maxLength,width:e.props.width,tileWidth:e.props.tileWidth,nrXTiles:e.sequenceStats.nrXTiles}}))(ea);function na(e){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ra(){return(ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ia(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(n),!0).forEach((function(t){aa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ca(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ua(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function la(e,t,n){return t&&sa(e.prototype,t),n&&sa(e,n),e}function fa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pa(e,t)}function pa(e,t){return(pa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=da(e);if(t){var o=da(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ya(this,n)}}function ya(e,t){return!t||"object"!==na(t)&&"function"!=typeof t?ba(e):t}function ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function da(e){return(da=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var va=function(e){fa(n,e);var t=ha(n);function n(e){var r;return ua(this,n),(r=t.call(this,e)).cache=function(){},ho(ba(r),"createMarker"),r.marker=po(to(He,r.constructor.markerAttributes),r.createMarker),r}return la(n,[{key:"createMarker",value:function(e){return this.cache=function(){},n=(t=e).markerSteps,i=t.startIndex,a=t.tileWidth,t.font,c=t.markerComponent,u=t.markerStyle,s=t.markerAttributes,function(e){fa(r,e);var t=ha(r);function r(){return ua(this,r),t.apply(this,arguments)}return la(r,[{key:"render",value:function(){var e,t=this.props,r=t.index,l=ca(t,["index"]);if(c){var f=c;return o.a.createElement(f,{index:r})}l.style=ia({width:a,display:"inline-block",textAlign:"center"},u),e=r%n==0?r+0+i:".";var p=ia(ia({},l),s);return o.a.createElement("div",p,e)}}]),r}(r.PureComponent);var t,n,i,a,c,u,s}},{key:"render",value:function(){var e=this.props,t=e.cacheElements,n=(e.markerSteps,e.startIndex,e.dispatch,e.markerComponent,e.markerStyle,ca(e,["cacheElements","markerSteps","startIndex","dispatch","markerComponent","markerStyle"]));return o.a.createElement(ji,ra({tileComponent:this.marker(this.props),cacheElements:t,componentCache:this.cache},n))}}]),n}(r.PureComponent);aa(va,"markerAttributes",["markerSteps","startIndex","tileWidth","markerComponent","markerStyle","markerAttributes"]),va.defaultProps={style:{font:"12px Arial"},height:15,markerSteps:2,startIndex:1,cacheElements:10,markerStyle:{}},va.propTypes={font:v.a.string,height:v.a.number,markerSteps:v.a.number,startIndex:v.a.number,markerComponent:v.a.oneOfType([v.a.object,v.a.func]),style:v.a.object,markerStyle:v.a.object,markerAttributes:v.a.object};var ma=no((function(e){return{sequences:e.sequences.raw,maxLength:e.sequences.maxLength,width:e.props.width,tileWidth:e.props.tileWidth,nrXTiles:e.sequenceStats.nrXTiles}}))(va);function ga(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oa=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};ga(Oa,"rel",(function(e){if(void 0!==e.changedTouches)return Oa.rel(e.changedTouches[0]);var t=e.offsetX,n=e.offsetY;if(void 0===t){var r=e.target||e.srcElement,o=r.getBoundingClientRect();if(t=e.clientX-o.left,n=e.clientY-o.top,void 0===t&&(t=e.pageX-r.offsetLeft,n=e.pageY-r.offsetTop,void 0===t))return void console.log(e,"No mouse event defined.")}return[t,n]})),ga(Oa,"abs",(function(e){if(void 0!==e.changedTouches)return Oa.abs(e.changedTouches[0]);var t=e.pageX,n=e.pageY;return void 0===t&&(t=e.layerX,n=e.layerY),void 0===t&&(t=e.clientX,n=e.clientY),void 0===t&&(t=e.x,n=e.y),[t,n]})),ga(Oa,"wheelDelta",(function(e){var t=[e.deltaX,e.deltaY];return void 0===t[0]&&e.mozMovementX&&(t=[0,e.mozMovementX]),isNaN(t[0])&&(t[0]=0),isNaN(t[1])&&(t[1]=0),t}));var wa=Oa,ja=n(800),Sa=n.n(ja),Pa=n(801),Ea=n.n(Pa),_a=n(802),ka=n.n(_a);function xa(e){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Aa(e,t){return(Aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Da(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fa(e);if(t){var o=Fa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ma(this,n)}}function Ma(e,t){return!t||"object"!==xa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fa(e){return(Fa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ha(){return o.a.createElement("svg",{height:"1em",width:"1.542em",viewBox:"0 0 1542 1000"},o.a.createElement("path",{d:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)",fill:"rgb(68, 122, 219)"}))}var La=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Aa(e,t)}(a,e);var t,n,r,i=Da(a);function a(){return qa(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(n),!0).forEach((function(t){Ta(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({opacity:.9,backgroundColor:"white"},this.props.style),t={position:"relative",fontSize:"16px",padding:"3px 4px",cursor:"pointer",lineHeight:"normal",textDecoration:"none",color:"black"};return o.a.createElement("div",{style:e},o.a.createElement("div",{style:t},o.a.createElement(Ea.a,{width:20,height:20})),o.a.createElement("div",{style:t},o.a.createElement(ka.a,{width:20,height:20})),o.a.createElement("div",{style:t},o.a.createElement(Sa.a,{width:20,height:20})),o.a.createElement("a",{href:"https://plot.ly/",target:"_blank",rel:"noreferrer noopener","data-title":"Produced with Plotly",style:t},o.a.createElement(Ha,{width:20,height:20})))}}])&&Ra(t.prototype,n),r&&Ra(t,r),a}(r.PureComponent);function Ba(e){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ia(e,t){return(Ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function za(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ya(e);if(t){var o=Ya(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Na(this,n)}}function Na(e,t){return!t||"object"!==Ba(t)&&"function"!=typeof t?Va(e):t}function Va(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ya(e){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ua=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ia(e,t)}(a,e);var t,n,r,i=za(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Xa(Va(t=i.call(this,e)),"onScroll",(function(e){Fn(Va(t),(function(){var e=t.shouldShow(),n=e.showX,r=e.showY,o={xMovement:t.el.current.scrollLeft-(n?t.props.position.xPos:0),yMovement:t.el.current.scrollTop-(r?t.props.position.yPos:0)};t.props.positionDispatch(Ke(o))}))})),Xa(Va(t),"updateScrollPosition",(function(){t.el&&t.el.current&&(t.el.current.scrollTop=t.props.position.yPos,t.el.current.scrollLeft=t.props.position.xPos)})),t.el=o.a.createRef(),t}return t=a,(n=[{key:"checkOverflow",value:function(e,t){var n=t.withX,r=void 0!==n&&n,o=t.withY,i=void 0!==o&&o,a=!1;switch(e){case"auto":r&&(a|=this.props.fullWidth>this.props.width),i&&(a|=this.props.fullHeight>this.props.height);break;case"hidden":a=!1;break;case"scroll":a=!0}return a}},{key:"shouldShow",value:function(){var e={withX:!0},t={withY:!0},n="initial"===this.props.overflowX?this.props.overflow:this.props.overflowX,r="initial"===this.props.overflowY?this.props.overflow:this.props.overflowY;return{showX:this.checkOverflow(n,e)&&this.checkOverflow(this.props.overflow,e),showY:this.checkOverflow(r,t)&&this.checkOverflow(this.props.overflow,t)}}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=e.fullWidth,i=e.fullHeight,a={position:"absolute",overflowX:"auto",overflowY:"auto",width:t,height:n,transform:""},c=this.shouldShow(),u=c.showX,s=c.showY,l={height:1,width:1};return s||u?(u&&(l.width=r,a.overflowX="scroll","top"===this.props.positionX&&(a.transform+="rotateX(180deg)")),s&&(l.height=i,a.overflowY="scroll","left"===this.props.positionY&&(a.transform+="rotateY(180deg)")),o.a.createElement("div",{style:a,onScroll:this.onScroll,ref:this.el},o.a.createElement("div",{style:l}))):o.a.createElement("div",null)}}])&&Wa(t.prototype,n),r&&Wa(t,r),a}(r.PureComponent);Ua.defaultProps={overflow:"auto",overflowX:"initial",overflowY:"initial",positionX:"bottom",positionY:"right",scrollBarWidth:5},Ua.propTypes={overflow:v.a.oneOf(["hidden","auto","scroll"]),overflowX:v.a.oneOf(["hidden","auto","scroll","initial"]),overflowY:v.a.oneOf(["hidden","auto","scroll","initial"]),width:v.a.number.isRequired,height:v.a.number.isRequired,fullHeight:v.a.number.isRequired,fullWidth:v.a.number.isRequired,positionX:v.a.oneOf(["top","bottom"]),positionY:v.a.oneOf(["left","right"])};var Ga=xo(Ua,{withX:!0,withY:!0});function Ka(e){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Za(){return(Za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qa(e){return function(e){if(Array.isArray(e))return $a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ec(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){cc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nc(e,t){return(nc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ac(e);if(t){var o=ac(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oc(this,n)}}function oc(e,t){return!t||"object"!==Ka(t)&&"function"!=typeof t?ic(e):t}function ic(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ac(e){return(ac=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nc(e,t)}(a,e);var t,n,r,i=rc(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),cc(ic(t=i.call(this,e)),"state",{mouse:{isMouseWithin:!1,cursorState:"grab"}}),cc(ic(t),"currentContext",1),t.canvasBuffers=[o.a.createRef(),o.a.createRef()],t.container=o.a.createRef(),ho(ic(t),"onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onMouseMove","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onClick","onDoubleClick","draw"),t.onViewpointChange(),t.mouseMovePosition=void 0,t.touchMovePosition=void 0,t.isInDragPhase=void 0,t.mouseHasMoved=void 0,t}return t=a,(n=[{key:"drawScene",value:function(){console.warn("drawScene is unimplemented.")}},{key:"onPositionUpdate",value:function(){console.warn("onPositionUpdate is unimplemented.")}},{key:"onViewpointChange",value:function(){}},{key:"componentDidMount",value:function(){this.ctxBuffers=[this.canvasBuffers[0].current.getContext("2d",{alpha:"false"}),this.canvasBuffers[1].current.getContext("2d",{alpha:"false"})],this.swapContexts(),this.container.current.addEventListener("mouseenter",this.onMouseEnter),this.container.current.addEventListener("mouseleave",this.onMouseLeave),this.container.current.addEventListener("touchstart",this.onTouchStart),this.container.current.addEventListener("touchmove",this.onTouchMove),this.container.current.addEventListener("touchend",this.onTouchEnd),this.container.current.addEventListener("touchcancel",this.onTouchCancel),this.container.current.addEventListener("click",this.onClick),this.container.current.addEventListener("dblclick",this.onDoubleClick),this.props.sequenceDisableDragging||(this.container.current.addEventListener("mousedown",this.onMouseDown),this.container.current.addEventListener("mouseup",this.onMouseUp),this.container.current.addEventListener("mousemove",this.onMouseMove))}},{key:"swapContexts",value:function(){var e=this.currentContext;this.canvasBuffers[e].current.style.visibility="visible";var t=(this.currentContext+1)%2;this.canvasBuffers[t].current.style.visibility="hidden",this.currentContext=t,this.ctx=this.ctxBuffers[t]}},{key:"draw",value:function(){this.ctx&&(this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.onViewpointChange(),this.drawScene(),this.swapContexts())}},{key:"onClick",value:function(e){}},{key:"onDoubleClick",value:function(e){}},{key:"onMouseDown",value:function(e){this.startDragPhase(e)}},{key:"onMouseMove",value:function(e){var t=this;if(void 0!==this.isInDragPhase){this.mouseHasMoved=!0;var n=wa.abs(e),r=this.mouseMovePosition;Fn(this,(function(){t.mouseMovePosition=n,t.onPositionUpdate(r,t.mouseMovePosition)}))}}},{key:"onMouseUp",value:function(){this.stopDragPhase()}},{key:"onMouseEnter",value:function(){this.setState((function(e){return{mouse:ec(ec({},e.mouse),{},{isMouseWithin:!0})}}))}},{key:"onMouseLeave",value:function(){this.stopHoverPhase(),this.stopDragPhase()}},{key:"onTouchStart",value:function(e){console.log("touchstart",e),this.startDragPhase(e)}},{key:"onTouchMove",value:function(e){void 0!==this.isInDragPhase&&(console.log("touchmove",e),this.onMouseMove(e))}},{key:"onTouchEnd",value:function(){this.stopDragPhase()}},{key:"onTouchCancel",value:function(){this.stopDragPhase()}},{key:"startDragPhase",value:function(e){this.mouseMovePosition=wa.abs(e),this.mouseHasMoved=void 0,this.isInDragPhase=!0,this.setState((function(e){return{mouse:ec(ec({},e.mouse),{},{cursorState:"grabbing"})}}))}},{key:"stopHoverPhase",value:function(){this.setState((function(e){return{mouse:ec(ec({},e.mouse),{},{isMouseWithin:!1})}}))}},{key:"stopDragPhase",value:function(){this.isInDragPhase=void 0,this.setState((function(e){return{mouse:ec(ec({},e.mouse),{},{cursorState:"grab"})}}))}},{key:"isEventWithinComponent",value:function(e){var t=wa.rel(e);return 0<=t[0]&&t[0]<=this.props.width&&0<=t[1]&&t[1]<=this.props.height}},{key:"componentWillUnmount",value:function(){this.container.current.removeEventListener("mouseenter",this.onMouseEnter),this.container.current.removeEventListener("mouseleave",this.onMouseLeave),this.container.current.removeEventListener("click",this.onClick),this.container.current.removeEventListener("dblclick",this.onDoubleClick),this.container.current.removeEventListener("touchstart",this.onTouchStart),this.container.current.removeEventListener("touchend",this.onTouchEnd),this.container.current.removeEventListener("touchcancel",this.onTouchCancel),this.container.current.removeEventListener("touchmove",this.onTouchMove),this.props.sequenceDisableDragging||(this.container.current.removeEventListener("mouseup",this.onMouseUp),this.container.current.removeEventListener("mousedown",this.onMouseDown),this.container.current.removeEventListener("mousemove",this.onMouseMove)),this.stopDragPhase()}},{key:"render",value:function(){var e=ec(ec({width:this.props.width,height:this.props.height},this.props.style),{},{cursor:this.state.mouse.cursorState,position:"relative",flexShrink:0}),t=this.props.showModBar&&this.state.mouse.isMouseWithin,n={position:"absolute",left:0,top:0},r=St(this.props,[].concat(Qa(this.constructor.propKeys),["tileWidth","tileHeight","colorScheme","nrXTiles","nrYTiles","dispatch","sequences","fullWidth","fullHeight","position","positionDispatch"]));return o.a.createElement("div",Za({style:e,ref:this.container},r),t&&o.a.createElement(La,{style:{position:"absolute",right:0,opacity:.8}}," Plotly Modbar"),o.a.createElement("canvas",{style:n,ref:this.canvasBuffers[0],width:this.props.width,height:this.props.height},"Your browser does not seem to support HTML5 canvas."),o.a.createElement("canvas",{style:n,ref:this.canvasBuffers[1],width:this.props.width,height:this.props.height},"Your browser does not seem to support HTML5 canvas."),o.a.createElement(Ga,{overflow:this.props.overflow,overflowX:this.props.overflowX,overflowY:this.props.overflowY,positionX:this.props.scrollBarPositionX,positionY:this.props.scrollBarPositionY,width:this.props.width,height:this.props.height,fullWidth:this.props.fullWidth,fullHeight:this.props.fullHeight}))}}])&&tc(t.prototype,n),r&&tc(t,r),a}(r.PureComponent);uc.defaultProps={overflow:"auto",overflowX:"initial",overflowY:"initial",scrollBarPositionX:"bottom",scrollBarPositionY:"right",scrollBarWidth:5,showModBar:!0,engine:"canvas",sequenceDisableDragging:!1},uc.propTypes={overflow:v.a.oneOf(["hidden","auto","scroll"]),overflowX:v.a.oneOf(["hidden","auto","scroll","initial"]),overflowY:v.a.oneOf(["hidden","auto","scroll","initial"]),width:v.a.number.isRequired,height:v.a.number.isRequired,fullHeight:v.a.number.isRequired,fullWidth:v.a.number.isRequired,scrollBarPositionX:v.a.oneOf(["top","bottom"]),scrollBarPositionY:v.a.oneOf(["left","right"]),showModBar:v.a.bool,engine:v.a.string,sequenceDisableDragging:v.a.bool};var sc=uc;function lc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.state={}}var t,n,r;return t=e,(n=[{key:"updateEl",value:function(e){this.el=e}},{key:"font",value:function(e){this.state.font=e}},{key:"globalAlpha",value:function(e){this.state.globalAlpha=e}},{key:"startDrawingFrame",value:function(){this.clear()}},{key:"endDrawingFrame",value:function(){}},{key:"save",value:function(){}},{key:"restore",value:function(){}}])&&lc(t.prototype,n),r&&lc(t,r),e}();function pc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var hc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache={},this.cacheHeight=0,this.cacheWidth=0}var t,n,r;return t=e,(n=[{key:"getFontTile",value:function(e,t,n,r){return t===this.cacheWidth&&n===this.cacheHeight&&r===this.font||(this.updateDimensions(t,n),this.font=r),void 0===this.cache[e]&&this.createTile(e,t,n),this.cache[e]}},{key:"createTile",value:function(e,t,n,r){var o=this.cache[e]=document.createElement("canvas");return o.width=t,o.height=n,this.ctx=o.getContext("2d"),this.ctx.font=this.font+"px mono",this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillText(e,t/2,n/2,t,r)}},{key:"updateDimensions",value:function(e,t){this.invalidate(),this.cacheWidth=e,this.cacheHeight=t}},{key:"invalidate",value:function(){this.cache={}}}])&&pc(t.prototype,n),r&&pc(t,r),e}();function yc(e){return(yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dc(e,t){return(dc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gc(e);if(t){var o=gc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mc(this,n)}}function mc(e,t){return!t||"object"!==yc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gc(e){return(gc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dc(e,t)}(i,e);var t,n,r,o=vc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).ctx=e.getContext("2d"),t.cache=new hc,t}return t=i,(n=[{key:"clear",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"fillRect",value:function(e,t,n,r){this.ctx.fillRect(e,t,n,r)}},{key:"fillText",value:function(e,t,n,r,o){return this.ctx.drawImage(this.cache.getFontTile(e,r,o,this.ctx.font),t,n,r,o)}},{key:"font",value:function(e){this.ctx.font=e}},{key:"fillStyle",value:function(e){this.ctx.fillStyle=e}},{key:"globalAlpha",value:function(e){this.ctx.globalAlpha=e}},{key:"save",value:function(){this.ctx.save()}},{key:"restore",value:function(){this.ctx.restore()}}])&&bc(t.prototype,n),r&&bc(t,r),i}(fc);function wc(e){return(wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sc(e,t){return(Sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_c(e);if(t){var o=_c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ec(this,n)}}function Ec(e,t){return!t||"object"!==wc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _c(e){return(_c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kc,xc,Cc,Tc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sc(e,t)}(a,e);var t,n,r,i=Pc(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).canvas=o.a.createRef(),t}return t=a,(n=[{key:"componentDidMount",value:function(){this.ctx=new Oc(this.canvas.current),this.draw()}},{key:"componentDidUpdate",value:function(){this._draw()}},{key:"_draw",value:function(){this.ctx&&(this.ctx.startDrawingFrame(),this.ctx.save(),this.draw(),this.ctx.restore(),this.ctx.endDrawingFrame())}},{key:"draw",value:function(){console.error("Implement me.")}},{key:"render",value:function(){return o.a.createElement("div",{style:this.props.style},o.a.createElement("canvas",{ref:this.canvas,width:this.props.width,height:this.props.height}))}}])&&jc(t.prototype,n),r&&jc(t,r),a}(r.PureComponent);function qc(e){return(qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ac(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dc(e,t){return(Dc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Hc(e);if(t){var o=Hc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fc(this,n)}}function Fc(e,t){return!t||"object"!==qc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hc(e){return(Hc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Cc={engine:"canvas"},(xc="defaultProps")in(kc=Tc)?Object.defineProperty(kc,xc,{value:Cc,enumerable:!0,configurable:!0,writable:!0}):kc[xc]=Cc,Tc.propTypes={width:v.a.number.isRequired,height:v.a.number.isRequired,style:v.a.object,engine:v.a.oneOf(["canvas","webgl"])};var Lc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dc(e,t)}(i,e);var t,n,r,o=Mc(i);function i(){return Rc(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"drawTile",value:function(e){var t=this,n=e.row,r=e.column,o=this.props.tileWidth,i=this.props.tileHeight,a=i*(n-this.props.startYTile),c=o*(r-this.props.startXTile);if(!(n>=this.props.sequences.raw.length)){var u=this.props.sequences.raw[n].sequence;if(!(r>=u.length)){var s=u[r];if(void 0!==s){var l=this.props.colorScheme.getColor(s,r),f=this.getOverlayFactor(s,r),p="".concat(s,"-").concat(l,"-").concat(f),h=this.props.residueTileCache.createTile({key:p,tileWidth:o,tileHeight:i,create:function(e){var o=e.canvas;return t.drawResidue({text:s,canvas:o,row:n,column:r,colorScheme:l,overlayFactor:f})}});this.props.ctx.drawImage(h,0,0,o,i,c,a,o,i)}}}}},{key:"getOverlayFactor",value:function(e,t){if(!this.props.overlayConservation||!this.props.conservation)return 1;var n=this.props.conservation.map[t][e]||0;return Math.floor(5*n)/5}},{key:"drawResidue",value:function(e){e.row,e.column;var t=e.canvas,n=e.colorScheme,r=e.text,o=e.overlayFactor,i=void 0===o?1:o;t.globalAlpha=.7*i,t.fillStyle=n,t.fillRect(0,0,this.props.tileWidth,this.props.tileHeight),this.props.tileWidth<4||(this.props.border&&(t.globalAlpha=1,t.lineWidth=this.props.borderWidth,t.strokeStyle=this.props.borderStyle,t.strokeRect(0,0,this.props.tileWidth,this.props.tileHeight)),t.globalAlpha=Math.min(1,1/6*this.props.tileWidth+-1/6*4),t.fillStyle=this.props.textColor,t.font=this.props.textFont,t.textBaseline="middle",t.textAlign="center",t.fillText(r,this.props.tileWidth/2,this.props.tileHeight/2+1,this.props.tileWidth))}},{key:"draw",value:function(e){this.props=e;for(var t=this.props.startYTile;t<this.props.endYTile;t++)for(var n=this.props.startXTile;n<this.props.endXTile;n++)this.drawTile({row:t,column:n})}}])&&Ac(t.prototype,n),r&&Ac(t,r),i}(Tc);var Bc=function(e,t){return e<t};var Wc=function(e,t){return e&&e.length?Ai(e,Object(Jt.a)(t,2),Bc):void 0};function Ic(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Nc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.maxElements;Ic(this,e),this.maxElements=n||200,this.invalidate()}var t,n,r;return t=e,(n=[{key:"createTile",value:function(e){var t=this,n=e.key,r=e.tileWidth,o=e.tileHeight,i=e.create;if(n in this.cache)return this.cache[n].value;if(this.cachedElements>=this.maxElements){var a=Wc(Object.keys(this.cache),(function(e){return t.cache[e].insertionTime}));delete this.cache[a]}var c=document.createElement("canvas");this.cache[n]={value:c,insertionTime:Date.now()},c.width=r,c.height=o;var u=c.getContext("2d");return this.cachedElements++,i({canvas:u}),c}},{key:"updateTileSpecs",value:function(e){return!fo(e,this.spec)&&(this.invalidate(),this.spec=e,!0)}},{key:"invalidate",value:function(){this.cache={},this.spec={},this.cachedElements=0}}])&&zc(t.prototype,n),r&&zc(t,r),e}();function Vc(e,t){return e-e%t}function Yc(e){return(Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Uc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zc(e,t){return(Zc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tu(e);if(t){var o=tu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $c(this,n)}}function $c(e,t){return!t||"object"!==Yc(t)&&"function"!=typeof t?Jc(e):t}function Jc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eu(e,t,n){return(eu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tu(e){return(tu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ru=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zc(e,t)}(i,e);var t,n,r,o=Qc(i);function i(e){var t,n,r,a,c,u,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),nu(Jc(s=o.call(this,e)),"renderTile",(function(e){var t=e.row,n=e.column,r=t+"-"+n;return s.tileCache.createTile({key:r,tileWidth:s.props.tileWidth*s.props.xGridSize,tileHeight:s.props.tileHeight*s.props.yGridSize,create:function(e){var r=e.canvas;s.tilingGridManager.draw(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gc(Object(n),!0).forEach((function(t){nu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ctx:r,startYTile:t,startXTile:n,residueTileCache:s.residueTileCache,endYTile:t+s.props.yGridSize,endXTile:n+s.props.xGridSize},He(s.props,["sequences","colorScheme","textFont","textColor","tileHeight","tileWidth","border","borderWidth","borderColor","overlayConservation","conservation"])))}})})),nu(Jc(s),"onPositionUpdate",(function(e,t){var n={xMovement:e[0]-t[0],yMovement:e[1]-t[1]};s.sendEvent("onPositionUpdate",t),s.props.positionDispatch(Ke(n))})),nu(Jc(s),"updateScrollPosition",(function(){s.draw()})),nu(Jc(s),"onMouseMove",(function(e){if(void 0===s.isInDragPhase&&s.hasOnMouseMoveProps()){var r=s.currentPointerPosition(e),o=s.currentMouseSequencePosition;if(!rn(o,r)&&(void 0!==o&&s.sendEvent("onResidueMouseLeave",o),s.currentMouseSequencePosition=r,s.sendEvent("onResidueMouseEnter",r),s.props.features&&s.props.features.length>0)){var a=s.mouseOverFeatureIds||[],c=s.sequencePositionToFeatureIds(r);rn(a,c)||(s.mouseOverFeatureIds=c,eu((t=Jc(s),tu(i.prototype)),"draw",t).call(t))}}eu((n=Jc(s),tu(i.prototype)),"onMouseMove",n).call(n,e)})),nu(Jc(s),"onMouseLeave",(function(e){s.sendEvent("onResidueMouseLeave",s.currentMouseSequencePosition),s.currentMouseSequencePosition=void 0,s.mouseOverFeatureIds&&(s.mouseOverFeatureIds=void 0,eu((r=Jc(s),tu(i.prototype)),"draw",r).call(r)),eu((a=Jc(s),tu(i.prototype)),"onMouseLeave",a).call(a,e)})),nu(Jc(s),"onClick",(function(e){if(!s.mouseHasMoved){var t=s.currentPointerPosition(e);s.sendEvent("onResidueClick",t),s.props.features&&s.sequencePositionToFeatureIds(t).forEach((function(e){s.sendEvent("onFeatureClick",e)}))}eu((c=Jc(s),tu(i.prototype)),"onClick",c).call(c,e)})),nu(Jc(s),"onDoubleClick",(function(e){var t=s.currentPointerPosition(e);s.sendEvent("onResidueDoubleClick",t),eu((u=Jc(s),tu(i.prototype)),"onDoubleClick",u).call(u,e)})),s.tileCache=new Nc,s.residueTileCache=new Nc,s.tilingGridManager=new Lc,s}return t=i,(n=[{key:"hasOnMouseMoveProps",value:function(){return void 0!==this.props.onResidueMouseEnter||void 0!==this.props.onResidueMouseLeave||this.props.features&&this.props.features.length>0}},{key:"componentDidMount",value:function(){this.hasOnMouseMoveProps()&&this.container.current.addEventListener("mousemove",this.onMouseMove),eu(tu(i.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){this.hasOnMouseMoveProps()&&this.container.current.removeEventListener("mousemove",this.onMouseMove),eu(tu(i.prototype),"componentWillUnmount",this).call(this)}},{key:"drawScene",value:function(){var e=this.getTilePositions();this.updateTileSpecs(),this.drawTiles(e),this.drawHighlightedRegions(),this.ctx&&this.ctx.canvas.dispatchEvent(new CustomEvent("drawCompleted",{bubbles:!0}))}},{key:"getTilePositions",value:function(){var e=Math.max(0,this.props.position.currentViewSequencePosition-this.props.cacheElements),t=Math.max(0,this.props.position.currentViewSequence-this.props.cacheElements),n=Math.min(this.props.sequences.length,t+this.props.nrYTiles+2*this.props.cacheElements);return{startXTile:e,startYTile:t,endXTile:Math.min(this.props.sequences.maxLength,e+this.props.nrXTiles+2*this.props.cacheElements),endYTile:n}}},{key:"drawTiles",value:function(e){for(var t=e.startXTile,n=e.startYTile,r=e.endXTile,o=e.endYTile,i=this.props.xGridSize,a=this.props.yGridSize,c=Vc(n,a),u=Vc(t,i),s=c;s<o;s+=a)for(var l=u;l<r;l+=i){var f=this.renderTile({row:s,column:l,canvas:this.ctx}),p=i*this.props.tileWidth,h=a*this.props.tileHeight,y=(s-this.props.position.currentViewSequence)*this.props.tileHeight+this.props.position.yPosOffset,b=(l-this.props.position.currentViewSequencePosition)*this.props.tileWidth+this.props.position.xPosOffset;this.ctx.drawImage(f,0,0,p,h,b,y,p,h)}}},{key:"drawHighlightedRegions",value:function(){var e=this;this.props.highlight&&this.drawHighligtedRegion(this.props.highlight),this.props.features&&this.props.features.forEach((function(t){e.drawHighligtedRegion(t)}))}},{key:"drawHighligtedRegion",value:function(e){var t;if(this.ctx&&e){var n=this.props.tileWidth*(1+e.residues.to-e.residues.from),r=this.props.tileHeight*(1+e.sequences.to-e.sequences.from),o=(e.sequences.from-this.props.position.currentViewSequence)*this.props.tileHeight+this.props.position.yPosOffset,i=(e.residues.from-1-this.props.position.currentViewSequencePosition)*this.props.tileWidth+this.props.position.xPosOffset,a=document.createElement("canvas");a.width=n,a.height=r;var c=a.getContext("2d"),u=null===(t=this.mouseOverFeatureIds)||void 0===t?void 0:t.some((function(t){return t===e.id}));c.globalAlpha=.3,c.fillStyle=u?"green":e.fillColor||"yellow",c.fillRect(0,0,n,r),c.globalAlpha=1,c.strokeStyle=u?"black ":e.borderColor||"red",c.lineWidth="2",c.rect(0,0,n,r),c.stroke(),this.ctx.drawImage(a,0,0,n,r,i,o,n,r)}}},{key:"positionToSequence",value:function(e){var t=this.props.sequences.raw,n=we(Ne((this.props.position.yPos+e.yPos)/this.props.tileHeight),0,t.length-1),r=t[n],o=we(Ne((this.props.position.xPos+e.xPos)/this.props.tileWidth),0,r.sequence.length-1);return{i:n,sequence:r,position:o,residue:r.sequence[o]}}},{key:"sequencePositionToFeatureIds",value:function(e){if(this.props.features)return this.props.features.filter((function(t){return t.id&&e.position>=t.residues.from-1&&e.position<=t.residues.to-1&&e.i>=t.sequences.from&&e.i<=t.sequences.to})).map((function(e){return e.id}))}},{key:"currentPointerPosition",value:function(e){var t=Xc(wa.rel(e),2),n=t[0],r=t[1];return this.positionToSequence({xPos:n,yPos:r})}},{key:"sendEvent",value:function(e,t){void 0!==this.props[e]&&this.props[e](t)}},{key:"componentWillUnmount",value:function(){this.tileCache.invalidate(),this.residueTileCache.invalidate()}},{key:"updateTileSpecs",value:function(){var e=["tileWidth","tileHeight","colorScheme","textFont","borderColor","overlayConservation","conservation"];this.tileCache.updateTileSpecs(He(this.props,[].concat(e,["xGridSize","yGridSize","sequences"]))),this.residueTileCache.updateTileSpecs(He(this.props,e))}},{key:"render",value:function(){return eu(tu(i.prototype),"render",this).call(this)}}])&&Kc(t.prototype,n),r&&Kc(t,r),i}(sc);ru.defaultProps={showModBar:!1,xGridSize:10,yGridSize:10,border:!1,borderColor:"black",borderWidth:1,cacheElements:20,textColor:"black",textFont:"18px Arial",overflow:"hidden",overflowX:"auto",overflowY:"auto",scrollBarPositionX:"bottom",scrollBarPositionY:"right",overlayConservation:!1,conservation:null,sequenceDisableDragging:!1},ru.propTypes={showModBar:v.a.bool,onResidueMouseEnter:v.a.func,onResidueMouseLeave:v.a.func,onResidueClick:v.a.func,onFeatureClick:v.a.func,highlight:v.a.object,features:v.a.arrayOf(v.a.object),onResidueDoubleClick:v.a.func,xGridSize:v.a.number.isRequired,yGridSize:v.a.number.isRequired,cacheElements:v.a.number.isRequired,border:v.a.bool,borderColor:v.a.string,borderWidth:v.a.number,textColor:v.a.string,textFont:v.a.string,overflow:v.a.oneOf(["hidden","auto","scroll"]),overflowX:v.a.oneOf(["hidden","auto","scroll","initial"]),overflowY:v.a.oneOf(["hidden","auto","scroll","initial"]),scrollBarPositionX:v.a.oneOf(["top","bottom"]),scrollBarPositionY:v.a.oneOf(["left","right"]),overlayConservation:v.a.bool,onPositionUpdate:v.a.func,sequenceDisableDragging:v.a.bool},ru.propKeys=Object.keys(ru.propTypes);var ou=xo(ru,{withX:!0,withY:!0}),iu=no((function(e){var t=Math.min(e.props.width,e.sequences.maxLength*e.props.tileWidth),n=Math.min(e.props.height,e.sequences.length*e.props.tileHeight);return{sequences:e.sequences,width:t,height:n,tileWidth:e.props.tileWidth,tileHeight:e.props.tileHeight,colorScheme:e.props.colorScheme,overlayConservation:e.props.overlayConservation,conservation:e.props.overlayConservation?e.props.conservation:null,nrXTiles:e.sequenceStats.nrXTiles,nrYTiles:e.sequenceStats.nrYTiles,fullWidth:e.sequenceStats.fullWidth,fullHeight:e.sequenceStats.fullHeight}}))(ou),au=n(601);var cu=function(e,t){var n;return Object($t.a)(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n};var uu=function(e,t,n){var r=Object(u.a)(e)?au.a:cu;return n&&Sn(e,t,n)&&(t=void 0),r(e,Object(Jt.a)(t,3))};function su(e){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pu(e,t){return(pu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bu(e);if(t){var o=bu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yu(this,n)}}function yu(e,t){return!t||"object"!==su(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bu(e){return(bu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var du=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pu(e,t)}(i,e);var t,n,r,o=hu(i);function i(){return lu(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"shouldComponentUpdate",value:function(e){var t=this;return!(fo(this.props,e)&&uu(this.props.forwardedPropsKeys.map((function(n){return fo(t.props[n],e[n])}))))}}])&&fu(t.prototype,n),r&&fu(t,r),i}(r.Component);du.propTypes={forwardPropKeys:v.a.array};var vu=du;function mu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ou(e){return(Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wu(){return(wu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ju(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Su(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pu(e,t){return(Pu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Eu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ku(e);if(t){var o=ku(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _u(this,n)}}function _u(e,t){return!t||"object"!==Ou(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ku(e){return(ku=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pu(e,t)}(a,e);var t,n,r,i=Eu(a);function a(){return ju(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e={paddingTop:this.props.tileHeight+50};return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(si,wu({style:e},this.props.labelsProps)),o.a.createElement("div",null,o.a.createElement(ta,wu({height:50},this.props.overviewBarProps)),o.a.createElement(ma,this.props.positionBarProps),o.a.createElement(iu,this.props.sequenceViewerProps),o.a.createElement("div",{style:{height:10}})))}}])&&Su(t.prototype,n),r&&Su(t,r),a}(vu);xu.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mu(Object(n),!0).forEach((function(t){gu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},vu.propTypes);var Cu=no((function(e){return{tileHeight:e.props.tileHeight}}))(xu);function Tu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ru(e){return(Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Au(){return(Au=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Du(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fu(e,t){return(Fu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bu(e);if(t){var o=Bu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lu(this,n)}}function Lu(e,t){return!t||"object"!==Ru(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bu(e){return(Bu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fu(e,t)}(a,e);var t,n,r,i=Hu(a);function a(){return Du(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e={paddingTop:this.props.tileHeight+50};return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",null,o.a.createElement(ta,Au({height:50},this.props.overviewBarProps)),o.a.createElement(ma,this.props.positionBarProps),o.a.createElement(iu,this.props.sequenceViewerProps)),o.a.createElement(si,Au({style:e},this.props.labelsProps)))}}])&&Mu(t.prototype,n),r&&Mu(t,r),a}(vu);Wu.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tu(Object(n),!0).forEach((function(t){qu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},vu.propTypes);var Iu=no((function(e){return{tileHeight:e.props.tileHeight}}))(Wu);function zu(e){return(zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nu(){return(Nu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Vu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xu(e,t){return(Xu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ku(e);if(t){var o=Ku(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Gu(this,n)}}function Gu(e,t){return!t||"object"!==zu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ku(e){return(Ku=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xu(e,t)}(a,e);var t,n,r,i=Uu(a);function a(){return Vu(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(si,this.props.labelsProps),o.a.createElement("div",null,o.a.createElement(iu,null),o.a.createElement(ma,this.props.positionBarProps),o.a.createElement("br",null),o.a.createElement(ta,this.props.overviewBarProps),o.a.createElement("br",null),o.a.createElement(ma,this.props.positionBarProps),o.a.createElement(ta,null),o.a.createElement(ta,Nu({},this.props.overviewBarProps,{method:"information-content"}))))}}])&&Yu(t.prototype,n),r&&Yu(t,r),a}(vu);function Qu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ju(e){return(Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function es(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ts(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ns(e,t){return(ns=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=is(e);if(t){var o=is(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return os(this,n)}}function os(e,t){return!t||"object"!==Ju(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function is(e){return(is=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var as=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ns(e,t)}(a,e);var t,n,r,i=rs(a);function a(){return es(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(ma,this.props.positionBarProps),o.a.createElement(iu,this.props.sequenceViewerProps))}}])&&ts(t.prototype,n),r&&ts(t,r),a}(vu);as.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qu(Object(n),!0).forEach((function(t){$u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},vu.propTypes);var cs=as;function us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ss(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ls(e){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fs(){return(fs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ps(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ys(e,t){return(ys=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vs(e);if(t){var o=vs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ds(this,n)}}function ds(e,t){return!t||"object"!==ls(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vs(e){return(vs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ms=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ys(e,t)}(a,e);var t,n,r,i=bs(a);function a(){return ps(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e={paddingTop:this.props.tileHeight};return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(si,{style:e}),o.a.createElement("div",null,o.a.createElement(ma,this.props.positionBarProps),o.a.createElement(iu,this.props.sequenceViewerProps),o.a.createElement(ma,this.props.positionBarProps),o.a.createElement(ta,this.props.overviewBarProps),o.a.createElement("br",null),o.a.createElement(ma,this.props.positionBarProps)),o.a.createElement(si,fs({style:e},this.props.labelsProps)))}}])&&hs(t.prototype,n),r&&hs(t,r),a}(vu);ms.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?us(Object(n),!0).forEach((function(t){ss(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},vu.propTypes);var gs=no((function(e){return{tileHeight:e.props.tileHeight}}))(ms);function Os(e){return(Os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function js(e,t){return(js=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ss(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Es(e);if(t){var o=Es(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ps(this,n)}}function Ps(e,t){return!t||"object"!==Os(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Es(e){return(Es=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _s(){return(_s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ks(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ks(Object(n),!0).forEach((function(t){Cs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ks(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ts(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var qs=function(e){var t=e.coordinateComponent,n=e.coordinateAttributes,r=void 0===n?{}:n,i=e.coordinateStyle,a=void 0===i?{}:i,c=Ts(e,["coordinateComponent","coordinateAttributes","coordinateStyle"]);if(t){var u=t;return o.a.createElement(u,c)}var s=c.start,l=c.end,f=c.tileHeight,p=xs(xs({},c),r);return o.a.createElement("div",_s({style:xs({height:f},a)},p),s,"-",l)},Rs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&js(e,t)}(a,e);var t,n,r,i=Ss(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).el=o.a.createRef(),t}return t=a,(n=[{key:"shouldRerender",value:function(){return!0}},{key:"render",value:function(){var e=this.props,t=e.height,n=e.width,r=e.tileHeight,i=e.tileWidth,a=e.position,c=e.coordinateComponent,u=e.coordinateAttributes,s=e.coordinateStyle,l=e.sequences,f={height:t,overflow:"hidden",position:"relative",whiteSpace:"nowrap"};this.props.position.lastCurrentViewSequence=a.currentViewSequence,this.props.position.lastStartYTile=0;var p=Math.round(a.xPos/i)+1,h=p+Math.round(n/i)-2,y=a.currentViewSequence,b=y+Math.ceil(t/r)+1,d=o.a.createElement("div",{style:{height:y*r,width:i}});return o.a.createElement("div",null,o.a.createElement("div",{style:f,ref:this.el},d,l.slice(a.currentViewSequence,b).map((function(e,t){return o.a.createElement(qs,{key:t,start:p,end:h,tileHeight:r,coordinateComponent:c,coordinateStyle:s,coordinateAttributes:u,sequence:e})}))))}}])&&ws(t.prototype,n),r&&ws(t,r),a}(r.PureComponent);Rs.propTypes={width:v.a.number.isRequired,height:v.a.number.isRequired,tileWidth:v.a.number.isRequired,tileHeight:v.a.number.isRequired,position:v.a.shape({currentViewSequence:v.a.number.isRequired,currentViewSequencePosition:v.a.number.isRequired,lastCurrentViewSequence:v.a.number,lastStartYTile:v.a.number,xPos:v.a.number.isRequired,xPosOffset:v.a.number.isRequired,yPos:v.a.number.isRequired,yPosOffset:v.a.number.isRequired}).isRequired,coordinateComponent:v.a.oneOfType([v.a.object,v.a.func]),coordinateStyle:v.a.object,coordinateAttributes:v.a.object},Rs.defaultProps={coordinateComponent:void 0,coordinateStyle:{},coordinateAttributes:{}};var As=no((function(e){return{width:e.props.width,height:e.props.height,tileHeight:e.props.tileHeight,tileWidth:e.props.tileWidth,sequences:e.sequences.raw}}))(xo(Rs,{withX:!0,withY:!0}));function Ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fs(e){return(Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ls(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bs(e,t){return(Bs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ws(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zs(e);if(t){var o=zs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Is(this,n)}}function Is(e,t){return!t||"object"!==Fs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zs(e){return(zs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ns=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bs(e,t)}(a,e);var t,n,r,i=Ws(a);function a(){return Hs(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.leftCoordinatesProps,n=e.rightCoordinatesProps,r=e.labelsProps;return o.a.createElement("div",{style:{display:"flex"}},!y(r)&&o.a.createElement(si,r),!y(t)&&o.a.createElement(As,t),o.a.createElement(iu,this.props.sequenceViewerProps),!y(n)&&o.a.createElement(As,n))}}])&&Ls(t.prototype,n),r&&Ls(t,r),a}(vu);function Vs(e){return(Vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ys(){return(Ys=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xs(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Us(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gs(e,t){return(Gs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ks(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qs(e);if(t){var o=Qs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zs(this,n)}}function Zs(e,t){return!t||"object"!==Vs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qs(e){return(Qs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Ns.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ds(Object(n),!0).forEach((function(t){Ms(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},vu.propTypes);var $s={basic:Cu,inverse:Iu,full:Zu,compact:cs,funky:gs,nightingale:Ns,default:Cu},Js=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gs(e,t)}(a,e);var t,n,r,i=Ks(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).el=o.a.createRef(),t.forwardedPropsKeys=Object.keys(t.constructor.propsToForward),t}return t=a,(n=[{key:"dispatchEvent",value:function(e){this.el.current.dispatchEvent(e)}},{key:"render",value:function(){var e=this.props,t=e.layout,n=Xs(e,["layout"]);if(t in $s){var r=$s[t],i=nr(n,this.constructor.propsToForward),a=i.forward,c=i.other;return o.a.createElement("div",Ys({el:this.ref},c),o.a.createElement(r,Ys({},a,{forwardedPropsKeys:this.forwardedPropsKeys})))}console.error("$this.props.layout} is invalid. Please use one of ".concat(Object.keys($s)))}}])&&Us(t.prototype,n),r&&Us(t,r),a}(r.PureComponent);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Js,"propsToForward",{sequenceViewerProps:{showModBar:tr,onResidueMouseEnter:tr,onResidueMouseLeave:tr,onResidueClick:tr,onResidueDoubleClick:tr,highlight:tr,features:tr,onFeatureClick:tr,onHighlightMouseEnter:tr,onHighlightMouseLeave:tr,sequenceBorder:"border",sequenceBorderColor:"borderColor",sequenceBorderWidth:"borderWidth",sequenceTextColor:"textColor",sequenceTextFont:"textFont",sequenceOverflow:"overflow",sequenceOverflowX:"overflowX",sequenceOverflowy:"overflowY",sequenceScrollBarPositionX:"scrollBarPositionX",sequenceScrollBarPositionY:"scrollBarPositionY",sequenceDisableDragging:tr,overlayConservation:tr,onPositionUpdate:tr},leftCoordinatesProps:{leftCoordinate:tr,leftCoordinateComponent:"coordinateComponent",leftCoordinateStyle:"coordinateStyle",leftCoordinateAttributes:"coordinateAttributes"},rightCoordinatesProps:{rightCoordinate:tr,rightCoordinateComponent:"coordinateComponent",rightCoordinateStyle:"coordinateStyle",rightCoordinateAttributes:"coordinateAttributes"},labelsProps:{labelComponent:tr,labelStyle:tr,labelAttributes:tr},positionBarProps:{markerSteps:tr,markerStartIndex:"startIndex",markerComponent:tr,markerStyle:tr,markerAttributes:tr},overviewBarProps:{barMethod:"method",barFillColor:"fillColor",barComponent:tr,barStyle:tr,barAttributes:tr}}),Js.defaultProps={layout:"default"},Js.propTyes={layout:v.a.oneOf(Object.keys($s))};var el=Js;function tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nl(e){return(nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rl(){return(rl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ol(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function al(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?il(Object(n),!0).forEach((function(t){cl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):il(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ul(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sl(e,t){return(sl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ll(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hl(e);if(t){var o=hl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fl(this,n)}}function fl(e,t){return!t||"object"!==nl(t)&&"function"!=typeof t?pl(e):t}function pl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hl(e){return(hl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yl={onResidueClick:"residueClick"},bl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sl(e,t)}(a,e);var t,n,r,i=ll(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).el=o.a.createRef(),t._setupStores(),t.createDomHandler=Object(ot.a)(t.createDomHandler.bind(pl(t))),t.forwardProps=po((function(e){return St(e,["msaStore"])}),t.forwardProps.bind(pl(t))),t}return t=a,(n=[{key:"_setupStores",value:function(){var e=this;this.positionStore=X(rt),this.positionStore.dispatch(et.updateMainStore(this.props.msaStore.getState())),this.msaStoreUnsubscribe=this.props.msaStore.subscribe((function(){e.positionStore.dispatch(et.updateMainStore(e.props.msaStore.getState()))}))}},{key:"componentWillUnmount",value:function(){this.msaStoreUnsubscribe()}},{key:"getChildContext",value:function(){return{positionMSAStore:this.positionStore}}},{key:"createDomHandler",value:function(e){var t=this;return function(n){var r=new CustomEvent(e,{detail:n,bubbles:!0});t.el.current.dispatchEvent(r)}}},{key:"forwardProps",value:function(e){var t=this,n=al({},e);return kt(yl,(function(e,r){r in yl&&!(r in n)&&(n[r]=t.createDomHandler(e))})),n}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.msaStore,r=ol(e,["children","msaStore"]);return t?o.a.createElement(S,{store:n},o.a.createElement("div",rl({},r,{ref:this.el}),t)):o.a.createElement(S,{store:n},o.a.createElement("div",{ref:this.el},o.a.createElement(el,this.forwardProps(r))))}}])&&ul(t.prototype,n),r&&ul(t,r),a}(r.Component);bl.childContextTypes={positionMSAStore:v.a.object},bl.propTypes={sequences:v.a.arrayOf(Xt).isRequired,width:v.a.number,height:v.a.number,tileWidth:v.a.number,tileHeight:v.a.number,position:Gt,colorScheme:Ut,onResidueMouseEnter:v.a.func,onResidueMouseLeave:v.a.func,onResidueClick:v.a.func,onResidueDoubleClick:v.a.func,onFeatureClick:v.a.func,highlight:v.a.object,features:v.a.arrayOf(v.a.object),layout:v.a.oneOf(["basic","default","inverse","full","compact","funky","nightingale"]),sequenceBorder:v.a.bool,sequenceBorderColor:v.a.string,sequenceBorderWidth:v.a.number,sequenceTextColor:v.a.string,sequenceTextFont:v.a.string,sequenceOverflow:v.a.oneOf(["hidden","auto","scroll"]),sequenceOverflowX:v.a.oneOf(["hidden","auto","scroll","initial"]),sequenceOverflowY:v.a.oneOf(["hidden","auto","scroll","initial"]),sequenceScrollBarPositionX:v.a.oneOf(["top","bottom"]),sequenceScrollBarPositionY:v.a.oneOf(["left","right"]),labelComponent:v.a.oneOfType([v.a.object,v.a.func]),labelStyle:v.a.object,labelAttributes:v.a.object,markerSteps:v.a.number,markerStartIndex:v.a.number,markerComponent:v.a.oneOfType([v.a.object,v.a.func]),markerStyle:v.a.object,markerAttributes:v.a.object,barMethod:v.a.oneOf(["information-content","conservation"]),barFillColor:v.a.string,barStyle:v.a.object,barAttributes:v.a.object,msaStore:v.a.object};var dl,vl=er(bl);vl.defaultProps=Zt,vl.propTypes=al({},bl.propTypes),bl.propTypes=St(bl.propTypes,[].concat(function(e){if(Array.isArray(e))return tl(e)}(dl=Object.keys(Kt))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(dl)||function(e,t){if(e){if("string"==typeof e)return tl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tl(e,t):void 0}}(dl)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),["sequences","position"]));var ml=vl;function gl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ol(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gl(Object(n),!0).forEach((function(t){wl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ol(Ol({},me),et);var jl=ml,Sl=n(569);function Pl(e){return(Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function El(){return(El=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kl(e,t,n){return(kl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function xl(e,t){return(xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Rl(e);if(t){var o=Rl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Tl(this,n)}}function Tl(e,t){return!t||"object"!==Pl(t)&&"function"!=typeof t?ql(e):t}function ql(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rl(e){return(Rl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Al(Object(n),!0).forEach((function(t){Ml(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Al(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ml(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fl={fontSize:"14px",boxSizing:"border-box",display:"flex",flexDirection:"column",flexShrink:0,justifyContent:"center"},Hl=Dl(Dl({},Fl),{},{textAlign:"right",paddingRight:"0.25rem"}),Ll=Dl(Dl({},Fl),{},{paddingLeft:"0.25rem"}),Bl=function(e){var t=e.children,n=e.width,r=e.tileHeight,i=e.sequence,a=e.style,c=e.excludeGaps,u=void 0===c||c,s=e.offsetStart,l=void 0!==s&&s;return o.a.createElement("div",{style:Dl(Dl({},a),{},{width:n,height:r})},t-(u&&function(e,t){return(e.slice(0,t-1).match(/-/g)||[]).length}(i.sequence,t))+(l&&i.start&&i.start))},Wl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xl(e,t)}(c,e);var t,n,i,a=Cl(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this)).setActiveTrack=e.setActiveTrack.bind(ql(e)),e}return t=c,i=[{key:"properties",get:function(){return{onActiveTrackChange:{type:Function}}}},{key:"observedAttributes",get:function(){return b.a.observedAttributes.concat(["labelwidth","activeLabel","colorscheme","calculate-conservation","overlay-conservation","sample-size-conservation","text-font","coordinate-width","coordinate-left","coordinate-right","coordinate-exclude-gaps","coordinate-offset-seq-start"])}}],(n=[{key:"connectedCallback",value:function(){kl(Rl(c.prototype),"connectedCallback",this).call(this),this.hasAttribute("activeLabel")&&(this.activeLabel=this.getAttribute("activeLabel"))}},{key:"setActiveTrack",value:function(e){this.setAttribute("activeLabel",e),this.onActiveTrackChange&&this.onActiveTrackChange(e),this.refresh()}},{key:"getCoordinateWidth",value:function(){return(this["_coordinate-width"]||0)*(this.hasAttribute("coordinate-left")+this.hasAttribute("coordinate-right"))}},{key:"getColorMap",value:function(){var e;return(null==this||null===(e=this.el)||void 0===e?void 0:e.getColorMap())||{}}},{key:"refresh",value:function(){var e=this;!this.activeLabel&&this._data&&this._data[0]&&this.setActiveTrack(this._data[0].name);var t=this.getCoordinateWidth(),n={sequences:this._data,height:this._height,width:this.width-(this._labelwidth||0)-t,tileHeight:20,tileWidth:Math.max(1,this.getSingleBaseWidth()),colorScheme:this._colorscheme||"clustal",layout:"nightingale",sequenceOverflow:"scroll",sequenceOverflowX:"hidden",sequenceDisableDragging:!0,labelComponent:function(t){return function(e){var t=e.sequence,n=e.activeLabel,i=e.setActiveTrack,a={width:e.width,height:e.tileHeight,textAlign:"left",overflow:"hidden",display:"flex",alignItems:"center",fontWeight:"normal",fontSize:"14px",cursor:"pointer",boxSizing:"border-box",padding:"0 0.25rem",borderLeft:"0.2rem solid transparent",color:"#00639A",textTransform:"uppercase",flexShrink:0},c=Dl(Dl({},a),{},{fontWeight:"bold",borderLeft:"0.2rem solid #00639A"}),u=Object(r.useRef)(null);return Object(r.useEffect)((function(){u.current.addEventListener("click",(function(){return i(t.name)}))}),[u]),o.a.createElement("span",{style:t.name===n?c:a,ref:u},t.name)}({sequence:t.sequence,activeLabel:e.activeLabel,setActiveTrack:e.setActiveTrack,width:e._labelwidth,tileHeight:20})}};this.hasAttribute("calculate-conservation")&&(n.calculateConservation=!0),this.hasAttribute("overlay-conservation")&&(n.overlayConservation=!0),this["_sample-size-conservation"]>0&&(n.sampleSizeConservation=this["_sample-size-conservation"]),this["_text-font"]>0&&(n.sequenceTextFont=this.getAttribute("text-font")),this.hasAttribute("coordinate-left")&&(n.leftCoordinateComponent=function(t){var n=t.start,r=t.tileHeight,i=t.sequence;return o.a.createElement(Bl,{width:e["_coordinate-width"],tileHeight:r,sequence:i,style:Hl,excludeGaps:"true"==e.getAttribute("coordinate-exclude-gaps"),offsetStart:"true"==e.getAttribute("coordinate-offset-seq-start")},n)}),this.hasAttribute("coordinate-right")&&(n.rightCoordinateComponent=function(t){var n=t.end,r=t.tileHeight,i=t.sequence;return o.a.createElement(Bl,{width:e["_coordinate-width"],tileHeight:r,sequence:i,style:Ll,excludeGaps:"true"==e.getAttribute("coordinate-exclude-gaps"),offsetStart:"true"==e.getAttribute("coordinate-offset-seq-start")},n)}),pe.a.render(o.a.createElement(jl,El({},n,{ref:function(t){return e.el=t}})),this),window.requestAnimationFrame((function(){e.el&&(e.el.updatePositionByResidue({aaPos:e._displaystart}),1>e.getSingleBaseWidth()&&e.dispatchEvent(new CustomEvent("change",{detail:{displaystart:e._displaystart,displayend:e._displaystart+e.xScale.range()[1]},bubbles:!0,cancelable:!0})))}))}},{key:"activeLabel",get:function(){return this.getAttribute("activeLabel")},set:function(e){this.setAttribute("activeLabel",e)}},{key:"data",set:function(e){var t=this;this._data=e,this.refresh(),window.requestAnimationFrame((function(){t.svg=Object(Sl.l)(t).select("div")}))}},{key:"margin",get:function(){return{top:10,right:0,bottom:10,left:this._labelwidth+this["_coordinate-width"]||10}}}])&&_l(t.prototype,n),i&&_l(t,i),c}(b.a),Il=n(630),zl=n(631),Nl=n(111),Vl=n(49),Yl=n(803),Xl=n.n(Yl),Ul=n(154);function Gl(){return(Gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Kl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ql=["aliphatic","aromatic","buried_index","charged","cinema","clustal","clustal2","helix_propensity","hydro","lesk","mae","negative","nucleotide","polar","positive","purine_pyrimidine","serine_threonine","strand_propensity","taylor","turn_propensity","zappo","conservation"],$l=function(e){return Math.round(Math.random()*(e-1))},Jl=function(e,t,n){return"".concat(e.substring(0,n)).concat(t).concat(e.substring(n+1))},ef=function(e,t){for(var n=e,r=0;r<t;r++){var o=$l(e.length);n=Jl(n,"-",o)}return n},tf=null;t.default=function(){var e=Kl(Object(r.useState)("clustal"),2),t=e[0],n=e[1],i=Kl(Object(r.useState)(!1),2),a=i[0],c=i[1],u=Kl(Object(r.useState)(null),2),s=u[0],l=u[1],f=Kl(Object(r.useState)(!0),2),p=f[0],h=f[1],b=Kl(Object(r.useState)(!0),2),d=b[0],v=b[1],m=Kl(Object(r.useState)(!1),2),g=m[0],O=m[1],w=Kl(Object(r.useState)(!1),2),j=w[0],S=w[1],P=Object(r.useRef)(null),E=Kl(Object(r.useState)(""),2),_=E[0],k=E[1],x=function(e){return k("".concat(_,"\n").concat(e))},C="MAMYDDEFDTKASDLTFSPWVEVENWKDVTTRLRAIKFALQADRDKIPGVLSDLKTNCPYSAFKRFPDKSLYSVLSKEAVIAVAQIQSASGFKRRADEKNAVSGLVSVTPTQISQSASSSAATPVGLATVKPPRESDSAFQEDTFSYAKFDDASTAFHKALAYLEGLSLRPTYRRKFEKDMNVKWGGSGSAPSGAPAGGSSGSAPPTSGSSGSGAAPTPPPNP";Object(r.useEffect)((function(){for(var e=[],t=1;t<=400;t++){var n=$l(C.length);e.push({name:"seq_".concat(t),sequence:ef(Jl(C,"ACDEFGHIKLMNPQRSTVWY-"[Math.floor(Math.random()*"ACDEFGHIKLMNPQRSTVWY-".length)],n),20),start:1+$l(C.length)})}P.current.data=e,P.current.addEventListener("conservationProgress",(function(e){return x("[conservationProgress]: ".concat(100*e.detail.progress,"%"))})),P.current.addEventListener("drawCompleted",(function(){var e=P.current.getColorMap(),t=e.name,n=e.map;t!==tf&&(t&&n&&x("[colors-".concat(t,"]:\n").concat(Object.entries(n).map((function(e){var t=Kl(e,2),n=t[0],r=t[1];return"\t".concat(n,": ").concat(r)})).join("\n"))),tf=t)})),P.current.onActiveTrackChange=function(e){console.log("on active track change:",e)}}),[]),Object(Nl.a)("protvista-msa",Wl),Object(Nl.a)("protvista-navigation",Il.a),Object(Nl.a)("protvista-manager",zl.a);var T=function(e){n(e.target.value),x("[setColorScheme]: ".concat(e.target.value))},q={"calculate-conservation":!0};a&&(q["overlay-conservation"]=!0),s>0&&(q["sample-size-conservation"]=s);var R={};return p&&(R["coordinate-left"]=!0),d&&(R["coordinate-right"]=!0),y(R)||(R["coordinate-width"]=30,j&&(R["coordinate-exclude-gaps"]=!0),g&&(R["coordinate-offset-seq-start"]=!0)),o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"protvista-msa"),o.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.a.createElement("label",null,"colorScheme:",o.a.createElement("select",{value:t,onChange:T,onBlur:T},Ql.map((function(e){return o.a.createElement("option",{key:e},e)})))),o.a.createElement("label",null,"overlayConservation:",o.a.createElement("input",{type:"checkbox",checked:a,onChange:function(){return c(!a)}})),o.a.createElement("label",null,"sampleSizeConservation:",o.a.createElement("input",{type:"number",value:s||"",onChange:function(e){return l(e.target.value)}})),o.a.createElement("label",null,"show left coordinates:",o.a.createElement("input",{type:"checkbox",checked:p,onChange:function(){return h(!p)}})),o.a.createElement("label",null,"show right coordinates:",o.a.createElement("input",{type:"checkbox",checked:d,onChange:function(){return v(!d)}})),(p||d)&&o.a.createElement(o.a.Fragment,null,o.a.createElement("label",null,"offset coordinates by sequence start:",o.a.createElement("input",{type:"checkbox",checked:g,onChange:function(){return O(!g)}})),o.a.createElement("label",null,"exclude gaps from coordinate count:",o.a.createElement("input",{type:"checkbox",checked:j,onChange:function(){return S(!j)}})))),o.a.createElement("protvista-manager",{attributes:"length displaystart displayend highlight",displaystart:"1",displayend:"50",id:"example"},o.a.createElement("div",{style:{display:"flex",width:"100%"}},o.a.createElement("div",{style:{width:60+(p&&30),flexShrink:0}}),o.a.createElement("protvista-navigation",{length:C.length+1,displaystart:"1",displayend:"50"}),o.a.createElement("div",{style:{width:d&&30,flexShrink:0}})),o.a.createElement("protvista-msa",Gl({id:"msa-track",ref:P,length:C.length,height:"200",displaystart:"1",displayend:"50","use-ctrl-to-zoom":!0,labelWidth:60,colorscheme:t,"text-font":"16px sans-serif"},q,R))),o.a.createElement(Ul.default,null,_),o.a.createElement(Vl.default,{content:Xl.a}))}},566:function(e,t,n){"use strict";var r=n(567);t.a=function(e){if("string"==typeof e||Object(r.a)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},567:function(e,t,n){"use strict";var r=n(587),o=n(570);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=function(e){return"symbol"==i(e)||Object(o.a)(e)&&"[object Symbol]"==Object(r.a)(e)}},571:function(e,t,n){"use strict";var r=n(565),o=n(567);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;t.a=function(e,t){if(Object(r.a)(e))return!1;var n=i(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Object(o.a)(e))||(c.test(e)||!a.test(e)||null!=t&&e in Object(t))}},574:function(e,t,n){"use strict";var r=n(565),o=n(571),i=n(606);var a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,u=function(e){var t=Object(i.a)(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,(function(e,n,r,o){t.push(r?o.replace(c,"$1"):n||e)})),t})),s=n(604);t.a=function(e,t){return Object(r.a)(e)?e:Object(o.a)(e,t)?[e]:u(Object(s.a)(e))}},575:function(e,t,n){"use strict";var r=n(574),o=n(566);t.a=function(e,t){for(var n=0,i=(t=Object(r.a)(t,e)).length;null!=e&&n<i;)e=e[Object(o.a)(t[n++])];return n&&n==i?e:void 0}},578:function(e,t,n){"use strict";var r=n(590),o=n(579),i=n(601),a=n(577);var c=function(e,t,n,r,c,u){var s=1&n,l=e.length,f=t.length;if(l!=f&&!(s&&f>l))return!1;var p=u.get(e);if(p&&u.get(t))return p==t;var h=-1,y=!0,b=2&n?new o.a:void 0;for(u.set(e,t),u.set(t,e);++h<l;){var d=e[h],v=t[h];if(r)var m=s?r(v,d,h,t,e,u):r(d,v,h,e,t,u);if(void 0!==m){if(m)continue;y=!1;break}if(b){if(!Object(i.a)(t,(function(e,t){if(!Object(a.a)(b,t)&&(d===e||c(d,e,n,r,u)))return b.push(t)}))){y=!1;break}}else if(d!==v&&!c(d,v,n,r,u)){y=!1;break}}return u.delete(e),u.delete(t),y},u=n(584),s=n(622),l=n(613);var f=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},p=n(576),h=u.a?u.a.prototype:void 0,y=h?h.valueOf:void 0;var b=function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new s.a(e),new s.a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(l.a)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var u=f;case"[object Set]":var h=1&r;if(u||(u=p.a),e.size!=t.size&&!h)return!1;var b=a.get(e);if(b)return b==t;r|=2,a.set(e,t);var d=c(u(e),u(t),r,o,i,a);return a.delete(e),d;case"[object Symbol]":if(y)return y.call(e)==y.call(t)}return!1},d=n(623),v=Object.prototype.hasOwnProperty;var m=function(e,t,n,r,o,i){var a=1&n,c=Object(d.a)(e),u=c.length;if(u!=Object(d.a)(t).length&&!a)return!1;for(var s=u;s--;){var l=c[s];if(!(a?l in t:v.call(t,l)))return!1}var f=i.get(e);if(f&&i.get(t))return f==t;var p=!0;i.set(e,t),i.set(t,e);for(var h=a;++s<u;){var y=e[l=c[s]],b=t[l];if(r)var m=a?r(b,y,l,t,e,i):r(y,b,l,e,t,i);if(!(void 0===m?y===b||o(y,b,n,r,i):m)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var g=e.constructor,O=t.constructor;g==O||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof O&&O instanceof O||(p=!1)}return i.delete(e),i.delete(t),p},g=n(609),O=n(565),w=n(611),j=n(620),S="[object Object]",P=Object.prototype.hasOwnProperty;var E=function(e,t,n,o,i,a){var u=Object(O.a)(e),s=Object(O.a)(t),l=u?"[object Array]":Object(g.a)(e),f=s?"[object Array]":Object(g.a)(t),p=(l="[object Arguments]"==l?S:l)==S,h=(f="[object Arguments]"==f?S:f)==S,y=l==f;if(y&&Object(w.a)(e)){if(!Object(w.a)(t))return!1;u=!0,p=!1}if(y&&!p)return a||(a=new r.a),u||Object(j.a)(e)?c(e,t,n,o,i,a):b(e,t,l,n,o,i,a);if(!(1&n)){var d=p&&P.call(e,"__wrapped__"),v=h&&P.call(t,"__wrapped__");if(d||v){var E=d?e.value():e,_=v?t.value():t;return a||(a=new r.a),i(E,_,n,o,a)}}return!!y&&(a||(a=new r.a),m(e,t,n,o,i,a))},_=n(570);t.a=function e(t,n,r,o,i){return t===n||(null==t||null==n||!Object(_.a)(t)&&!Object(_.a)(n)?t!=t&&n!=n:E(t,n,r,o,e,i))}},581:function(e,t,n){"use strict";var r=n(575);t.a=function(e,t,n){var o=null==e?void 0:Object(r.a)(e,t);return void 0===o?n:o}},583:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return v}));var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.min,r=void 0===n?-1/0:n,o=t.max,a=void 0===o?1/0:o;i(this,e),this.segments=[],this.max=a,this.min=r,this.regionString=null}var t,n,o;return t=e,(n=[{key:"encode",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map((function(n){var r=n.start,o=n.end;if(t)return"".concat(r,":").concat(o);var i=r===e.min?"":r,a=o===e.max?"":o;return"".concat(i,":").concat(a)})).join(",")}},{key:"decode",value:function(e){var t=this;void 0!==e&&(this.regionString=e),this.regionString?this.segments=this.regionString.split(",").map((function(e){var n=r(e.split(":"),3),o=n[0],i=n[1];if(void 0!==n[2])throw new Error("there should be at most 1 ':' per region. Region: ".concat(e));var a=o?Number(o):t.min,c=i?Number(i):t.max;if(a>c){var u=[c,a];a=u[0],c=u[1]}if(a<t.min&&(a=t.min),c>t.max&&(c=t.max),Number.isNaN(a))throw new Error("The parsed value of ".concat(o," is NaN. Region: ").concat(e));if(Number.isNaN(c))throw new Error("The parsed value of ".concat(i," is NaN. Region: ").concat(e));return{start:a,end:c}})):this.segments=[]}}])&&a(t.prototype,n),o&&a(t,o),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(e,t){return e?t?"".concat(e,",").concat(t):e:t},l=function(){function e(t){var n=t.element,r=t.min,o=t.max;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=n,this.region=new c({min:r,max:o}),this.fixedHighlight=null}var t,n,r;return t=e,(n=[{key:"setAttributesInElement",value:function(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight="".concat(this.element._highlightstart,":").concat(this.element._highlightend),this.region.decode(s(this.fixedHighlight,this.element._highlight))))}},{key:"setFloatAttribute",value:function(e,t){var n=parseFloat(t);this.element["_".concat(e)]=Number.isNaN(n)?t:n}},{key:"changedCallBack",value:function(e,t){switch(e){case"highlightstart":case"highlightend":this.setFloatAttribute(e,t),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":"".concat(Math.max(this.region.min,this.element._highlightstart),":").concat(Math.min(this.region.max,this.element._highlightend));break;default:this.element._highlight=t}this.region.decode(s(this.fixedHighlight,this.element._highlight)),this.element.refresh()}},{key:"setFixedHighlight",value:function(e){this.fixedHighlight=e,this.region.decode(s(e,this.element._highlight)),this.element.refresh()}},{key:"appendHighlightTo",value:function(e){this.highlighted=e.append("g").attr("class","highlighted")}},{key:"updateHighlight",value:function(){var e=this,t=this.highlighted.selectAll("rect").data(this.region.segments);t.enter().append("rect").style("opacity",.5).attr("fill","rgba(255, 235, 59, 0.8)").style("pointer-events","none").merge(t).attr("height",this.element._height).attr("x",(function(t){return e.element.getXFromSeqPosition(t.start)})).attr("width",(function(t){return e.element.getSingleBaseWidth()*(t.end-t.start+1)})),t.exit().remove()}},{key:"max",set:function(e){this.region.max=e}}])&&u(t.prototype,n),r&&u(t,r),e}();function f(e){var t=document.createElement("div");return t.style.borderColor="",t.style.borderColor=e,""!==t.style.borderColor}var p=function(e){return e};function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=l,b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[],n=[];if(null!==e&&"string"!=typeof e)throw new Error("The attribute text has to be of type string");if(e&&""!==e.trim()){var r=e.split(",").map((function(e){return e.split(":")}));if(r.length<2)throw new Error("There should be at least 2 points to create a scale");t=r.map((function(e){var t=e[0].trim().toUpperCase();if(!f(t))throw new Error("The color '".concat(t," is not valid'"));return t})),n=r.map((function(e,t){var n=parseFloat(e[1]);if(Number.isNaN(n))throw new Error("The second part of every point should be a number. Error in point ".concat(t,": ").concat(e));return n}))}return{range:t,domain:n}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.keyFormatter,r=void 0===n?p:n,o=t.valueFormatter,i=void 0===o?p:o;if(null!==e&&"string"!=typeof e)throw new Error("The attribute text has to be of type string");if(e&&""!==e.trim()){var a=e.split(",").map((function(e){return e.split(":")})),c={};return a.forEach((function(e){if(2!==e.length)throw new Error("Bad block: ".concat(e.join(":"),"\n The blocks of the string should follow the format KEY:VALUE"));c[r(e[0])]=i(e[1])})),c}return{}},v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.timeStampWheelOutside=0,this.resetScrollableTimeout=null}var t,n,r;return t=e,(n=[{key:"setElementScrollable",value:function(e){this.element.setAttribute("scrollable",e)}},{key:"startResetScrollableTimer",value:function(){var e=this;this.resetScrollableTimeout&&clearTimeout(this.resetScrollableTimeout),this.resetScrollableTimeout=setTimeout((function(){e.setElementScrollable(!0),e.resetScrollableTimeout=null}),400)}},{key:"blockScroll",value:function(e){this.timeStampWheelOutside=e,this.setElementScrollable(!1),this.startResetScrollableTimer()}},{key:"isWheelEventInsideElement",value:function(e,t){var n=this.element.getBoundingClientRect(),r=n.height,o=n.width,i=n.x,a=n.y;return e>i&&t<i+o&&t>a&&t<a+r}},{key:"wheel",value:function(e){var t=e.x,n=e.y,r=e.timeStamp;this.isWheelEventInsideElement(t,n)?r<this.timeStampWheelOutside+400?this.blockScroll(r):this.setElementScrollable(!0):this.blockScroll(r)}}])&&h(t.prototype,n),r&&h(t,r),e}()},586:function(e,t,n){"use strict";var r=n(590),o=n(578);var i=function(e,t,n,i){var a=n.length,c=a,u=!i;if(null==e)return!c;for(e=Object(e);a--;){var s=n[a];if(u&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<c;){var l=(s=n[a])[0],f=e[l],p=s[1];if(u&&s[2]){if(void 0===f&&!(l in e))return!1}else{var h=new r.a;if(i)var y=i(f,p,l,e,t,h);if(!(void 0===y?Object(o.a)(p,f,3,i,h):y))return!1}}return!0},a=n(572);var c=function(e){return e==e&&!Object(a.a)(e)},u=n(573);var s=function(e){for(var t=Object(u.a)(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,c(o)]}return t};var l=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};var f=function(e){var t=s(e);return 1==t.length&&t[0][2]?l(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}},p=n(581),h=n(602),y=n(571),b=n(566);var d=function(e,t){return Object(y.a)(e)&&c(t)?l(Object(b.a)(e),t):function(n){var r=Object(p.a)(n,e);return void 0===r&&r===t?Object(h.a)(n,e):Object(o.a)(t,r,3)}},v=n(615),m=n(565);var g=function(e){return function(t){return null==t?void 0:t[e]}},O=n(575);var w=function(e){return function(t){return Object(O.a)(t,e)}};var j=function(e){return Object(y.a)(e)?g(Object(b.a)(e)):w(e)};function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=function(e){return"function"==typeof e?e:null==e?v.a:"object"==S(e)?Object(m.a)(e)?d(e[0],e[1]):f(e):j(e)}},588:function(e,t,n){"use strict";var r=n(569),o=n(583),i=n(624);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){var t="function"==typeof Map?new Map:void 0;return(p=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return h(e,arguments,d(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,e)})(e)}function h(e,t,n){return(h=y()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&b(o,n.prototype),o}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(v,e);var t,n,a,u,p,h=(t=v,n=y(),function(){var e,r=d(t);if(n){var o=d(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return l(this,e)});function v(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),e=h.call(this),v._polyfillElementClosest(),e._updateScaleDomain=e._updateScaleDomain.bind(f(e)),e._initZoom=e._initZoom.bind(f(e)),e.zoomed=e.zoomed.bind(f(e)),e._applyZoomTranslation=e.applyZoomTranslation.bind(f(e)),e._resetEventHandler=e._resetEventHandler.bind(f(e));var t=!1;return e.applyZoomTranslation=function(){t||(t=!0,requestAnimationFrame((function(){t=!1,e._applyZoomTranslation()})))},e._onResize=e._onResize.bind(f(e)),e._listenForResize=e._listenForResize.bind(f(e)),e.trackHighlighter=new o.d({element:f(e),min:1}),e.scrollFilter=new o.b(f(e)),e.wheelListener=function(t){return e.scrollFilter.wheel(t)},e}return a=v,p=[{key:"_getClickCoords",value:function(){return r.e?[r.e.pageX,r.e.pageY]:null}},{key:"_polyfillElementClosest",value:function(){var e=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var n=e;do{if(n.matches(t))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"observedAttributes",get:function(){return["displaystart","displayend","length","highlight"]}}],(u=[{key:"connectedCallback",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=this.getAttribute("length")?parseFloat(this.getAttribute("length")):0,this._displaystart=this.getAttribute("displaystart")?parseFloat(this.getAttribute("displaystart")):1,this._displayend=this.getAttribute("displayend")?parseFloat(this.getAttribute("displayend")):this.length,this._height=this.getAttribute("height")?Number(this.getAttribute("height")):44,this._highlightEvent=this.getAttribute("highlight-event")?this.getAttribute("highlight-event"):"onclick",this.trackHighlighter.setAttributesInElement(this),this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this._initZoom(),this._listenForResize(),this.addEventListener("error",(function(e){console.error(e)})),this.addEventListener("click",this._resetEventHandler),this.hasAttribute("filter-scroll")&&document.addEventListener("wheel",this.wheelListener,{capture:!0})}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro?this._ro.unobserve(this):window.removeEventListener("resize",this._onResize),this.removeEventListener("click",this._resetEventHandler),document.removeEventListener("wheel",this.wheelListener)}},{key:"getWidthWithMargins",value:function(){return this.width?this.width-this.margin.left-this.margin.right:0}},{key:"_updateScaleDomain",value:function(){this.xScale=Object(r.i)().domain([1,this._length+1]).range([0,this.getWidthWithMargins()])}},{key:"_initZoom",value:function(){var e=this;this._zoom=Object(r.m)().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).extent([[0,0],[this.getWidthWithMargins(),0]]).filter((function(){if(!(r.e instanceof WheelEvent))return!0;if(e.hasAttribute("scroll-filter")){var t=e.getAttribute("scrollable");if(t)return"true"===t}return!e.hasAttribute("use-ctrl-to-zoom")||r.e.ctrlKey})).on("zoom",this.zoomed)}},{key:"setFloatAttribute",value:function(e,t){var n=parseFloat(t);this["_".concat(e)]=Number.isNaN(n)?t:n}},{key:"attributeChangedCallback",value:function(e,t,n){if("null"===n&&(n=null),t!==n){if(e.startsWith("highlight"))return void this.trackHighlighter.changedCallBack(e,n);this.setFloatAttribute(e,n),"length"===e&&(this._updateScaleDomain(),this._originXScale=this.xScale.copy()),this.applyZoomTranslation()}}},{key:"zoomed",value:function(){if(this.xScale=r.e.transform.rescaleX(this._originXScale),!this.dontDispatch){var e=c(this.xScale.domain(),2),t=e[0],n=e[1];this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,t),displayend:Math.min(this.length,Math.max(n-1,t+1))},bubbles:!0,cancelable:!0}))}}},{key:"applyZoomTranslation",value:function(){if(this.svg&&this._originXScale){var e=Math.max(1,this.length/(1+this._displayend-this._displaystart)),t=-this._originXScale(this._displaystart);this.dontDispatch=!0,this.svg.call(this.zoom.transform,r.n.scale(e).translate(t,0)),this.dontDispatch=!1,this.refresh()}}},{key:"_onResize",value:function(){this.width=this.offsetWidth,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this.svg&&this.svg.attr("width",this.width),this._zoom.scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]),this.applyZoomTranslation()}},{key:"_listenForResize",value:function(){this._ro=new i.a(this._onResize),this._ro.observe(this)}},{key:"_resetEventHandler",value:function(e){e.target.closest(".feature")||this.dispatchEvent(this.createEvent("reset",null,!0))}},{key:"getXFromSeqPosition",value:function(e){return this.margin.left+this.xScale(e)}},{key:"getSingleBaseWidth",value:function(){return this.xScale(2)-this.xScale(1)}},{key:"createEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;t&&(t=t.feature?t.feature:t);var u={eventtype:e,coords:v._getClickCoords(),feature:t,target:c};return n&&(t&&t.fragments?u.highlight=t.fragments.map((function(e){return"".concat(e.start,":").concat(e.end)})).join(","):r.e&&r.e.shiftKey&&this._highlight?u.highlight="".concat(this._highlight,",").concat(i,":").concat(a):u.highlight=i&&a?"".concat(i,":").concat(a):null),o&&(u.selectedid=t&&t.protvistaFeatureId),new CustomEvent("change",{detail:u,bubbles:!0,cancelable:!0})}},{key:"bindEvents",value:function(e,t){e.on("mouseover",(function(e,n,r){t.dispatchEvent(t.createEvent("mouseover",e,"onmouseover"===t._highlightEvent,!1,e.start,e.end,r[n]))})).on("mouseout",(function(){t.dispatchEvent(t.createEvent("mouseout",null,"onmouseover"===t._highlightEvent))})).on("click",(function(e,n,r){t.dispatchEvent(t.createEvent("click",e,"onclick"===t._highlightEvent,!0,e.start,e.end,r[n]))}))}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",set:function(e){this._height=e},get:function(){return this._height}},{key:"length",set:function(e){this._length=e,this.trackHighlighter.max=e},get:function(){return this._length}},{key:"xScale",get:function(){return this._xScale},set:function(e){this._xScale=e}},{key:"zoom",get:function(){return this._zoom}},{key:"svg",set:function(e){this._svg=e,e.call(this._zoom),this.applyZoomTranslation()},get:function(){return this._svg}},{key:"margin",get:function(){return{top:10,right:10,bottom:10,left:10}}},{key:"fixedHighlight",set:function(e){this.trackHighlighter.setFixedHighlight(e)}}])&&s(a.prototype,u),p&&s(a,p),v}(p(HTMLElement));t.a=v},592:function(e,t,n){"use strict";var r=n(600),o=n(582);var i=function(e,t){return function(n,r){if(null==n)return n;if(!Object(o.a)(n))return e(n,r);for(var i=n.length,a=t?i:-1,c=Object(n);(t?a--:++a<i)&&!1!==r(c[a],a,c););return n}}(r.a);t.a=i},599:function(e,t,n){"use strict";var r=n(572),o=n(567),i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt;t.a=function(e){if("number"==typeof e)return e;if(Object(o.a)(e))return NaN;if(Object(r.a)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(r.a)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=c.test(e);return n||u.test(e)?s(e.slice(2),n?2:8):a.test(e)?NaN:+e}},600:function(e,t,n){"use strict";var r=n(605),o=n(573);t.a=function(e,t){return e&&Object(r.a)(e,t,o.a)}},601:function(e,t,n){"use strict";t.a=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},602:function(e,t,n){"use strict";var r=function(e,t){return null!=e&&t in Object(e)},o=n(574),i=n(618),a=n(565),c=n(617),u=n(621),s=n(566);var l=function(e,t,n){for(var r=-1,l=(t=Object(o.a)(t,e)).length,f=!1;++r<l;){var p=Object(s.a)(t[r]);if(!(f=null!=e&&n(e,p)))break;e=e[p]}return f||++r!=l?f:!!(l=null==e?0:e.length)&&Object(u.a)(l)&&Object(c.a)(p,l)&&(Object(a.a)(e)||Object(i.a)(e))};t.a=function(e,t){return null!=e&&l(e,t,r)}},603:function(e,t,n){"use strict";var r=n(599);var o=function(e){return e?(e=Object(r.a)(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0};t.a=function(e){var t=o(e),n=t%1;return t==t?n?t-n:t:0}},604:function(e,t,n){"use strict";var r=n(584),o=n(568),i=n(565),a=n(567),c=r.a?r.a.prototype:void 0,u=c?c.toString:void 0;var s=function e(t){if("string"==typeof t)return t;if(Object(i.a)(t))return Object(o.a)(t,e)+"";if(Object(a.a)(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};t.a=function(e){return null==e?"":s(e)}},605:function(e,t,n){"use strict";var r=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),c=a.length;c--;){var u=a[e?c:++o];if(!1===n(i[u],u,i))break}return t}}();t.a=r},606:function(e,t,n){"use strict";var r=n(625);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r.a),n}o.Cache=r.a,t.a=o},619:function(e,t,n){"use strict";var r=n(645),o=n(612);t.a=function(e,t,n,i){var a=!n;n||(n={});for(var c=-1,u=t.length;++c<u;){var s=t[c],l=i?i(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),a?Object(o.a)(n,s,l):Object(r.a)(n,s,l)}return n}},630:function(e,t,n){"use strict";var r=n(569);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return u(e,arguments,f(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function u(e,t,n){return(u=s()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&l(o,n.prototype),o}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(h,e);var t,n,o,c,u,p=(t=h,n=s(),function(){var e,r=f(t);if(n){var o=f(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)});function h(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(e=p.call(this))._x=null,e._padding=0,e.dontDispatch=!1,e}return o=h,u=[{key:"observedAttributes",get:function(){return["length","displaystart","displayend","highlightStart","highlightEnd","width","rulerstart"]}}],(c=[{key:"_refreshWidth",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.width>0&&(this._padding=10)}},{key:"connectedCallback",value:function(){this._refreshWidth(),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=parseFloat(this.getAttribute("length")),this._displaystart=parseFloat(this.getAttribute("displaystart"))||1,this._displayend=parseFloat(this.getAttribute("displayend"))||this._length,this._highlightStart=parseFloat(this.getAttribute("highlightStart")),this._highlightEnd=parseFloat(this.getAttribute("highlightEnd")),this._rulerstart=parseFloat(this.getAttribute("rulerStart"))||1,this._onResize=this._onResize.bind(this),this._createNavRuler()}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro&&this._ro.unobserve(this),window.removeEventListener("resize",this._onResize)}},{key:"attributeChangedCallback",value:function(e,t,n){t!==n&&(this["_".concat(e)]=parseFloat(n),this._updateNavRuler())}},{key:"_createNavRuler",value:function(){var e=this;this._x=Object(r.i)().range([this._padding,this.width-this._padding]),this._x.domain([this._rulerstart,this._rulerstart+this._length]),this._svg=Object(r.l)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",40),this._xAxis=Object(r.a)(this._x),this._displaystartLabel=this._svg.append("text").attr("class","start-label").attr("x",0).attr("y",40-this._padding),this._displayendLabel=this._svg.append("text").attr("class","end-label").attr("x",this.width).attr("y",40-this._padding).attr("text-anchor","end"),this._axis=this._svg.append("g").attr("class","x axis").call(this._xAxis),this._viewport=Object(r.d)().extent([[this._padding,0],[this.width-this._padding,20.4]]).on("brush",(function(){r.e.selection&&(e._displaystart=Object(r.f)("d")(e._x.invert(r.e.selection[0])),e._displayend=Object(r.f)("d")(e._x.invert(r.e.selection[1])),e.dontDispatch||e.dispatchEvent(new CustomEvent("change",{detail:{displayend:e._displayend,displaystart:e._displaystart,extra:{transform:r.e.transform}},bubbles:!0,cancelable:!0})),e._updateLabels(),e._updatePolygon())})),this._brushG=this._svg.append("g").attr("class","brush").call(this._viewport),this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.polygon=this._svg.append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),this._updateNavRuler(),"ResizeObserver"in window&&(this._ro=new ResizeObserver(this._onResize),this._ro.observe(this)),window.addEventListener("resize",this._onResize)}},{key:"_onResize",value:function(){this._refreshWidth(),this._x=this._x.range([this._padding,this.width-this._padding]),this._svg.attr("width",this.width),this._viewport.extent([[this._padding,0],[this.width-this._padding,20.4]]),this._brushG.call(this._viewport),this._updateNavRuler()}},{key:"_updateNavRuler",value:function(){this._x&&(this._x.domain([this._rulerstart,this._rulerstart+this._length]),this._axis.call(this._xAxis),this._updatePolygon(),this._updateLabels(),this._brushG&&(this.dontDispatch=!0,this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.dontDispatch=!1))}},{key:"_updateLabels",value:function(){this._displaystartLabel&&this._displaystartLabel.text(this._displaystart),this._displayendLabel&&this._displayendLabel.attr("x",this.width).text(this._displayend)}},{key:"_updatePolygon",value:function(){this.polygon&&this.polygon.attr("points","".concat(this._x(this._displaystart),",").concat(20,"\n        ").concat(this._x(this._displayend),",").concat(20,"\n        ").concat(this.width,",").concat(40,"\n        0,").concat(40))}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}}])&&i(o.prototype,c),u&&i(o,u),h}(c(HTMLElement));t.a=p},631:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,e)})(e)}function s(e,t,n){return(s=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&f(o,n.prototype),o}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(h,e);var t,n,r,i,u,s=(t=h,n=l(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return c(this,e)});function h(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(e=s.call(this)).protvistaElements=new Set,e.attributeValues=new Map,e.propertyValues=new Map,e.mouseOver=!1,e}return r=h,u=[{key:"observedAttributes",get:function(){return["attributes","length","displaystart","displayend","highlight"]}}],(i=[{key:"attributeChangedCallback",value:function(e,t,n){if(t!==n){if("attributes"===e){if(this._attributes=n.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute");this.attributeValues=new Map(this._attributes.filter((function(e){return!h.observedAttributes.includes(e)})).map((function(e){return[e,null]})))}else"length"===e&&(this.length=n),"displaystart"===e&&(this.displaystart=n),"displayend"===e&&(this.displayend=n),"highlight"===e&&(this.highlight=n);this.applyAttributes()}}},{key:"register",value:function(e){this.protvistaElements.add(e),this.applyAttributes()}},{key:"unregister",value:function(e){this.protvistaElements.delete(e)}},{key:"_polyfillElementClosest",value:function(){var e=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var n=e;do{if(n.matches(t))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"applyAttributes",value:function(){var e=this;this.protvistaElements.forEach((function(t){e.attributeValues.forEach((function(e,n){!1===e||null==e?t.removeAttribute(n):t.setAttribute(n,"boolean"==typeof e?"":e)}))}))}},{key:"applyProperties",value:function(e){var t=this;if(e){var n=this.querySelector("#".concat(e));this.propertyValues.forEach((function(e,t){n[t]=e}))}else this.protvistaElements.forEach((function(e){t.propertyValues.forEach((function(t,n){e[n]=t}))}))}},{key:"isRegisteredAttribute",value:function(e){return o(this.attributeValues.keys()).includes(e)||h.observedAttributes.includes(e)}},{key:"_changeListener",value:function(e){var t=this;switch(e.detail.handler){case"property":this.propertyValues.set(e.detail.type,e.detail.value),this.applyProperties(e.detail.for);break;default:this.isRegisteredAttribute(e.detail.type)&&this.attributeValues.set(e.detail.type,e.detail.value),Object.keys(e.detail).forEach((function(n){t.isRegisteredAttribute(n)&&t.attributeValues.set(n,e.detail[n])})),this.applyAttributes()}}},{key:"connectedCallback",value:function(){this.addEventListener("change",this._changeListener)}},{key:"length",set:function(e){this.attributeValues.set("length",e)},get:function(){return this.attributeValues.get("length")}},{key:"displaystart",set:function(e){this.attributeValues.set("displaystart",e)},get:function(){return this.attributeValues.get("displaystart")}},{key:"displayend",set:function(e){this.attributeValues.set("displayend",e)},get:function(){return this.attributeValues.get("displayend")}},{key:"highlight",set:function(e){this.attributeValues.set("highlight",e)},get:function(){return this.attributeValues.get("highlight")}}])&&a(r.prototype,i),u&&a(r,u),h}(u(HTMLElement));t.a=h},634:function(e,t,n){"use strict";var r=n(711),o=n(572),i=n(642);var a=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},c=Object.prototype.hasOwnProperty;var u=function(e){if(!Object(o.a)(e))return a(e);var t=Object(i.a)(e),n=[];for(var r in e)("constructor"!=r||!t&&c.call(e,r))&&n.push(r);return n},s=n(582);t.a=function(e){return Object(s.a)(e)?Object(r.a)(e,!0):u(e)}},636:function(e,t,n){"use strict";var r=n(622);t.a=function(e){var t=new e.constructor(e.byteLength);return new r.a(t).set(new r.a(e)),t}},641:function(e,t,n){"use strict";t.a=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},643:function(e,t,n){"use strict";var r=n(572),o=Object.create,i=function(){function e(){}return function(t){if(!Object(r.a)(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();t.a=i},644:function(e,t,n){"use strict";var r=n(686),o=Object(r.a)(Object.getPrototypeOf,Object);t.a=o},645:function(e,t,n){"use strict";var r=n(612),o=n(613),i=Object.prototype.hasOwnProperty;t.a=function(e,t,n){var a=e[t];i.call(e,t)&&Object(o.a)(a,n)&&(void 0!==n||t in e)||Object(r.a)(e,t,n)}},649:function(e,t,n){"use strict";var r=n(662),o=n(644),i=n(650),a=n(687),c=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Object(r.a)(t,Object(i.a)(e)),e=Object(o.a)(e);return t}:a.a;t.a=c},652:function(e,t,n){"use strict";t.a=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},660:function(e,t,n){"use strict";(function(e){var r=n(608);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="object"==("undefined"==typeof exports?"undefined":o(exports))&&exports&&!exports.nodeType&&exports,a=i&&"object"==o(e)&&e&&!e.nodeType&&e,c=a&&a.exports===i?r.a.Buffer:void 0,u=c?c.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var n=e.length,r=u?u(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(648)(e))},661:function(e,t,n){"use strict";var r=n(643),o=n(644),i=n(642);t.a=function(e){return"function"!=typeof e.constructor||Object(i.a)(e)?{}:Object(r.a)(Object(o.a)(e))}},663:function(e,t,n){"use strict";var r=n(636);t.a=function(e,t){var n=t?Object(r.a)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},664:function(e,t,n){"use strict";var r=n(688),o=n(649),i=n(634);t.a=function(e){return Object(r.a)(e,i.a,o.a)}},674:function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,s=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?s=u.concat(s):f=-1,s.length&&h())}function h(){if(!l){var e=c(p);l=!0;for(var t=s.length;t;){for(u=s,s=[];++f<t;)u&&u[f].run();f=-1,t=s.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function b(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new y(e,t)),1!==s.length||l||c(h)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=b,o.addListener=b,o.once=b,o.off=b,o.removeListener=b,o.removeAllListeners=b,o.emit=b,o.prependListener=b,o.prependOnceListener=b,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},700:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=a(n(0)),i=a(n(56));function a(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.children,n=e.width,i=e.height,a=e.style,c=void 0===a?{}:a,u=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","width","height","style"]);return o.default.createElement("svg",r({children:t,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:i,width:n,style:c},u))};c.propTypes={children:i.default.node.isRequired,width:i.default.oneOfType([i.default.number,i.default.string]),height:i.default.oneOfType([i.default.number,i.default.string]),style:i.default.object},t.default=c},701:function(e,t,n){e.exports=function(){return new Worker(n.p+"62b53c9c107e960ca50a.worker.js")}},706:function(e,t,n){"use strict";var r=n(590),o=n(652),i=n(645),a=n(619),c=n(573);var u=function(e,t){return e&&Object(a.a)(t,Object(c.a)(t),e)},s=n(634);var l=function(e,t){return e&&Object(a.a)(t,Object(s.a)(t),e)},f=n(660),p=n(641),h=n(650);var y=function(e,t){return Object(a.a)(e,Object(h.a)(e),t)},b=n(649);var d=function(e,t){return Object(a.a)(e,Object(b.a)(e),t)},v=n(623),m=n(664),g=n(609),O=Object.prototype.hasOwnProperty;var w=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&O.call(e,"index")&&(n.index=e.index,n.input=e.input),n},j=n(636);var S=function(e,t){var n=t?Object(j.a)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},P=/\w*$/;var E=function(e){var t=new e.constructor(e.source,P.exec(e));return t.lastIndex=e.lastIndex,t},_=n(584),k=_.a?_.a.prototype:void 0,x=k?k.valueOf:void 0;var C=function(e){return x?Object(x.call(e)):{}},T=n(663);var q=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Object(j.a)(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return S(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Object(T.a)(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return E(e);case"[object Set]":return new r;case"[object Symbol]":return C(e)}},R=n(661),A=n(565),D=n(611),M=n(570);var F=function(e){return Object(M.a)(e)&&"[object Map]"==Object(g.a)(e)},H=n(614),L=n(651),B=L.a&&L.a.isMap,W=B?Object(H.a)(B):F,I=n(572);var z=function(e){return Object(M.a)(e)&&"[object Set]"==Object(g.a)(e)},N=L.a&&L.a.isSet,V=N?Object(H.a)(N):z,Y={};Y["[object Arguments]"]=Y["[object Array]"]=Y["[object ArrayBuffer]"]=Y["[object DataView]"]=Y["[object Boolean]"]=Y["[object Date]"]=Y["[object Float32Array]"]=Y["[object Float64Array]"]=Y["[object Int8Array]"]=Y["[object Int16Array]"]=Y["[object Int32Array]"]=Y["[object Map]"]=Y["[object Number]"]=Y["[object Object]"]=Y["[object RegExp]"]=Y["[object Set]"]=Y["[object String]"]=Y["[object Symbol]"]=Y["[object Uint8Array]"]=Y["[object Uint8ClampedArray]"]=Y["[object Uint16Array]"]=Y["[object Uint32Array]"]=!0,Y["[object Error]"]=Y["[object Function]"]=Y["[object WeakMap]"]=!1;t.a=function e(t,n,a,s,h,b){var O,j=1&n,S=2&n,P=4&n;if(a&&(O=h?a(t,s,h,b):a(t)),void 0!==O)return O;if(!Object(I.a)(t))return t;var E=Object(A.a)(t);if(E){if(O=w(t),!j)return Object(p.a)(t,O)}else{var _=Object(g.a)(t),k="[object Function]"==_||"[object GeneratorFunction]"==_;if(Object(D.a)(t))return Object(f.a)(t,j);if("[object Object]"==_||"[object Arguments]"==_||k&&!h){if(O=S||k?{}:Object(R.a)(t),!j)return S?d(t,l(O,t)):y(t,u(O,t))}else{if(!Y[_])return h?t:{};O=q(t,_,j)}}b||(b=new r.a);var x=b.get(t);if(x)return x;b.set(t,O),V(t)?t.forEach((function(r){O.add(e(r,n,a,r,t,b))})):W(t)&&t.forEach((function(r,o){O.set(o,e(r,n,a,o,t,b))}));var C=P?S?m.a:v.a:S?keysIn:c.a,T=E?void 0:C(t);return Object(o.a)(T||t,(function(r,o){T&&(r=t[o=r]),Object(i.a)(O,o,e(r,n,a,o,t,b))})),O}},794:function(e,t,n){"use strict";(function(e,r){var o,i=n(795);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(i.a)(o);t.a=a}).call(this,n(112),n(648)(e))},795:function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},796:function(e,t,n){"use strict";(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(114);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function i(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0}function a(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var c=n(797),u=Object.prototype.hasOwnProperty,s=Array.prototype.slice,l="foo"===function(){}.name;function f(e){return Object.prototype.toString.call(e)}function p(e){return!a(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var h=e.exports=g,y=/\s*function\s+([^\(\s]*)\s*/;function b(e){if(c.isFunction(e)){if(l)return e.name;var t=e.toString().match(y);return t&&t[1]}}function d(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function v(e){if(l||!c.isFunction(e))return c.inspect(e);var t=b(e);return"[Function"+(t?": "+t:"")+"]"}function m(e,t,n,r,o){throw new h.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:o})}function g(e,t){e||m(e,!0,t,"==",h.ok)}function O(e,t,n,o){if(e===t)return!0;if(a(e)&&a(t))return 0===i(e,t);if(c.isDate(e)&&c.isDate(t))return e.getTime()===t.getTime();if(c.isRegExp(e)&&c.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===r(e)||null!==t&&"object"===r(t)){if(p(e)&&p(t)&&f(e)===f(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var u=(o=o||{actual:[],expected:[]}).actual.indexOf(e);return-1!==u&&u===o.expected.indexOf(t)||(o.actual.push(e),o.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(c.isPrimitive(e)||c.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=w(e),i=w(t);if(o&&!i||!o&&i)return!1;if(o)return e=s.call(e),t=s.call(t),O(e,t,n);var a,u,l=P(e),f=P(t);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),u=l.length-1;u>=0;u--)if(l[u]!==f[u])return!1;for(u=l.length-1;u>=0;u--)if(a=l[u],!O(e[a],t[a],n,r))return!1;return!0}(e,t,n,o))}return n?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function j(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function S(e,t,n,r){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!o&&m(o,n,"Missing expected exception"+r);var i="string"==typeof r,a=!e&&o&&!n;if((!e&&c.isError(o)&&i&&j(o,n)||a)&&m(o,n,"Got unwanted exception"+r),e&&o&&n&&!j(o,n)||!e&&o)throw o}h.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return d(v(e.actual),128)+" "+e.operator+" "+d(v(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,o=b(t),i=r.indexOf("\n"+o);if(i>=0){var a=r.indexOf("\n",i+1);r=r.substring(a+1)}this.stack=r}}},c.inherits(h.AssertionError,Error),h.fail=m,h.ok=g,h.equal=function(e,t,n){e!=t&&m(e,t,n,"==",h.equal)},h.notEqual=function(e,t,n){e==t&&m(e,t,n,"!=",h.notEqual)},h.deepEqual=function(e,t,n){O(e,t,!1)||m(e,t,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(e,t,n){O(e,t,!0)||m(e,t,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(e,t,n){O(e,t,!1)&&m(e,t,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function e(t,n,r){O(t,n,!0)&&m(t,n,r,"notDeepStrictEqual",e)},h.strictEqual=function(e,t,n){e!==t&&m(e,t,n,"===",h.strictEqual)},h.notStrictEqual=function(e,t,n){e===t&&m(e,t,n,"!==",h.notStrictEqual)},h.throws=function(e,t,n){S(!0,e,t,n)},h.doesNotThrow=function(e,t,n){S(!1,e,t,n)},h.ifError=function(e){if(e)throw e},h.strict=o((function e(t,n){t||m(t,!0,n,"==",e)}),h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var P=Object.keys||function(e){var t=[];for(var n in e)u.call(e,n)&&t.push(n);return t}}).call(this,n(112))},797:function(e,t,n){(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),c=r[n];n<o;c=r[++n])d(c)||!w(c)?a+=" "+c:a+=" "+u(c);return a},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var a,c={};function u(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),b(n)?r.showHidden=n:n&&t._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),f(r,e,r.depth)}function s(e,t){var n=u.styles[t];return n?"["+u.colors[n][0]+"m"+e+"["+u.colors[n][1]+"m":e}function l(e,t){return e}function f(e,n,r){if(e.customInspect&&n&&P(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return m(o)||(o=f(e,o,r)),o}var i=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(v(t))return e.stylize(""+t,"number");if(b(t))return e.stylize(""+t,"boolean");if(d(t))return e.stylize("null","null")}(e,n);if(i)return i;var a=Object.keys(n),c=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),S(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(n);if(0===a.length){if(P(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(O(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(j(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return p(n)}var s,l="",w=!1,E=["{","}"];(y(n)&&(w=!0,E=["[","]"]),P(n))&&(l=" [Function"+(n.name?": "+n.name:"")+"]");return O(n)&&(l=" "+RegExp.prototype.toString.call(n)),j(n)&&(l=" "+Date.prototype.toUTCString.call(n)),S(n)&&(l=" "+p(n)),0!==a.length||w&&0!=n.length?r<0?O(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),s=w?function(e,t,n,r,o){for(var i=[],a=0,c=t.length;a<c;++a)C(t,String(a))?i.push(h(e,t,n,r,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(h(e,t,n,r,o,!0))})),i}(e,n,r,c,a):a.map((function(t){return h(e,n,r,c,t,w)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(s,l,E)):E[0]+l+E[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,o,i){var a,c,u;if((u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?c=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(c=e.stylize("[Setter]","special")),C(r,o)||(a="["+o+"]"),c||(e.seen.indexOf(u.value)<0?(c=d(n)?f(e,u.value,null):f(e,u.value,n-1)).indexOf("\n")>-1&&(c=i?c.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+c.split("\n").map((function(e){return"   "+e})).join("\n")):c=e.stylize("[Circular]","special")),g(a)){if(i&&o.match(/^\d+$/))return c;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+c}function y(e){return Array.isArray(e)}function b(e){return"boolean"==typeof e}function d(e){return null===e}function v(e){return"number"==typeof e}function m(e){return"string"==typeof e}function g(e){return void 0===e}function O(e){return w(e)&&"[object RegExp]"===E(e)}function w(e){return"object"===r(e)&&null!==e}function j(e){return w(e)&&"[object Date]"===E(e)}function S(e){return w(e)&&("[object Error]"===E(e)||e instanceof Error)}function P(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function _(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(g(a)&&(a=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!c[n])if(new RegExp("\\b"+n+"\\b","i").test(a)){var r=e.pid;c[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else c[n]=function(){};return c[n]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=y,t.isBoolean=b,t.isNull=d,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=m,t.isSymbol=function(e){return"symbol"===r(e)},t.isUndefined=g,t.isRegExp=O,t.isObject=w,t.isDate=j,t.isError=S,t.isFunction=P,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===r(e)||void 0===e},t.isBuffer=n(798);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function x(){var e=new Date,t=[_(e.getHours()),_(e.getMinutes()),_(e.getSeconds())].join(":");return[e.getDate(),k[e.getMonth()],t].join(" ")}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",x(),t.format.apply(t,arguments))},t.inherits=n(799),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function q(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!=typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,o)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,o(e))},t.promisify.custom=T,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};t.apply(this,n).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(q,t,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,o(t)),n}}).call(this,n(674))},798:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return e&&"object"===n(e)&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},799:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},800:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=a(n(0)),i=a(n(700));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement(i.default,r({viewBox:"0 0 16 16"},e),o.default.createElement("path",{d:"M4 0H0v4h1V1h3V0zm11 0h-3v1h3v3h1V0h-1zM1 15v-3H0v4h4v-1H1zm14-3v3h-3v1h4v-4h-1zm-2-3l-.008-.003L11.5 10.5 9 8l2.5-2.5L12.971 7H13V3H9v.03l1.5 1.47L8 7 5.5 4.5 7 3.03V3H3v4l1.5-1.5L7 8l-2.5 2.5L3 9v4h4l-1.5-1.5L8 9l2.5 2.5L9 13h4V9z"}))}},801:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=a(n(0)),i=a(n(700));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement(i.default,r({viewBox:"0 0 16 16"},e),o.default.createElement("path",{d:"M.013 1.012V15h13.999V1.012H.013zm10.999 7.995H8.013v2.999h-2V9.007h-3V7.008h3V4.01h2v2.998h2.999v1.999z"}))}},802:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=a(n(0)),i=a(n(700));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement(i.default,r({viewBox:"0 0 16 16"},e),o.default.createElement("path",{d:"M.004 1v14h14V1h-14zM11 9H3V7h8v2z"}))}},803:function(e,t){e.exports='<h1 id="protvista-msa">protvista-msa</h1>\n<p>A custom element that visualises multiple sequences alignments. It is basically a wrapper of <a href="https://github.com/ebi-webcomponents/react-msa-viewer">react-msa-viewer</a> that plays along with other nightingale components.</p>\n<p>It currently uses the <code>clustal</code> color scheme, and only displays the alignment, none of the other components includede in <code>react-msa-viewer</code>. it uses the scroll only to move vertically.</p>\n<h2 id="usage">Usage</h2>\n<pre><code class="language-html">&lt;protvista-msa\n  id=&quot;msa-track&quot;\n  length=&quot;300&quot;\n  height=&quot;200&quot;\n  displaystart=&quot;10&quot;\n  displayend=&quot;30&quot;\n  use-ctrl-to-zoom\n  labelWidth=&quot;100&quot;\n  colorscheme=&quot;clustal&quot;\n  activeLabel=&quot;seq_1&quot;\n/&gt;</code></pre>\n<p>This readme is been use as a road map. A 🚧 emoji indicates that this feature is under construction.</p>\n<h2 id="features">Features</h2>\n<ul>\n<li>✅ Inherits from <code>protvista-zoomable</code> and supports updates from the <code>protvista-manager</code></li>\n<li>✅ Refreshes when the property <code>data</code> is updated</li>\n<li>✅ Renders the sequence names if there is space assigned in the attribute <code>labelwidth</code></li>\n<li>✅ Forces the zoom to stay at a level thet there is at least a pixel per base.</li>\n<li>🔲 Find an alternative to be able to zoom farther.</li>\n<li>✅ Changes in color schema</li>\n<li>🔲 Highlights a region</li>\n<li>🔲 Adding other components to the layout. eg. scale, conservancy plot, etc.</li>\n<li>✅ Calculates conservation of the alignment. This calculations runs as in a separate web worker.</li>\n<li>✅ Can use the conservation either as a colorscheme or as an overlay of the current colorscheme.</li>\n</ul>\n<h2 id="api-reference">API reference</h2>\n<h3 id="parameters">Parameters</h3>\n<h5 id="width"><code>width</code></h5>\n<p>The width assigned for the component, including anything reseved for the sequence names</p>\n<p>type: <code>number</code>\ndefaultValue: calculated based onavailable space.</p>\n<h5 id="height"><code>height</code></h5>\n<p>Height of the component</p>\n<p>type: <code>number</code></p>\n<h5 id="labelwidth"><code>labelwidth</code></h5>\n<p>The space assigned for the sequence labels. This will be taken from the total <code>width</code>. Which means that if the <code>width</code> is <code>1000</code> and <code>labelwidth</code> is <code>200</code>, the alignment will be using <code>800</code>.</p>\n<p>If a value of <code>0</code> is assigned, the rendering of labels will be avoided completely.</p>\n<p>type: <code>number</code>\ndefaultValue: 0</p>\n<h5 id="colorscheme"><code>colorscheme</code></h5>\n<p>The colour scheme to use when painting the alignment tiles.</p>\n<p>Note: The conservation color scheme has to calculate some values. The current approach is to do the calculation in a web worker, if the component requests using the <code>&#39;conservation&#39;</code> scheme before the calculation is completed, it paint all the background in white, and repaints it once the calculations are done.</p>\n<p>type: <code>enum(&#39;buried_index&#39;|&#39;clustal&#39;|&#39;clustal2&#39;|&#39;cinema&#39;|&#39;helix_propensity&#39;|&#39;hydro&#39;|&#39;lesk&#39;|&#39;mae&#39;|&#39;nucleotide&#39;|&#39;purine_pyrimidine&#39;|&#39;strand_propensity&#39;|&#39;taylor&#39;|&#39;turn_propensity&#39;|&#39;zappo&#39;|&#39;conservation&#39;)</code>\ndefaultValue: <code>&#39;clustal&#39;</code></p>\n<h5 id="text-font"><code>text-font</code></h5>\n<p>The font for the bases in the alignment. It should be in the format <code>&quot;[size]px [font]&quot;</code>. Where <code>[size]</code> is a number and <code>[font]</code> should be a valid font name.</p>\n<p>type: <code>string</code>\ndefault: <code>&#39;18px Arial&#39;</code></p>\n<h5 id="calculate-conservation"><code>calculate-conservation</code></h5>\n<p>A flag that enable the calculation of the conservation values per base in the alignment.</p>\n<p>The calculation is executed on a web worker to avoid any interrruption on the main thread.</p>\n<p>type: <code>boolean</code>\ndefaultValue: <code>false</code></p>\n<h4 id="activelabel"><code>activeLabel</code></h4>\n<p>The value of the active label/track to be selected in the visualisation.</p>\n<h5 id="other-inherit-from-protvista-zoomable">Other inherit from <code>protvista-zoomable</code></h5>\n<p>displaystart, displayend, length, highlight</p>\n<p>See more <a href="https://github.com/ebi-webcomponents/nightingale/tree/master/packages/protvista-zoomable">here</a></p>\n<h5 id="overlay-conservation"><code>overlay-conservation</code></h5>\n<p>It uses the calculated conservation to define opacity values for the background of the residues.\nThis way highly conservated areas will be full coloured, while mutations will have a white background.</p>\n<p>type: <code>boolean</code>\ndefaultValue: <code>false</code></p>\n<h5 id="sample-size-conservation"><code>sample-size-conservation</code></h5>\n<p>If present, the value given here indicates how many sequences will be considered when calculating the conservation.\nThis way alignments with many sequences won&#39;t require a full analysis of the conservation, but it will be estimated based on a sample.\nIf not present, the conservation analysis will be executed with the all the sequences in the alignment.</p>\n<p>type: <code>number</code>\ndefaultValue: <code>undefined</code></p>\n<h3 id="properties">Properties</h3>\n<h4 id="data"><code>data</code></h4>\n<p>The sequences to be displayed. The should be in the following shape:</p>\n<pre><code class="language-javascript">[\n  {\n    name: &quot;seq1&quot;,\n    sequence: &quot;MAMYDDEFDTKASDLTFSPWVEVE&quot;,\n  },\n  // ...\n];</code></pre>\n<h4 id="onactivetrackchange"><code>onActiveTrackChange</code></h4>\n<p>The value of <code>onActiveTrackChange</code> should be a callback function to fire for when the active label/track is changed. Usage:</p>\n<pre><code>// msaTrack is a reference to &lt;protvista-msa /&gt; element\nmsaTrack.current.onActiveTrackChange = (trackId) =&gt; {\n  console.log(&quot;active track changed:&quot;, trackId);\n};</code></pre><p>type: <code>array</code></p>\n<h3 id="methods">Methods</h3>\n<h4 id="getcolormap"><code>getColorMap()</code></h4>\n<p>Return an object that contains the name of the current colorscheme in usage, and a map, that is a dictionary indicating the colorMapping used. For example the default scheme <code>&#39;clustal&#39;</code> would return something like:</p>\n<pre><code class="language-javascript">{\n  name: &#39;clustal&#39;,\n  map: {\n    A: &quot;orange&quot;,\n    B: &quot;#fff&quot;,\n    C: &quot;green&quot;,\n    D: &quot;red&quot;,\n    E: &quot;red&quot;,\n    F: &quot;blue&quot;,\n    G: &quot;orange&quot;,\n    H: &quot;red&quot;,\n    I: &quot;green&quot;,\n    J: &quot;#fff&quot;,\n    K: &quot;red&quot;,\n    L: &quot;green&quot;,\n    M: &quot;green&quot;,\n    N: &quot;#fff&quot;,\n    O: &quot;#fff&quot;,\n    P: &quot;orange&quot;,\n    Q: &quot;#fff&quot;,\n    R: &quot;red&quot;,\n    S: &quot;orange&quot;,\n    T: &quot;orange&quot;,\n    U: &quot;#fff&quot;,\n    V: &quot;green&quot;,\n    W: &quot;blue&quot;,\n    X: &quot;#fff&quot;,\n    Y: &quot;blue&quot;,\n    Z: &quot;#fff&quot;,\n    Gap: &quot;#fff&quot;\n  }\n}</code></pre>\n<h3 id="events">Events</h3>\n<h4 id="conservationprogress"><code>conservationProgress</code></h4>\n<p>It notifies progress at calculating the conservation. The detail of the event is an event with the progress, and the current count of bases per position in the current sequence.\nWhen the progress is equal to 1, then the current values of the sum is divided by the number of sequences.</p>\n<pre><code class="language-javascript">// in the middle of the calculation\n{\n  progress: 0.5,\n  conservation: [\n    {M:5, A:3},\n    {E:4, S:4},\n  ]\n}\n\n//When the conservation calculation has been completed\n{\n  progress: 1,\n  conservation: [\n    {M:0.5, A:0.375, P:0.125},\n    {E:0.375, S:0.375, -:0.5},\n  ]\n}\n</code></pre>\n<h4 id="drawcompleted"><code>drawCompleted</code></h4>\n<p>Evrytime the component redraws the alignment this event is raised. There are multiple actions to redraw the alignment, for instance, changes in the props, or dragging the viewport.</p>\n<p>It doesn&#39;t have any data in the details.</p>\n'}}]);