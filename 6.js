(window.webpackJsonp=window.webpackJsonp||[]).push([[6,23],{154:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r);e.default=function(t){var e=t.children;return o.a.createElement("div",{class:"console"},o.a.createElement("pre",null,e),o.a.createElement("div",{class:"anchor"}))}},166:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(588),a=n(56),c=n.n(a),u=o.a.createContext(null);var s=function(t){t()},l={notify:function(){}};function f(){var t=s,e=null,n=null;return{clear:function(){e=null,n=null},notify:function(){t((function(){for(var t=e;t;)t.callback(),t=t.next}))},get:function(){for(var t=[],n=e;n;)t.push(n),n=n.next;return t},subscribe:function(t){var r=!0,o=n={callback:t,next:null,prev:n};return o.prev?o.prev.next=o:e=o,function(){r&&null!==e&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var p=function(){function t(t,e){this.store=t,this.parentSub=e,this.unsubscribe=null,this.listeners=l,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var e=t.prototype;return e.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},e.notifyNestedSubs=function(){this.listeners.notify()},e.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},e.isSubscribed=function(){return Boolean(this.unsubscribe)},e.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=f())},e.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=l)},t}();var h=function(t){var e=t.store,n=t.context,i=t.children,a=Object(r.useMemo)((function(){var t=new p(e);return t.onStateChange=t.notifyNestedSubs,{store:e,subscription:t}}),[e]),c=Object(r.useMemo)((function(){return e.getState()}),[e]);Object(r.useEffect)((function(){var t=a.subscription;return t.trySubscribe(),c!==e.getState()&&t.notifyNestedSubs(),function(){t.tryUnsubscribe(),t.onStateChange=null}}),[a,c]);var s=n||u;return o.a.createElement(s.Provider,{value:a},i)};function y(){return(y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function b(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}var d=n(149),v=n.n(d),m=n(115),g="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,O=[],w=[null,null];function j(t,e){var n=t[1];return[e.payload,n+1]}function S(t,e,n){g((function(){return t.apply(void 0,e)}),n)}function P(t,e,n,r,o,i,a){t.current=r,e.current=o,n.current=!1,i.current&&(i.current=null,a())}function E(t,e,n,r,o,i,a,c,u,s){if(t){var l=!1,f=null,p=function(){if(!l){var t,n,p=e.getState();try{t=r(p,o.current)}catch(t){n=t,f=t}n||(f=null),t===i.current?a.current||u():(i.current=t,c.current=t,a.current=!0,s({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=p,n.trySubscribe(),p();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var _=function(){return[null,0]};function k(t,e){void 0===e&&(e={});var n=e,i=n.getDisplayName,a=void 0===i?function(t){return"ConnectAdvanced("+t+")"}:i,c=n.methodName,s=void 0===c?"connectAdvanced":c,l=n.renderCountProp,f=void 0===l?void 0:l,h=n.shouldHandleStateChanges,d=void 0===h||h,g=n.storeKey,k=void 0===g?"store":g,x=(n.withRef,n.forwardRef),T=void 0!==x&&x,C=n.context,R=void 0===C?u:C,q=b(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),A=R;return function(e){var n=e.displayName||e.name||"Component",i=a(n),c=y({},q,{getDisplayName:a,methodName:s,renderCountProp:f,shouldHandleStateChanges:d,storeKey:k,displayName:i,wrappedComponentName:n,WrappedComponent:e}),u=q.pure;var l=u?r.useMemo:function(t){return t()};function h(n){var i=Object(r.useMemo)((function(){var t=n.forwardedRef,e=b(n,["forwardedRef"]);return[n.context,t,e]}),[n]),a=i[0],u=i[1],s=i[2],f=Object(r.useMemo)((function(){return a&&a.Consumer&&Object(m.isContextConsumer)(o.a.createElement(a.Consumer,null))?a:A}),[a,A]),h=Object(r.useContext)(f),v=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(h)&&Boolean(h.store);var g=v?n.store:h.store,k=Object(r.useMemo)((function(){return function(e){return t(e.dispatch,c)}(g)}),[g]),x=Object(r.useMemo)((function(){if(!d)return w;var t=new p(g,v?null:h.subscription),e=t.notifyNestedSubs.bind(t);return[t,e]}),[g,v,h]),T=x[0],C=x[1],R=Object(r.useMemo)((function(){return v?h:y({},h,{subscription:T})}),[v,h,T]),q=Object(r.useReducer)(j,O,_),D=q[0][0],M=q[1];if(D&&D.error)throw D.error;var F=Object(r.useRef)(),L=Object(r.useRef)(s),B=Object(r.useRef)(),H=Object(r.useRef)(!1),W=l((function(){return B.current&&s===L.current?B.current:k(g.getState(),s)}),[g,D,s]);S(P,[L,F,H,s,W,B,C]),S(E,[d,g,T,k,L,F,H,B,C,M],[g,T,k]);var I=Object(r.useMemo)((function(){return o.a.createElement(e,y({},W,{ref:u}))}),[u,e,W]);return Object(r.useMemo)((function(){return d?o.a.createElement(f.Provider,{value:R},I):I}),[f,I,R])}var g=u?o.a.memo(h):h;if(g.WrappedComponent=e,g.displayName=i,T){var x=o.a.forwardRef((function(t,e){return o.a.createElement(g,y({},t,{forwardedRef:e}))}));return x.displayName=i,x.WrappedComponent=e,v()(x,e)}return v()(g,e)}}function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function C(t,e){if(T(t,e))return!0;if("object"!==x(t)||null===t||"object"!==x(e)||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(e,n[o])||!T(t[n[o]],e[n[o]]))return!1;return!0}var R=n(796);function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var A=function(){return Math.random().toString(36).substring(7).split("").join(".")},D={INIT:"@@redux/INIT"+A(),REPLACE:"@@redux/REPLACE"+A(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+A()}};function M(t){if("object"!==q(t)||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function F(t,e,n){var r;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(F)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var o=t,i=e,a=[],c=a,u=!1;function s(){c===a&&(c=a.slice())}function l(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function f(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var e=!0;return s(),c.push(t),function(){if(e){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");e=!1,s();var n=c.indexOf(t);c.splice(n,1),a=null}}}function p(t){if(!M(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,i=o(i,t)}finally{u=!1}for(var e=a=c,n=0;n<e.length;n++){(0,e[n])()}return t}function h(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");o=t,p({type:D.REPLACE})}function y(){var t,e=f;return(t={subscribe:function(t){if("object"!==q(t)||null===t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(l())}return n(),{unsubscribe:e(n)}}})[R.a]=function(){return this},t}return p({type:D.INIT}),(r={dispatch:p,subscribe:f,getState:l,replaceReducer:h})[R.a]=y,r}function L(t,e){return function(){return e(t.apply(this,arguments))}}function B(t){return function(e,n){var r=t(e,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function H(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function W(t,e){return function(e,n){n.displayName;var r=function(t,e){return r.dependsOnOwnProps?r.mapToProps(t,e):r.mapToProps(t)};return r.dependsOnOwnProps=!0,r.mapToProps=function(e,n){r.mapToProps=t,r.dependsOnOwnProps=H(t);var o=r(e,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=H(o),o=r(e,n)),o},r}}function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var z=[function(t){return"function"==typeof t?W(t):void 0},function(t){return t?void 0:B((function(t){return{dispatch:t}}))},function(t){return t&&"object"===I(t)?B((function(e){return function(t,e){if("function"==typeof t)return L(t,e);if("object"!==q(t)||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":q(t))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in t){var o=t[r];"function"==typeof o&&(n[r]=L(o,e))}return n}(t,e)})):void 0}];var N=[function(t){return"function"==typeof t?W(t):void 0},function(t){return t?void 0:B((function(){return{}}))}];function V(t,e,n){return y({},n,{},t,{},e)}var Y=[function(t){return"function"==typeof t?function(t){return function(e,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(e,n,c){var u=t(e,n,c);return a?o&&i(u,r)||(r=u):(a=!0,r=u),r}}}(t):void 0},function(t){return t?void 0:function(){return V}}];function X(t,e,n,r){return function(o,i){return n(t(o,i),e(r,i),i)}}function U(t,e,n,r,o){var i,a,c,u,s,l=o.areStatesEqual,f=o.areOwnPropsEqual,p=o.areStatePropsEqual,h=!1;function y(o,h){var y,b,d=!f(h,a),v=!l(o,i);return i=o,a=h,d&&v?(c=t(i,a),e.dependsOnOwnProps&&(u=e(r,a)),s=n(c,u,a)):d?(t.dependsOnOwnProps&&(c=t(i,a)),e.dependsOnOwnProps&&(u=e(r,a)),s=n(c,u,a)):v?(y=t(i,a),b=!p(y,c),c=y,b&&(s=n(c,u,a)),s):s}return function(o,l){return h?y(o,l):(c=t(i=o,a=l),u=e(r,a),s=n(c,u,a),h=!0,s)}}function G(t,e){var n=e.initMapStateToProps,r=e.initMapDispatchToProps,o=e.initMergeProps,i=b(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(t,i),c=r(t,i),u=o(t,i);return(i.pure?U:X)(a,c,u,t,i)}function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z(t,e,n){for(var r=e.length-1;r>=0;r--){var o=e[r](t);if(o)return o}return function(e,r){throw new Error("Invalid value of type "+K(t)+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function Q(t,e){return t===e}function $(t){var e=void 0===t?{}:t,n=e.connectHOC,r=void 0===n?k:n,o=e.mapStateToPropsFactories,i=void 0===o?N:o,a=e.mapDispatchToPropsFactories,c=void 0===a?z:a,u=e.mergePropsFactories,s=void 0===u?Y:u,l=e.selectorFactory,f=void 0===l?G:l;return function(t,e,n,o){void 0===o&&(o={});var a=o,u=a.pure,l=void 0===u||u,p=a.areStatesEqual,h=void 0===p?Q:p,d=a.areOwnPropsEqual,v=void 0===d?C:d,m=a.areStatePropsEqual,g=void 0===m?C:m,O=a.areMergedPropsEqual,w=void 0===O?C:O,j=b(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),S=Z(t,i,"mapStateToProps"),P=Z(e,c,"mapDispatchToProps"),E=Z(n,s,"mergeProps");return r(f,y({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:S,initMapDispatchToProps:P,initMergeProps:E,pure:l,areStatesEqual:h,areOwnPropsEqual:v,areStatePropsEqual:g,areMergedPropsEqual:w},j))}}var J=$();var tt,et=n(113),nt=n.n(et);function rt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var i;return 0===n.length?i=r[0]:(i={},n.forEach((function(t,e){i[n[e]]=r[e]}))),{type:t,payload:i}};return o.toString=function(){return t.toString()},o.key=o.toString(),o}tt=et.unstable_batchedUpdates,s=tt;var ot=rt("PROPS_UPDATE"),it=rt("PROP_UPDATE","key","value"),at=rt("SEQUENCES_UPDATE"),ct=rt("CONSERVSTION_UPDATE"),ut={updateProp:it,updateProps:ot,updateSequences:at,updateConservation:ct};var st=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t},lt=n(599);var ft=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=Object(lt.a)(n))==n?n:0),void 0!==e&&(e=(e=Object(lt.a)(e))==e?e:0),st(Object(lt.a)(t),e,n)},pt=n(575),ht=n(644),yt=n(574),bt=n(617),dt=n(572),vt=n(566);var mt=function(t,e,n,r){if(!Object(dt.a)(t))return t;for(var o=-1,i=(e=Object(yt.a)(e,t)).length,a=i-1,c=t;null!=c&&++o<i;){var u=Object(vt.a)(e[o]),s=n;if(o!=a){var l=c[u];void 0===(s=r?r(l,u,c):void 0)&&(s=Object(dt.a)(l)?l:Object(bt.a)(e[o+1])?[]:{})}Object(ht.a)(c,u,s),c=c[u]}return t};var gt=function(t,e,n){for(var r=-1,o=e.length,i={};++r<o;){var a=e[r],c=Object(pt.a)(t,a);n(c,a)&&mt(i,Object(yt.a)(a,t),c)}return i},Ot=n(602);var wt=function(t,e){return gt(t,e,(function(e,n){return Object(Ot.a)(t,n)}))},jt=n(628);var St=function(t){return(null==t?0:t.length)?Object(jt.a)(t,1):[]},Pt=n(734),Et=n(711);var _t=function(t){return Object(Et.a)(Object(Pt.a)(t,void 0,St),t+"")},kt=_t((function(t,e){return null==t?{}:wt(t,e)})),xt=n(607),Tt=n(605),Ct=n(603),Rt=xt.a.isFinite,qt=Math.min;var At=function(t){var e=Math[t];return function(t,n){if(t=Object(lt.a)(t),(n=null==n?0:qt(Object(Tt.a)(n),292))&&Rt(t)){var r=(Object(Ct.a)(t)+"e").split("e"),o=e(r[0]+"e"+(+r[1]+n));return+((r=(Object(Ct.a)(o)+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}("floor"),Dt=n(798);function Mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(n),!0).forEach((function(e){Lt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Bt=rt("MAINSTORE_UPDATE"),Ht=rt("POSITION_MOVE"),Wt=rt("POSITION_UPDATE"),It=rt("POSITION_BY_RESIDUE_UPDATE"),zt=rt("HIGHLIGHT_REGION"),Nt=rt("REMOVE_HIGHLIGHT_REGION"),Vt={updateMainStore:Bt,updatePosition:Wt,movePosition:Ht,updatePositionByResidue:It,highlightRegion:zt,removeHighlightRegion:Nt};function Yt(t,e){var n=t.sequences.maxLength*t.props.tileWidth-t.props.width;e.xPos=ft(e.xPos,0,n);var r=t.sequences.raw.length*t.props.tileHeight-t.props.height;return e.yPos=ft(e.yPos,0,r),Ft(Ft({},t),{},{position:e})}var Xt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:{xPos:0,yPos:0}},e=arguments.length>1?arguments[1]:void 0,n=t.position;switch(e.type){case Ht.key:Dt(void 0!==e.payload.xMovement||void 0!==e.payload.yMovement,"must contain at least xMovement or yMovement");var r=Ft({},n);return r.xPos+=e.payload.xMovement||0,r.yPos+=e.payload.yMovement||0,Yt(t,r);case Wt.key:Dt(void 0!==e.payload.xPos||void 0!==e.payload.yPos,"must contain at least xPos or yPos");var o={xPos:e.payload.xPos||n.xPos,yPos:e.payload.yPos||n.yPos};return Yt(t,o);case It.key:Dt(void 0!==e.payload.aaPos,"must contain at least aaPos");var i={xPos:t.props.tileWidth*(e.payload.aaPos-1),yPos:n.yPos};return Yt(t,i);default:return t}};function Ut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:{xPos:0,yPos:0},highlight:null},e=arguments.length>1?arguments[1]:void 0,n=t,r=t.position,o=t.highlight;switch(e.type){case Bt.key:n=Ft(Ft({},kt(n,["props","sequenceStats","sequences"])),e.payload);break;case Wt.key:case Ht.key:case It.key:r=Xt(n,e).position;break;case zt.key:o=e.payload;break;case Nt.key:o=null;break;default:return n}var i={xPosOffset:-r.xPos%n.props.tileWidth,yPosOffset:-r.yPos%n.props.tileWidth,currentViewSequence:ft(At(r.yPos/n.props.tileHeight),0,n.sequences.length-1),currentViewSequencePosition:ft(At(r.xPos/n.props.tileWidth),0,n.sequences.maxLength),position:r};return Ft(Ft(Ft({},n),i),{},{highlight:o})}var Gt=n(606),Kt=n(568),Zt=n(709);var Qt=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var $t=function(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i};var Jt=function(t,e){return e.length<2?t:Object(pt.a)(t,$t(e,0,-1))};var te=function(t,e){return e=Object(yt.a)(e,t),null==(t=Jt(t,e))||delete t[Object(vt.a)(Qt(e))]},ee=n(618),ne=n(587),re=n(643),oe=n(570),ie=Function.prototype,ae=Object.prototype,ce=ie.toString,ue=ae.hasOwnProperty,se=ce.call(Object);var le=function(t){if(!Object(oe.a)(t)||"[object Object]"!=Object(ne.a)(t))return!1;var e=Object(re.a)(t);if(null===e)return!0;var n=ue.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ce.call(n)==se};var fe=function(t){return le(t)?void 0:t},pe=n(664),he=_t((function(t,e){var n={};if(null==t)return n;var r=!1;e=Object(Kt.a)(e,(function(e){return e=Object(yt.a)(e,t),r||(r=e.length>1),e})),Object(ee.a)(t,Object(pe.a)(t),n),r&&(n=Object(Zt.a)(n,7,fe));for(var o=e.length;o--;)te(n,e[o]);return n})),ye=n(600),be=n(614);var de=function(t){return"function"==typeof t?t:be.a};var ve=function(t,e){return t&&Object(ye.a)(t,de(e))},me=function(t){this.defaultColor="#ffffff",this.type="static",this.map=t,this.getColor=function(t){return void 0!==this.map[t]?this.map[t]:this.defaultColor}},ge=function(t,e){this.type="dyn",this.opt=e,void 0!==t.init?(t.init.call(this),this.getColor=t.run,this.reset=t.init,this.map=t.map):this.getColor=t},Oe={A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},we={A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},je={A:" #FF83FA",C:" #40E0D0",G:" #FF83FA",R:" #FF83FA",T:" #40E0D0",U:" #40E0D0",Y:" #40E0D0"},Se={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},Pe={A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"},Ee={init:function(){}},_e=[""," ","-","_","."];function ke(t){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Ee.run=function(t,e,n){if(!n||1!==n.progress||e>n.map.length||_e.includes(t))return"#ffffff";var r=n.map[e][t]||0;return r>.8?"#6464ff":r>.6?"#9da5ff":r>.4?"#cccccc":"#ffffff"},Ee.map={"> 0.8":"#6464ff","> 0.6":"#9da5ff","> 0.4":"#cccccc","> 0":"#ffffff"};var xe={aliphatic:{A:"#00639a",V:"#00639a",L:"#00639a",I:"#00639a",P:"#00639a"},aromatic:{F:"#00639a",W:"#00639a",Y:"#00639a",H:"#00639a"},buried:Oe,buried_index:Oe,charged:{D:"#00639a",E:"#00639a",K:"#00639a",R:"#00639a",H:"#00639a"},cinema:{A:"#BBBBBB",B:"grey",C:"yellow",D:"red",E:"red",F:"magenta",G:"brown",H:"#00FFFF",I:"#BBBBBB",J:"#fff",K:"#00FFFF",L:"#BBBBBB",M:"#BBBBBB",N:"green",O:"#fff",P:"brown",Q:"green",R:"#00FFFF",S:"green",T:"green",U:"#fff",V:"#BBBBBB",W:"magenta",X:"grey",Y:"magenta",Z:"grey",Gap:"grey"},clustal2:{A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff"},clustal:{A:"orange",B:"#fff",C:"green",D:"red",E:"red",F:"blue",G:"orange",H:"red",I:"green",J:"#fff",K:"red",L:"green",M:"green",N:"#fff",O:"#fff",P:"orange",Q:"#fff",R:"red",S:"orange",T:"orange",U:"#fff",V:"green",W:"blue",X:"#fff",Y:"blue",Z:"#fff",Gap:"#fff"},helix:we,helix_propensity:we,hydro:{A:"#ad0052",B:"#0c00f3",C:"#c2003d",D:"#0c00f3",E:"#0c00f3",F:"#cb0034",G:"#6a0095",H:"#1500ea",I:"#ff0000",J:"#fff",K:"#0000ff",L:"#ea0015",M:"#b0004f",N:"#0c00f3",O:"#fff",P:"#4600b9",Q:"#0c00f3",R:"#0000ff",S:"#5e00a1",T:"#61009e",U:"#fff",V:"#f60009",W:"#5b00a4",X:"#680097",Y:"#4f00b0",Z:"#0c00f3"},lesk:{A:" orange",B:" #fff",C:" green",D:" red",E:" red",F:" green",G:" orange",H:" magenta",I:" green",J:" #fff",K:" red",L:" green",M:" green",N:" magenta",O:" #fff",P:" green",Q:" magenta",R:" red",S:" orange",T:" orange",U:" #fff",V:" green",W:" green",X:" #fff",Y:" green",Z:" #fff",Gap:" #fff"},mae:{A:" #77dd88",B:" #fff",C:" #99ee66",D:" #55bb33",E:" #55bb33",F:" #9999ff",G:" #77dd88",H:" #5555ff",I:" #66bbff",J:" #fff",K:" #ffcc77",L:" #66bbff",M:" #66bbff",N:" #55bb33",O:" #fff",P:" #eeaaaa",Q:" #55bb33",R:" #ffcc77",S:" #ff4455",T:" #ff4455",U:" #fff",V:" #66bbff",W:" #9999ff",X:" #fff",Y:" #9999ff",Z:" #fff",Gap:" #fff"},negative:{D:"#00639a",E:"#00639a"},nucleotide:{A:" #64F73F",C:" #FFB340",G:" #EB413C",T:" #3C88EE",U:" #3C88EE"},polar:{R:"#00639a",N:"#00639a",D:"#00639a",Q:"#00639a",E:"#00639a",G:"#00639a",H:"#00639a",K:"#00639a",S:"#00639a",T:"#00639a",Y:"#00639a"},positive:{K:"#00639a",R:"#00639a",H:"#00639a"},purine:je,purine_pyrimidine:je,serine_threonine:{S:"#00639a",T:"#00639a"},strand:Se,strand_propensity:Se,taylor:{A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff"},turn:Pe,turn_propensity:Pe,zappo:{A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf",B:"#fff",X:"#fff",Z:"#fff"}},Te={conservation:Ee},Ce=function(t){this.maps=Re(xe),this.dyn=Re(Te),this.opt=t};function Re(t){if(null==t||"object"!==ke(t))return t;var e=t.constructor();for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Ce.getScheme=function(t){return xe[t]},Ce.prototype.getScheme=function(t){var e=this.maps[t];return void 0===e&&(e={},void 0!==this.dyn[t])?new ge(this.dyn[t],this.opt):new me(e)},Ce.prototype.addStaticScheme=function(t,e){this.maps[t]=e},Ce.prototype.addDynScheme=function(t,e){this.dyn[t]=e};var Ae=new Ce,De=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scheme=Ae.getScheme(e)}var e,n,r;return e=t,(n=[{key:"updateConservation",value:function(t){Ae.conservation=t}},{key:"getColor",value:function(t,e){return this.scheme.getColor(t,e,Ae.conservation)}}])&&qe(e.prototype,n),r&&qe(e,r),t}();function Me(t){return t&&"function"==typeof t.getColor}var Fe=c.a.shape({name:c.a.string,sequence:c.a.string}),Le=c.a.oneOfType([c.a.oneOf(["aliphatic","aromatic","charged","negative","polar","positive","serine_threonine","buried_index","clustal","clustal2","cinema","helix_propensity","hydro","lesk","mae","nucleotide","purine_pyrimidine","strand_propensity","taylor","turn_propensity","zappo","conservation"]),c.a.instanceOf(De),function(t,e,n){if(!Me(t[e]))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Validation failed.")}]),Be=c.a.shape({xPos:c.a.number,yPos:c.a.number}),He={width:c.a.number,height:c.a.number,tileWidth:c.a.number,tileHeight:c.a.number,colorScheme:Le,calculateConservation:c.a.bool,overlayConservation:c.a.bool,sampleSizeConservation:c.a.number},We={width:800,height:600,tileWidth:20,tileHeight:20,colorScheme:"clustal",calculateConservation:!1,overlayConservation:!1,sampleSizeConservation:void 0};var Ie=function(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n},ze=n(592),Ne=n(586);var Ve=function(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n},Ye=n(565);var Xe=function(t,e,n){var r=Object(Ye.a)(t)?Ie:Ve,o=arguments.length<3;return r(t,Object(Ne.a)(e,4),n,o,ze.a)},Ue=n(578);var Ge=function(t,e){return Object(Ue.a)(t,e)},Ke=n(590),Ze=n(611),Qe=n(612);var $e=function(t,e,n){(void 0!==n&&!Object(Qe.a)(t[e],n)||void 0===n&&!(e in t))&&Object(Ze.a)(t,e,n)},Je=n(604),tn=n(660),en=n(663),nn=n(641),rn=n(661),on=n(619),an=n(598),cn=n(616),un=n(684),sn=n(625);var ln=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},fn=n(633);var pn=function(t){return Object(ee.a)(t,Object(fn.a)(t))};var hn=function(t,e,n,r,o,i,a){var c=ln(t,n),u=ln(e,n),s=a.get(u);if(s)$e(t,n,s);else{var l=i?i(c,u,n+"",t,e,a):void 0,f=void 0===l;if(f){var p=Object(Ye.a)(u),h=!p&&Object(cn.a)(u),y=!p&&!h&&Object(sn.a)(u);l=u,p||h||y?Object(Ye.a)(c)?l=c:Object(an.a)(c)?l=Object(nn.a)(c):h?(f=!1,l=Object(tn.a)(u,!0)):y?(f=!1,l=Object(en.a)(u,!0)):l=[]:le(u)||Object(on.a)(u)?(l=c,Object(on.a)(c)?l=pn(c):Object(dt.a)(c)&&!Object(un.a)(c)||(l=Object(rn.a)(u))):f=!1}f&&(a.set(u,l),o(l,u,r,i,a),a.delete(u)),$e(t,n,l)}};var yn=function t(e,n,r,o,i){e!==n&&Object(Je.a)(n,(function(a,c){if(i||(i=new Ke.a),Object(dt.a)(a))hn(e,n,c,r,t,o,i);else{var u=o?o(ln(e,c),a,c+"",e,n,i):void 0;void 0===u&&(u=a),$e(e,c,u)}}),fn.a)},bn=n(593),dn=n(584);function vn(t){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var mn=function(t,e,n){if(!Object(dt.a)(n))return!1;var r=vn(e);return!!("number"==r?Object(dn.a)(n)&&Object(bt.a)(e,n.length):"string"==r&&e in n)&&Object(Qe.a)(n[e],t)};var gn=function(t){return Object(bn.a)((function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&mn(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),e=Object(e);++r<o;){var c=n[r];c&&t(e,c,r,i)}return e}))},On=gn((function(t,e,n){yn(t,e,n)}));var wn=function(t,e){var n={raw:e,length:e.length};return n.maxLength=Xe(e,(function(t,e){return Math.max(t,e.sequence.length)}),0),n};function jn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Sn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?jn(Object(n),!0).forEach((function(e){Pn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function En(t){Me(t.colorScheme)||(t.colorScheme=new De(t.colorScheme)),t.colorScheme.updateConservation(t.conservation)}var _n,kn,xn=function(t,e){var n=Object.keys(e);return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,i=t(r,o);if(r!==i)for(var a=0;a<n.length;a++){var c=n[a],u=e[c](i[c],o,i);if(void 0===u)throw new Error("A reducer can't return 'undefined'");i[c]=u}return i}}(function(t){var e=Object.keys(t);return function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,o={},i=!1,a=0;a<e.length;a++){var c=e[a],u=t[c](n[c],r);if(void 0===u)throw new Error("A reducer can't return 'undefined'");o[c]=u,i=i||u!==n[c]}return i?o:n}}({props:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case ut.updateProps.key:return t=Sn(Sn({},t),r),"colorScheme"in r&&En(t),t;case ut.updateProp.key:var o=r.key,i=r.value;return t=Sn(Sn({},t),{},Pn({},o,i)),"colorScheme"===o&&En(t),t;case ut.updateConservation.key:var a=r.progress,c=r.conservation;return t.conservation={progress:a,map:c},t.colorScheme.updateConservation(t.conservation),t;default:return void 0!==t.colorScheme&&En(t),t}},sequences:(_n=Pn({},ut.updateSequences,wn),kn=[],function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;return _n.hasOwnProperty(n)?_n[n](t,r):t})}),{sequenceStats:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentViewSequence:0,currentViewSequencePosition:0},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;switch(e.type){case ut.updateProp.key:case ut.updateProps.key:case ut.updateSequences.key:if(n.props&&n.props.tileHeight&&n.props.tileWidth&&n.sequences){var r={};return r.nrXTiles=Math.ceil(n.props.width/n.props.tileWidth)+1,r.nrYTiles=Math.ceil(n.props.height/n.props.tileHeight)+1,r.fullWidth=n.props.tileWidth*n.sequences.maxLength,r.fullHeight=n.props.tileHeight*n.sequences.length,r}}return t}});function Tn(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var Cn=function(t){c.a.checkPropTypes(He,t,"prop","MSAViewer");var e=On({},We,t),n=e.sequences,r=(e.position,Tn(e,["sequences","position"])),o=F(xn,!1);return o.dispatch(ot(r)),o.dispatch(at(n)),o};var Rn=function(t,e){void 0===t.nextFrame&&(t.nextFrame=window.requestAnimationFrame(function(){e(),this.nextFrame=void 0}.bind(t)))},qn=n(704),An=n.n(qn);function Dn(t){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mn(){return(Mn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Fn(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bn(t,e){return(Bn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=In(t);if(e){var o=In(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Wn(this,n)}}function Wn(t,e){return!e||"object"!==Dn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function In(t){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zn=null,Nn=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;(zn=new An.a).postMessage({sequences:e,sampleSize:n}),zn.onmessage=function(n){t.dispatch(ut.updateConservation(n.data)),r&&r.current&&r.current.el&&r.current.el.current&&r.current.el.current.dispatchEvent(new CustomEvent("conservationProgress",{bubbles:!0,detail:n.data})),1===n.data.progress&&(console.log("completed conservation analisys"),t.dispatch(ut.updateSequences(e)))}},Vn={sequences:"updateSequences"};Object.keys(He).forEach((function(t){!(t in Vn)&&He[t]&&(Vn[t]="updateProp")}));var Yn=Object.keys(Vn),Xn=function(t){return Xe(t,(function(t,e,n){return t[e.key]=e,t}),{})},Un=Xn(ut),Gn=Xn(Vt),Kn=function(t){var e=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bn(t,e)}(c,e);var n,r,i,a=Hn(c);function c(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),e=a.call(this,t);var n=kt(t,Yn)||{};return e.el=o.a.createRef(),e.msaStore=t.msaStore,void 0!==n.sequences?(e.msaStore=Cn(n),n.calculateConservation&&e.msaStore&&Nn(e.msaStore,n.sequences,n.sampleSizeConservation,e.el)):console.warn("Check your MSA properties",n),e}return n=c,(r=[{key:"componentDidMount",value:function(){void 0!==this.props.position&&this.updatePosition(this.props.position)}},{key:"componentDidUpdate",value:function(t){var e=this.props;for(var n in kt(e,Yn))if(!Ge(t[n],e[n]))if("position"===n)this.updatePosition(e[n]);else if(n in Vn){var r=void 0;switch("calculateConservation"===n&&(e[n]?Nn(this.msaStore,this.props.sequences,this.props.sampleSizeConservation,this.el):zn.terminate()),"sampleSizeConservation"===n&&(zn&&zn.terminate(),Nn(this.msaStore,this.props.sequences,this.props.sampleSizeConservation,this.el)),Vn[n]){case"updateProp":r=ut[Vn[n]](n,e[n]);break;default:r=ut[Vn[n]](e[n])}this.msaStore.dispatch(r)}else console.error(n," is unknown.")}},{key:"dispatch",value:function(t){if(t.type in Un)this.msaStore.dispatch(t);else{if(!(t.type in Gn))throw new Error("Invalid action",t);this.el.current.positionStore.dispatch(t)}}},{key:"getColorMap",value:function(){var t=this.props.colorScheme,e={};try{e=this.msaStore.getState().props.colorScheme.scheme.map}catch(t){}return{name:t,map:e}}},{key:"render",value:function(){var e=he(this.props,Yn),n=e.msaStore,r=Fn(e,["msaStore"]);return void 0===this.msaStore?o.a.createElement("div",null," Error initializing the MSAViewer. "):o.a.createElement(t,Mn({ref:this.el,msaStore:n||this.msaStore},r))}}])&&Ln(n.prototype,r),i&&Ln(n,i),c}(r.Component);return ve(ut,(function(t,n){e.prototype[n]=function(e){this.msaStore.dispatch(t(e))}})),ve(Vt,(function(t,n){e.prototype[n]=function(e){var n=this;Rn(this,(function(){n.el.current.positionStore.dispatch(t(e))}))}})),e},Zn="FORWARD_SAME_PROP_NAME";function Qn(t,e){var n={},r=t;return ve(e,(function(t,e){var o=function(t,e){var n={},r={};return ve(t,(function(t,o){if(o in e){var i=e[o];n[i===Zn?o:i]=t}else r[o]=t})),{forward:n,other:r}}(r,t);n[e]=o.forward,r=o.other})),{forward:n,other:r}}var $n=n(722),Jn=$n.a&&new $n.a,tr=Jn?function(t,e){return Jn.set(t,e),t}:be.a,er=n(642);var nr=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Object(er.a)(t.prototype),r=t.apply(n,e);return Object(dt.a)(r)?r:n}};var rr=function(t,e,n){var r=1&e,o=nr(t);return function e(){var i=this&&this!==xt.a&&this instanceof e?o:t;return i.apply(r?n:this,arguments)}},or=n(694),ir=Math.max;var ar=function(t,e,n,r){for(var o=-1,i=t.length,a=n.length,c=-1,u=e.length,s=ir(i-a,0),l=Array(u+s),f=!r;++c<u;)l[c]=e[c];for(;++o<a;)(f||o<i)&&(l[n[o]]=t[o]);for(;s--;)l[c++]=t[o++];return l},cr=Math.max;var ur=function(t,e,n,r){for(var o=-1,i=t.length,a=-1,c=n.length,u=-1,s=e.length,l=cr(i-c,0),f=Array(l+s),p=!r;++o<l;)f[o]=t[o];for(var h=o;++u<s;)f[h+u]=e[u];for(;++a<c;)(p||o<i)&&(f[h+n[a]]=t[o++]);return f};var sr=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r};var lr=function(){};function fr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}fr.prototype=Object(er.a)(lr.prototype),fr.prototype.constructor=fr;var pr=fr,hr=n(627),yr=Jn?function(t){return Jn.get(t)}:hr.a,br={},dr=Object.prototype.hasOwnProperty;var vr=function(t){for(var e=t.name+"",n=br[e],r=dr.call(br,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e};function mr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}mr.prototype=Object(er.a)(lr.prototype),mr.prototype.constructor=mr;var gr=mr;var Or=function(t){if(t instanceof pr)return t.clone();var e=new gr(t.__wrapped__,t.__chain__);return e.__actions__=Object(nn.a)(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e},wr=Object.prototype.hasOwnProperty;function jr(t){if(Object(oe.a)(t)&&!Object(Ye.a)(t)&&!(t instanceof pr)){if(t instanceof gr)return t;if(wr.call(t,"__wrapped__"))return Or(t)}return new gr(t)}jr.prototype=lr.prototype,jr.prototype.constructor=jr;var Sr=jr;var Pr=function(t){var e=vr(t),n=Sr[e];if("function"!=typeof n||!(e in pr.prototype))return!1;if(t===n)return!0;var r=yr(n);return!!r&&t===r[0]},Er=n(733),_r=Object(Er.a)(tr),kr=/\{\n\/\* \[wrapped with (.+)\] \*/,xr=/,? & /;var Tr=function(t){var e=t.match(kr);return e?e[1].split(xr):[]},Cr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var Rr=function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Cr,"{\n/* [wrapped with "+e+"] */\n")},qr=n(652),Ar=n(597),Dr=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var Mr=function(t,e){return Object(qr.a)(Dr,(function(n){var r="_."+n[0];e&n[1]&&!Object(Ar.a)(t,r)&&t.push(r)})),t.sort()};var Fr=function(t,e,n){var r=e+"";return Object(Et.a)(t,Rr(r,Mr(Tr(r),n)))};var Lr=function(t,e,n,r,o,i,a,c,u,s){var l=8&e;e|=l?32:64,4&(e&=~(l?64:32))||(e&=-4);var f=[t,e,o,l?i:void 0,l?a:void 0,l?void 0:i,l?void 0:a,c,u,s],p=n.apply(void 0,f);return Pr(t)&&_r(p,f),p.placeholder=r,Fr(p,t,e)};var Br=function(t){return t.placeholder},Hr=Math.min;var Wr=function(t,e){for(var n=t.length,r=Hr(e.length,n),o=Object(nn.a)(t);r--;){var i=e[r];t[r]=Object(bt.a)(i,n)?o[i]:void 0}return t};var Ir=function(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n];a!==e&&"__lodash_placeholder__"!==a||(t[n]="__lodash_placeholder__",i[o++]=n)}return i};var zr=function t(e,n,r,o,i,a,c,u,s,l){var f=128&n,p=1&n,h=2&n,y=24&n,b=512&n,d=h?void 0:nr(e);return function v(){for(var m=arguments.length,g=Array(m),O=m;O--;)g[O]=arguments[O];if(y)var w=Br(v),j=sr(g,w);if(o&&(g=ar(g,o,i,y)),a&&(g=ur(g,a,c,y)),m-=j,y&&m<l){var S=Ir(g,w);return Lr(e,n,t,v.placeholder,r,g,S,u,s,l-m)}var P=p?r:this,E=h?P[e]:e;return m=g.length,u?g=Wr(g,u):b&&m>1&&g.reverse(),f&&s<m&&(g.length=s),this&&this!==xt.a&&this instanceof v&&(E=d||nr(E)),E.apply(P,g)}};var Nr=function(t,e,n){var r=nr(t);return function o(){for(var i=arguments.length,a=Array(i),c=i,u=Br(o);c--;)a[c]=arguments[c];var s=i<3&&a[0]!==u&&a[i-1]!==u?[]:Ir(a,u);if((i-=s.length)<n)return Lr(t,e,zr,o.placeholder,void 0,a,s,void 0,void 0,n-i);var l=this&&this!==xt.a&&this instanceof o?r:t;return Object(or.a)(l,this,a)}};var Vr=function(t,e,n,r){var o=1&e,i=nr(t);return function e(){for(var a=-1,c=arguments.length,u=-1,s=r.length,l=Array(s+c),f=this&&this!==xt.a&&this instanceof e?i:t;++u<s;)l[u]=r[u];for(;c--;)l[u++]=arguments[++a];return Object(or.a)(f,o?n:this,l)}},Yr=Math.min;var Xr=function(t,e){var n=t[1],r=e[1],o=n|r,i=o<131,a=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!i&&!a)return t;1&r&&(t[2]=e[2],o|=1&n?0:4);var c=e[3];if(c){var u=t[3];t[3]=u?ar(u,c,e[4]):c,t[4]=u?Ir(t[3],"__lodash_placeholder__"):e[4]}return(c=e[5])&&(u=t[5],t[5]=u?ur(u,c,e[6]):c,t[6]=u?Ir(t[5],"__lodash_placeholder__"):e[6]),(c=e[7])&&(t[7]=c),128&r&&(t[8]=null==t[8]?e[8]:Yr(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t},Ur=Math.max;var Gr=function(t,e,n,r,o,i,a,c){var u=2&e;if(!u&&"function"!=typeof t)throw new TypeError("Expected a function");var s=r?r.length:0;if(s||(e&=-97,r=o=void 0),a=void 0===a?a:Ur(Object(Tt.a)(a),0),c=void 0===c?c:Object(Tt.a)(c),s-=o?o.length:0,64&e){var l=r,f=o;r=o=void 0}var p=u?void 0:yr(t),h=[t,e,n,r,o,l,f,i,a,c];if(p&&Xr(h,p),t=h[0],e=h[1],n=h[2],r=h[3],o=h[4],!(c=h[9]=void 0===h[9]?u?0:t.length:Ur(h[9]-s,0))&&24&e&&(e&=-25),e&&1!=e)y=8==e||16==e?Nr(t,e,c):32!=e&&33!=e||o.length?zr.apply(void 0,h):Vr(t,e,n,r);else var y=rr(t,e,n);return Fr((p?tr:_r)(y,h),t,e)},Kr=Object(bn.a)((function(t,e){var n=Ir(e,Br(Kr));return Gr(t,64,void 0,e,n)}));Kr.placeholder={};var Zr=Kr;var Qr=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return J(t,e,n,r)};function $r(t){return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jr(t,e){return t===e}function to(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t(e[o],n[o]))return!1;return!0}function eo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jr,n=null,r=null;return function(){return to(e,n,arguments)||(r=t.apply(null,arguments)),n=arguments,r}}function no(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every((function(t){return"function"==typeof t}))){var n=e.map((function(t){return $r(t)})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return e}function ro(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=0,a=r.pop(),c=no(r),u=t.apply(void 0,[function(){return i++,a.apply(null,arguments)}].concat(n)),s=t((function(){for(var t=[],e=c.length,n=0;n<e;n++)t.push(c[n].apply(null,arguments));return u.apply(null,t)}));return s.resultFunc=a,s.dependencies=c,s.recomputations=function(){return i},s.resetRecomputations=function(){return i=0},s}}var oo=ro(eo);function io(t){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ao(t,e,n,r){var o=n?n.call(r,t,e):void 0;if(void 0!==o)return!!o;if(t===e)return!0;if("object"!==io(t)||!t||"object"!==io(e)||!e)return!1;var i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(e),u=0;u<i.length;u++){var s=i[u];if(!c(s))return!1;var l=t[s],f=e[s];if(!1===(o=n?n.call(r,l,f,s):void 0)||void 0===o&&l!==f)return!1}return!0}var co=ro(eo,ao);function uo(t){Dt(arguments.length>1,"Must provide methods for binding");for(var e=1;e<arguments.length;e++){var n=arguments[e];t[n]=t[n].bind(t)}}function so(t){return(so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lo(Object(n),!0).forEach((function(e){jo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function po(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ho(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yo(t,e,n){return e&&ho(t.prototype,e),n&&ho(t,n),t}function bo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vo(t,e)}function vo(t,e){return(vo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wo(t);if(e){var o=wo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return go(this,n)}}function go(t,e){return!e||"object"!==so(e)&&"function"!=typeof e?Oo(t):e}function Oo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wo(t){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var So=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.withX,i=void 0!==n&&n,a=e.withY,u=void 0!==a&&a,s=function(e){bo(r,e);var n=mo(r);function r(t){var e;return po(this,r),jo(Oo(e=n.call(this,t)),"updateFromPositionStore",(function(){Dt(e.context&&e.context.positionMSAStore,"MSA PositionStore needs to be injected");var t=e.context.positionMSAStore.getState();e.position=e.position||{};var n=kt(t,["currentViewSequence","currentViewSequencePosition","xPosOffset","yPosOffset"]);t.position&&(n.xPos=t.position.xPos,n.yPos=t.position.yPos),e.setState({highlight:t.highlight,hasBeenInitialized:!0}),e.el.current&&e.shouldRerender(n)?(e.position=n,e.setState({position:e.position})):(ve(n,(function(t,n){e.position[n]=t})),e.el.current&&e.updateScrollPosition())})),jo(Oo(e),"shouldRerender",(function(t){var n=e.el.current;if(void 0!==n.shouldRerender)return n.shouldRerender(t);var r=n.props.cacheElements;return!!(u&&Math.abs(t.currentViewSequence-e.position.lastCurrentViewSequence)>=r)||!!(i&&Math.abs(t.currentViewSequencePosition-e.position.lastCurrentViewSequencePosition)>=r)})),jo(Oo(e),"updateScrollPosition",(function(){var t=e.el.current;if(t&&void 0!==t.updateScrollPosition)t.updateScrollPosition();else if(t&&t.el&&t.el.current){if(i){var n=t.props.tileWidth,r=-e.position.xPosOffset;r+=(e.position.lastCurrentViewSequencePosition-e.position.lastStartXTile)*n,e.position.currentViewSequencePosition!==e.position.lastCurrentViewSequencePosition&&(r+=(e.position.currentViewSequencePosition-e.position.lastCurrentViewSequencePosition)*n),t.el.current.scrollLeft=r}if(u){var o=t.props.tileHeight,a=-e.position.yPosOffset;a+=(e.position.lastCurrentViewSequence-e.position.lastStartYTile)*o,e.position.currentViewSequence!==e.position.lastCurrentViewSequence&&(a+=(e.position.currentViewSequence-e.position.lastCurrentViewSequence)*o),t.el.current.scrollTop=a}}})),jo(Oo(e),"dispatch",(function(t){e.context.positionMSAStore.dispatch(t)})),e.el=o.a.createRef(),e.state={highlight:null,hasBeenInitialized:!1},e}return yo(r,[{key:"componentDidMount",value:function(){this.unsubscribe=this.context.positionMSAStore.subscribe(this.updateFromPositionStore),this.updateScrollPosition(!0),this.updateFromPositionStore()}},{key:"componentDidUpdate",value:function(){this.updateScrollPosition()}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){return this.state.hasBeenInitialized?o.a.createElement(t,fo({ref:this.el,position:this.position,positionDispatch:this.dispatch,highlight:this.state.highlight},this.props)):null}}]),r}(r.PureComponent);return s.displayName="withPosition(".concat(t.displayName||t.name,")"),s.contextTypes={positionMSAStore:c.a.object},s};function Po(t){return(Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Eo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ko(t,e){return(ko=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Co(t);if(e){var o=Co(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return To(this,n)}}function To(t,e){return!e||"object"!==Po(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Co(t){return(Co=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ro=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ko(t,e)}(a,t);var e,n,r,i=xo(a);function a(){return Eo(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"renderTile",value:function(t){var e=this.props.tileComponent;if(t in this.props.componentCache)return this.props.componentCache[t];var n=o.a.createElement(e,{key:t,index:t});return this.props.componentCache[t]=n,n}},{key:"render",value:function(){for(var t=[],e=this.props.startTile;e<this.props.endTile;e++)t.push(this.renderTile(e));return 0===t.length&&console.warn("The TileComponent rendered returned 0 elements from ".concat(this.props.startTile," to ").concat(this.props.endTile)),o.a.createElement("div",null,t)}}])&&_o(e.prototype,n),r&&_o(e,r),a}(r.PureComponent);Ro.propTypes={startTile:c.a.number.isRequired,endTile:c.a.number.isRequired,componentCache:c.a.func.isRequired};var qo=Ro;function Ao(t){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Do(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Mo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fo(t,e){return(Fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ho(t);if(e){var o=Ho(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bo(this,n)}}function Bo(t,e){return!e||"object"!==Ao(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ho(t){return(Ho=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fo(t,e)}(a,t);var e,n,r,i=Lo(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).el=o.a.createRef(),e}return e=a,(n=[{key:"render",value:function(){var t=this.props,e=(t.yPosOffset,t.tileHeight,t.currentViewSequence,t.sequences,t.height),n=(t.cacheElements,t.tileComponent,t.nrYTiles,t.position,t.positionDispatch,t.componentCache,Do(t,["yPosOffset","tileHeight","currentViewSequence","sequences","height","cacheElements","tileComponent","nrYTiles","position","positionDispatch","componentCache"])),r={height:e,overflow:"hidden",position:"relative",whiteSpace:"nowrap"},i=Math.max(0,this.props.position.currentViewSequence-this.props.cacheElements),a=Math.min(this.props.sequences.length,i+Math.ceil(e/this.props.tileHeight)+2*this.props.cacheElements);return this.props.position.lastCurrentViewSequence=this.props.position.currentViewSequence,this.props.position.lastStartYTile=i,o.a.createElement("div",n,o.a.createElement("div",{style:r,ref:this.el},o.a.createElement(qo,{componentCache:this.props.componentCache,startTile:i,endTile:a,tileComponent:this.props.tileComponent})))}}])&&Mo(e.prototype,n),r&&Mo(e,r),a}(r.PureComponent);Wo.propTypes={tileComponent:c.a.oneOfType([c.a.func,c.a.object]).isRequired,cacheElements:c.a.number.isRequired,tileHeight:c.a.number.isRequired,nrYTiles:c.a.number.isRequired,componentCache:c.a.func.isRequired};var Io=So(Wo,{withY:!0});function zo(t){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function No(){return(No=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Vo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vo(Object(n),!0).forEach((function(e){Xo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uo(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Go(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ko(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zo(t,e,n){return e&&Ko(t.prototype,e),n&&Ko(t,n),t}function Qo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$o(t,e)}function $o(t,e){return($o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ni(t);if(e){var o=ni(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ti(this,n)}}function ti(t,e){return!e||"object"!==zo(e)&&"function"!=typeof e?ei(t):e}function ei(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ni(t){return(ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ri=function(t){Qo(n,t);var e=Jo(n);function n(t){var r;return Go(this,n),uo(ei(r=e.call(this,t)),"createLabel"),r.label=co(Zr(kt,r.constructor.labelProps),r.createLabel),r}return Zo(n,[{key:"createLabel",value:function(t){return this.cache=function(){},n=(e=t).sequences,i=e.tileHeight,a=e.labelComponent,c=e.labelStyle,u=e.labelAttributes,function(t){Qo(r,t);var e=Jo(r);function r(){return Go(this,r),e.apply(this,arguments)}return Zo(r,[{key:"render",value:function(){var t=this.props,e=t.index,r=Uo(t,["index"]);if(a){var s=a;return o.a.createElement(s,{sequence:n[e],index:e})}r.style=Yo(Yo({},this.props.style),{},{height:i},c);var l=Yo(Yo({},r),u);return o.a.createElement("div",l,n[e].name)}}]),r}(r.PureComponent);var e,n,i,a,c,u}},{key:"render",value:function(){var t=this.props,e=t.cacheElements,n=(t.dispatch,t.labelComponent,t.labelStyle,t.labelAttributes,Uo(t,["cacheElements","dispatch","labelComponent","labelStyle","labelAttributes"]));return o.a.createElement(Io,No({tileComponent:this.label(this.props),cacheElements:e,componentCache:this.cache},n))}}]),n}(r.PureComponent);Xo(ri,"labelProps",["sequences","tileHeight","labelComponent","labelStyle","labelAttributes"]),ri.defaultProps={cacheElements:10,labelStyle:{}},ri.propTypes={font:c.a.string,labelComponent:c.a.oneOfType([c.a.object,c.a.func]),style:c.a.object,labelStyle:c.a.object,labelAttributes:c.a.object};var oi=Qr((function(t){return{height:t.props.height,tileHeight:t.props.tileHeight,sequences:t.sequences.raw,nrYTiles:t.sequenceStats.nrYTiles}}))(ri);function ii(t){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ai(){return(ai=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function ci(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ui(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ci(Object(n),!0).forEach((function(e){si(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ci(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function si(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function li(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function fi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pi(t,e){return(pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=bi(t);if(e){var o=bi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yi(this,n)}}function yi(t,e){return!e||"object"!==ii(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bi(t){return(bi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var di=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pi(t,e)}(a,t);var e,n,r,i=hi(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).el=o.a.createRef(),e}return e=a,(n=[{key:"render",value:function(){var t=this.props,e=t.tileWidth,n=t.sequences,r=t.width,i=(t.cacheElements,t.tileComponent),a=(t.nrXTiles,t.maxLength,t.position,t.positionDispatch,t.componentCache,li(t,["tileWidth","sequences","width","cacheElements","tileComponent","nrXTiles","maxLength","position","positionDispatch","componentCache"])),c={width:r,overflow:"hidden",position:"relative",whiteSpace:"nowrap"},u=ui(ui({},this.props.style),{},{height:this.props.height}),s={tileWidth:e,sequences:n,tileComponent:i},l=Math.max(0,this.props.position.currentViewSequencePosition-this.props.cacheElements),f=Math.min(this.props.maxLength,l+this.props.nrXTiles+2*this.props.cacheElements),p=this.props.width+2*this.props.cacheElements*this.props.tileWidth;return this.props.position.lastStartXTile=l,this.props.position.lastCurrentViewSequencePosition=this.props.position.currentViewSequencePosition,o.a.createElement("div",ai({style:u},a),o.a.createElement("div",{style:c,ref:this.el},o.a.createElement(qo,ai({},s,{componentCache:this.props.componentCache,startTile:l,endTile:f,maxWidth:p}))))}}])&&fi(e.prototype,n),r&&fi(e,r),a}(r.PureComponent);di.propTypes={tileComponent:c.a.oneOfType([c.a.func,c.a.object]).isRequired,cacheElements:c.a.number.isRequired,tileWidth:c.a.number.isRequired,nrXTiles:c.a.number.isRequired,maxLength:c.a.number.isRequired,componentCache:c.a.func.isRequired};var vi=So(di,{withX:!0}),mi=gn((function(t,e){Object(ee.a)(e,Object(fn.a)(e),t)}));var gi=function(t,e){return(Object(Ye.a)(t)?qr.a:ze.a)(t,de(e))};var Oi=function(t,e){var n={};return e=Object(Ne.a)(e,3),Object(ye.a)(t,(function(t,r,o){Object(Ze.a)(n,r,e(t,r,o))})),n};var wi=function(t,e){var n=-1,r=Object(dn.a)(t)?Array(t.length):[];return Object(ze.a)(t,(function(t,o,i){r[++n]=e(t,o,i)})),r};var ji=function(t,e){return(Object(Ye.a)(t)?Kt.a:wi)(t,Object(Ne.a)(e,3))},Si=n(724);var Pi=function(t,e){var n=[];return Object(ze.a)(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n};var Ei=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}};var _i=function(t,e){return(Object(Ye.a)(t)?Si.a:Pi)(t,Ei(Object(Ne.a)(e,3)))},ki=n(567);var xi=function(t,e,n){for(var r=-1,o=t.length;++r<o;){var i=t[r],a=e(i);if(null!=a&&(void 0===c?a==a&&!Object(ki.a)(a):n(a,c)))var c=a,u=i}return u};var Ti=function(t,e){return t>e};var Ci=function(t){return t&&t.length?xi(t,be.a,Ti):void 0},Ri=function t(e,n){if(!this||this.constructor!==t)return new t(e);if(void 0===e||"string"==typeof e)throw new TypeError("you need to give the seq stat an array");this.resetSeqs(e),this.alphabetSize=4,this._useBackground=!1,this.useGaps=!1,this.ignoredChars=["-","*"],mi(this,n)};Ri.prototype.addSeq=function(t){this.seqs.push(t),this._reset()},Ri.prototype.removeSeq=function(t){"number"==typeof t?this.seqs.splice(t,1):gi(this.seqs,function(e,n){t===e&&this.seqs.splice(n,1)}.bind(this)),this._reset()},Ri.prototype.addSeqs=function(t){t.forEach(function(t){this.addSeq(t)}.bind(this))},Ri.prototype.resetSeqs=function(t){if(this.seqs=[],!t instanceof Array||"at"in t){this.mseqs=t;var e=function(){var t=this.mseqs.pluck("seq");this.resetSeqs(t)};t.on("add change reset ",e,this),e.call(this)}else this.addSeqs(t),this._reset()};var qi=["consensus","frequency","maxLength","ic","gaps"];Ri.prototype._reset=function(){for(var t=0;t<qi.length;t++)this["_"+qi[t]]=void 0;this._identity=void 0,this._background=void 0},Ri.prototype.setBackground=function(t){this._useBackground=t,this._reset()},Ri.prototype.useBackground=function(){this.setBackground(!0)},Ri.prototype.setDNA=function(){this.alphabetSize=4},Ri.prototype.setProtein=function(){this.alphabetSize=20},qi.forEach((function(t){Ri.prototype[t]=function(){return void 0===this["_"+t]&&(this["_"+t]=this[t+"Calc"]()),this["_"+t]}})),Ri.prototype.identity=function(t){var e;return(void 0===this._identity||t)&&(e=this.identityCalc(t),this._identity=void 0),this._identity||e},Ri.prototype.background=function(){return void 0!==this.bg?this.bg:(void 0===this._background&&this.backgroundCalc(),this._background)},Ri.prototype.frequencyCalc=function(t){var e,n;e=new Array(this.maxLength()),n=new Array(this.seqs.length);var r=this.ignoredChars;return void 0!==t&&t.all&&(r=[]),gi(this.seqs,(function(t){gi(t,(function(t,o){r.indexOf(t)>=0||(void 0===e[o]&&(e[o]={}),void 0===e[o][t]&&(e[o][t]=0),e[o][t]++,void 0===n[o]&&(n[o]=0),n[o]++)}))})),gi(e,(function(t,r){return gi(t,(function(t,o){return e[r][o]=t/n[r]}))})),this._frequency=e,e},Ri.prototype.backgroundCalc=function(){var t={},e=0;return gi(this.seqs,(function(n){gi(n,(function(n){return void 0===t[n]&&(t[n]=0),t[n]++,e++}))})),t=Oi(t,(function(t){return t/e})),this._background=t,t},Ri.prototype.icCalc=function(){var t=this.frequency();if(this._useBackground)var e=this.background();var n=this.ignoredChars,r=this._useBackground,o=ji(t,(function(t){return Xe(t,(function(t,o,i){return n.indexOf(i)>=0?t:(r&&(o/=e[i]),t-o*(Math.log(o)/Math.log(2)))}),0)}));return this._ic=o,o},Ri.prototype.conservation=function(t){var e=this.ic(),n=this.gaps(),r=this;t=t||this.alphabetSize;var o=Math.log(t)/Math.log(2),i=0;return ji(e,(function(t){var e=o-t;return r.useGaps&&(e*=1-n[i++]),e}))},Ri.prototype.conservResidue=function(t){var e,n=t?t.alphabetSize:void 0,r=this.ignoredChars;e=void 0!==t&&t.scaled?this.scale(this.conservation(n)):this.conservation(n);var o,i=this.frequency();return ji(i,(function(t,n){o=_i(o(t),(function(t){return r.indexOf(t)>=0}));var i={};return gi(o,(function(r){i[r]=t[r]*e[n]})),i}))},Ri.prototype.conservResidue2=function(t){var e=this.frequency(),n=this.conservation(t),r=this.background();return ji(e,(function(t,o){return ji(t,(function(t){var i=Xe(e[o],(function(t,e){return t+e/r[o]}),0);return t/r[o]/i*n[o]}),0)}))},Ri.prototype.scale=function(t,e){e=e||this.alphabetSize;var n=Math.log(e)/Math.log(2);return ji(t,(function(t){return t/n}))},Ri.prototype.maxLengthCalc=function(){return 0===this.seqs.length?0:Ci(this.seqs,(function(t){return t.length})).length},Ri.prototype.consensusCalc=function(){var t=new Array(this.maxLength());return gi(this.seqs,(function(e){gi(e,(function(e,n){void 0===t[n]&&(t[n]={}),void 0===t[n][e]&&(t[n][e]=0),t[n][e]++}))})),this._consensus=Xe(t,(function(t,e){var n;return n=Object.keys(e),t+Ci(n,(function(t){return e[t]}))}),""),this._consensus},Ri.prototype.identityCalc=function(t){var e=t||this.consensus();return this._identity=this.seqs.map((function(t){for(var n=0,r=0,o=0;o<t.length;o++)"-"!==t[o]&&"-"!==e[o]&&(r++,t[o]===e[o]&&n++);return n/r})),this._identity},Ri.prototype.gapsCalc=function(){var t=this.maxLength();if(t<=1||void 0===t)return[];var e=new Array(this.maxLength());return gi(this.seqs,(function(t){gi(t,(function(t,n){void 0===e[n]&&(e[n]={g:0,t:0}),t="-"===t?"g":"t",e[n][t]++}))})),this._gaps=ji(e,(function(t){return t.g/(t.g+t.t)})),this._gaps};var Ai=Ri;function Di(t){return(Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mi(){return(Mi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Fi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Li(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fi(Object(n),!0).forEach((function(e){Bi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Bi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hi(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Wi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ii(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zi(t,e,n){return e&&Ii(t.prototype,e),n&&Ii(t,n),t}function Ni(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vi(t,e)}function Vi(t,e){return(Vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gi(t);if(e){var o=Gi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xi(this,n)}}function Xi(t,e){return!e||"object"!==Di(e)&&"function"!=typeof e?Ui(t):e}function Ui(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gi(t){return(Gi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ki=function(t){Ni(n,t);var e=Yi(n);function n(t){var r;return Wi(this,n),(r=e.call(this,t)).cache=function(){},r.initializeColumnHeights(),uo(Ui(r),"createBar"),r.bar=co((function(t){return kt(t,r.constructor.barAttributes)}),r.columnHeights,r.createBar),r}return zi(n,[{key:"createBar",value:function(t,e){return this.cache=function(){},function(t){var e=t.columnHeights,n=t.tileWidth,i=t.height,a=t.fillColor;return t.barStyle,t.barAttributes,function(t){Ni(c,t);var r=Yi(c);function c(){return Wi(this,c),r.apply(this,arguments)}return zi(c,[{key:"render",value:function(){var t=this.props,r=t.index,c=Hi(t,["index"]);return c.style={height:Math.round(e[r]*i),width:n,display:"inline-block",textAlign:"center",backgroundColor:a},o.a.createElement("div",c)}}]),c}(r.PureComponent)}(Li(Li({},t),{},{columnHeights:e}))}},{key:"initializeColumnHeights",value:function(){this.columnHeights=oo((function(t){return t.sequences}),(function(t){return t.method}),(function(t,e){var n,r=Ai(t.map((function(t){return t.sequence})));switch(e){case"conservation":n=r.scale(r.conservation());break;case"information-content":n=r.scale(r.ic());break;default:console.error(e+"is an invalid aggregation method for <OverviewBar />")}return n})).bind(this)}},{key:"render",value:function(){var t=this.props,e=t.cacheElements,n=(t.height,t.method,t.fillColor,t.dispatch,t.barStyle,t.barAttributes,Hi(t,["cacheElements","height","method","fillColor","dispatch","barStyle","barAttributes"]));return o.a.createElement(vi,Mi({tileComponent:this.bar(this.props),cacheElements:e,componentCache:this.cache},n))}}]),n}(r.PureComponent);Bi(Ki,"barAttributes",["tileWidth","height","fillColor","barStyle","barAttributes"]),Ki.defaultProps={height:50,fillColor:"#999999",method:"conservation",cacheElements:10},Ki.propTypes={method:c.a.oneOf(["information-content","conservation"]),height:c.a.number,fillColor:c.a.string,style:c.a.object,barStyle:c.a.object,barAttributes:c.a.object};var Zi=Qr((function(t){return{sequences:t.sequences.raw,maxLength:t.sequences.maxLength,width:t.props.width,tileWidth:t.props.tileWidth,nrXTiles:t.sequenceStats.nrXTiles}}))(Ki);function Qi(t){return(Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $i(){return($i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Ji(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ta(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ji(Object(n),!0).forEach((function(e){ea(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ji(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ea(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function na(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function ra(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ia(t,e,n){return e&&oa(t.prototype,e),n&&oa(t,n),t}function aa(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ca(t,e)}function ca(t,e){return(ca=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ua(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fa(t);if(e){var o=fa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sa(this,n)}}function sa(t,e){return!e||"object"!==Qi(e)&&"function"!=typeof e?la(t):e}function la(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fa(t){return(fa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pa=function(t){aa(n,t);var e=ua(n);function n(t){var r;return ra(this,n),(r=e.call(this,t)).cache=function(){},uo(la(r),"createMarker"),r.marker=co(Zr(kt,r.constructor.markerAttributes),r.createMarker),r}return ia(n,[{key:"createMarker",value:function(t){return this.cache=function(){},n=(e=t).markerSteps,i=e.startIndex,a=e.tileWidth,e.font,c=e.markerComponent,u=e.markerStyle,s=e.markerAttributes,function(t){aa(r,t);var e=ua(r);function r(){return ra(this,r),e.apply(this,arguments)}return ia(r,[{key:"render",value:function(){var t,e=this.props,r=e.index,l=na(e,["index"]);if(c){var f=c;return o.a.createElement(f,{index:r})}l.style=ta({width:a,display:"inline-block",textAlign:"center"},u),t=r%n==0?r+0+i:".";var p=ta(ta({},l),s);return o.a.createElement("div",p,t)}}]),r}(r.PureComponent);var e,n,i,a,c,u,s}},{key:"render",value:function(){var t=this.props,e=t.cacheElements,n=(t.markerSteps,t.startIndex,t.dispatch,t.markerComponent,t.markerStyle,na(t,["cacheElements","markerSteps","startIndex","dispatch","markerComponent","markerStyle"]));return o.a.createElement(vi,$i({tileComponent:this.marker(this.props),cacheElements:e,componentCache:this.cache},n))}}]),n}(r.PureComponent);ea(pa,"markerAttributes",["markerSteps","startIndex","tileWidth","markerComponent","markerStyle","markerAttributes"]),pa.defaultProps={style:{font:"12px Arial"},height:15,markerSteps:2,startIndex:1,cacheElements:10,markerStyle:{}},pa.propTypes={font:c.a.string,height:c.a.number,markerSteps:c.a.number,startIndex:c.a.number,markerComponent:c.a.oneOfType([c.a.object,c.a.func]),style:c.a.object,markerStyle:c.a.object,markerAttributes:c.a.object};var ha=Qr((function(t){return{sequences:t.sequences.raw,maxLength:t.sequences.maxLength,width:t.props.width,tileWidth:t.props.tileWidth,nrXTiles:t.sequenceStats.nrXTiles}}))(pa);function ya(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ba=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};ya(ba,"rel",(function(t){if(void 0!==t.changedTouches)return ba.rel(t.changedTouches[0]);var e=t.offsetX,n=t.offsetY;if(void 0===e){var r=t.target||t.srcElement,o=r.getBoundingClientRect();if(e=t.clientX-o.left,n=t.clientY-o.top,void 0===e&&(e=t.pageX-r.offsetLeft,n=t.pageY-r.offsetTop,void 0===e))return void console.log(t,"No mouse event defined.")}return[e,n]})),ya(ba,"abs",(function(t){if(void 0!==t.changedTouches)return ba.abs(t.changedTouches[0]);var e=t.pageX,n=t.pageY;return void 0===e&&(e=t.layerX,n=t.layerY),void 0===e&&(e=t.clientX,n=t.clientY),void 0===e&&(e=t.x,n=t.y),[e,n]})),ya(ba,"wheelDelta",(function(t){var e=[t.deltaX,t.deltaY];return void 0===e[0]&&t.mozMovementX&&(e=[0,t.mozMovementX]),isNaN(e[0])&&(e[0]=0),isNaN(e[1])&&(e[1]=0),e}));var da=ba,va=n(802),ma=n.n(va),ga=n(803),Oa=n.n(ga),wa=n(804),ja=n.n(wa);function Sa(t){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ea(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ka(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xa(t,e){return(xa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ta(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ra(t);if(e){var o=Ra(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ca(this,n)}}function Ca(t,e){return!e||"object"!==Sa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ra(t){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qa(){return o.a.createElement("svg",{height:"1em",width:"1.542em",viewBox:"0 0 1542 1000"},o.a.createElement("path",{d:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)",fill:"rgb(68, 122, 219)"}))}var Aa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xa(t,e)}(a,t);var e,n,r,i=Ta(a);function a(){return _a(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pa(Object(n),!0).forEach((function(e){Ea(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({opacity:.9,backgroundColor:"white"},this.props.style),e={position:"relative",fontSize:"16px",padding:"3px 4px",cursor:"pointer",lineHeight:"normal",textDecoration:"none",color:"black"};return o.a.createElement("div",{style:t},o.a.createElement("div",{style:e},o.a.createElement(Oa.a,{width:20,height:20})),o.a.createElement("div",{style:e},o.a.createElement(ja.a,{width:20,height:20})),o.a.createElement("div",{style:e},o.a.createElement(ma.a,{width:20,height:20})),o.a.createElement("a",{href:"https://plot.ly/",target:"_blank",rel:"noreferrer noopener","data-title":"Produced with Plotly",style:e},o.a.createElement(qa,{width:20,height:20})))}}])&&ka(e.prototype,n),r&&ka(e,r),a}(r.PureComponent);function Da(t){return(Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ma(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fa(t,e){return(Fa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function La(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Wa(t);if(e){var o=Wa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ba(this,n)}}function Ba(t,e){return!e||"object"!==Da(e)&&"function"!=typeof e?Ha(t):e}function Ha(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wa(t){return(Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ia(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var za=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fa(t,e)}(a,t);var e,n,r,i=La(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Ia(Ha(e=i.call(this,t)),"onScroll",(function(t){Rn(Ha(e),(function(){var t=e.shouldShow(),n=t.showX,r=t.showY,o={xMovement:e.el.current.scrollLeft-(n?e.props.position.xPos:0),yMovement:e.el.current.scrollTop-(r?e.props.position.yPos:0)};e.props.positionDispatch(Ht(o))}))})),Ia(Ha(e),"updateScrollPosition",(function(){e.el&&e.el.current&&(e.el.current.scrollTop=e.props.position.yPos,e.el.current.scrollLeft=e.props.position.xPos)})),e.el=o.a.createRef(),e}return e=a,(n=[{key:"checkOverflow",value:function(t,e){var n=e.withX,r=void 0!==n&&n,o=e.withY,i=void 0!==o&&o,a=!1;switch(t){case"auto":r&&(a|=this.props.fullWidth>this.props.width),i&&(a|=this.props.fullHeight>this.props.height);break;case"hidden":a=!1;break;case"scroll":a=!0}return a}},{key:"shouldShow",value:function(){var t={withX:!0},e={withY:!0},n="initial"===this.props.overflowX?this.props.overflow:this.props.overflowX,r="initial"===this.props.overflowY?this.props.overflow:this.props.overflowY;return{showX:this.checkOverflow(n,t)&&this.checkOverflow(this.props.overflow,t),showY:this.checkOverflow(r,e)&&this.checkOverflow(this.props.overflow,e)}}},{key:"render",value:function(){var t=this.props,e=t.width,n=t.height,r=t.fullWidth,i=t.fullHeight,a={position:"absolute",overflowX:"auto",overflowY:"auto",width:e,height:n,transform:""},c=this.shouldShow(),u=c.showX,s=c.showY,l={height:1,width:1};return s||u?(u&&(l.width=r,a.overflowX="scroll","top"===this.props.positionX&&(a.transform+="rotateX(180deg)")),s&&(l.height=i,a.overflowY="scroll","left"===this.props.positionY&&(a.transform+="rotateY(180deg)")),o.a.createElement("div",{style:a,onScroll:this.onScroll,ref:this.el},o.a.createElement("div",{style:l}))):o.a.createElement("div",null)}}])&&Ma(e.prototype,n),r&&Ma(e,r),a}(r.PureComponent);za.defaultProps={overflow:"auto",overflowX:"initial",overflowY:"initial",positionX:"bottom",positionY:"right",scrollBarWidth:5},za.propTypes={overflow:c.a.oneOf(["hidden","auto","scroll"]),overflowX:c.a.oneOf(["hidden","auto","scroll","initial"]),overflowY:c.a.oneOf(["hidden","auto","scroll","initial"]),width:c.a.number.isRequired,height:c.a.number.isRequired,fullHeight:c.a.number.isRequired,fullWidth:c.a.number.isRequired,positionX:c.a.oneOf(["top","bottom"]),positionY:c.a.oneOf(["left","right"])};var Na=So(za,{withX:!0,withY:!0});function Va(t){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ya(){return(Ya=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Xa(t){return function(t){if(Array.isArray(t))return Ua(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Ua(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ua(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ua(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ga(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ka(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ga(Object(n),!0).forEach((function(e){nc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ga(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Za(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qa(t,e){return(Qa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ec(t);if(e){var o=ec(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ja(this,n)}}function Ja(t,e){return!e||"object"!==Va(e)&&"function"!=typeof e?tc(t):e}function tc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ec(t){return(ec=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qa(t,e)}(a,t);var e,n,r,i=$a(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),nc(tc(e=i.call(this,t)),"state",{mouse:{isMouseWithin:!1,cursorState:"grab"}}),nc(tc(e),"currentContext",1),e.canvasBuffers=[o.a.createRef(),o.a.createRef()],e.container=o.a.createRef(),uo(tc(e),"onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onMouseMove","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onClick","onDoubleClick","draw"),e.onViewpointChange(),e.mouseMovePosition=void 0,e.touchMovePosition=void 0,e.isInDragPhase=void 0,e.mouseHasMoved=void 0,e}return e=a,(n=[{key:"drawScene",value:function(){console.warn("drawScene is unimplemented.")}},{key:"onPositionUpdate",value:function(){console.warn("onPositionUpdate is unimplemented.")}},{key:"onViewpointChange",value:function(){}},{key:"componentDidMount",value:function(){this.ctxBuffers=[this.canvasBuffers[0].current.getContext("2d",{alpha:"false"}),this.canvasBuffers[1].current.getContext("2d",{alpha:"false"})],this.swapContexts(),this.container.current.addEventListener("mouseenter",this.onMouseEnter),this.container.current.addEventListener("mouseleave",this.onMouseLeave),this.container.current.addEventListener("touchstart",this.onTouchStart),this.container.current.addEventListener("touchmove",this.onTouchMove),this.container.current.addEventListener("touchend",this.onTouchEnd),this.container.current.addEventListener("touchcancel",this.onTouchCancel),this.container.current.addEventListener("click",this.onClick),this.container.current.addEventListener("dblclick",this.onDoubleClick),this.props.sequenceDisableDragging||(this.container.current.addEventListener("mousedown",this.onMouseDown),this.container.current.addEventListener("mouseup",this.onMouseUp),this.container.current.addEventListener("mousemove",this.onMouseMove))}},{key:"swapContexts",value:function(){var t=this.currentContext;this.canvasBuffers[t].current.style.visibility="visible";var e=(this.currentContext+1)%2;this.canvasBuffers[e].current.style.visibility="hidden",this.currentContext=e,this.ctx=this.ctxBuffers[e]}},{key:"draw",value:function(){this.ctx&&(this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.onViewpointChange(),this.drawScene(),this.swapContexts())}},{key:"onClick",value:function(t){}},{key:"onDoubleClick",value:function(t){}},{key:"onMouseDown",value:function(t){this.startDragPhase(t)}},{key:"onMouseMove",value:function(t){var e=this;if(void 0!==this.isInDragPhase){this.mouseHasMoved=!0;var n=da.abs(t),r=this.mouseMovePosition;Rn(this,(function(){e.mouseMovePosition=n,e.onPositionUpdate(r,e.mouseMovePosition)}))}}},{key:"onMouseUp",value:function(){this.stopDragPhase()}},{key:"onMouseEnter",value:function(){this.setState((function(t){return{mouse:Ka(Ka({},t.mouse),{},{isMouseWithin:!0})}}))}},{key:"onMouseLeave",value:function(){this.stopHoverPhase(),this.stopDragPhase()}},{key:"onTouchStart",value:function(t){console.log("touchstart",t),this.startDragPhase(t)}},{key:"onTouchMove",value:function(t){void 0!==this.isInDragPhase&&(console.log("touchmove",t),this.onMouseMove(t))}},{key:"onTouchEnd",value:function(){this.stopDragPhase()}},{key:"onTouchCancel",value:function(){this.stopDragPhase()}},{key:"startDragPhase",value:function(t){this.mouseMovePosition=da.abs(t),this.mouseHasMoved=void 0,this.isInDragPhase=!0,this.setState((function(t){return{mouse:Ka(Ka({},t.mouse),{},{cursorState:"grabbing"})}}))}},{key:"stopHoverPhase",value:function(){this.setState((function(t){return{mouse:Ka(Ka({},t.mouse),{},{isMouseWithin:!1})}}))}},{key:"stopDragPhase",value:function(){this.isInDragPhase=void 0,this.setState((function(t){return{mouse:Ka(Ka({},t.mouse),{},{cursorState:"grab"})}}))}},{key:"isEventWithinComponent",value:function(t){var e=da.rel(t);return 0<=e[0]&&e[0]<=this.props.width&&0<=e[1]&&e[1]<=this.props.height}},{key:"componentWillUnmount",value:function(){this.container.current.removeEventListener("mouseenter",this.onMouseEnter),this.container.current.removeEventListener("mouseleave",this.onMouseLeave),this.container.current.removeEventListener("click",this.onClick),this.container.current.removeEventListener("dblclick",this.onDoubleClick),this.container.current.removeEventListener("touchstart",this.onTouchStart),this.container.current.removeEventListener("touchend",this.onTouchEnd),this.container.current.removeEventListener("touchcancel",this.onTouchCancel),this.container.current.removeEventListener("touchmove",this.onTouchMove),this.props.sequenceDisableDragging||(this.container.current.removeEventListener("mouseup",this.onMouseUp),this.container.current.removeEventListener("mousedown",this.onMouseDown),this.container.current.removeEventListener("mousemove",this.onMouseMove)),this.stopDragPhase()}},{key:"render",value:function(){var t=Ka(Ka({width:this.props.width,height:this.props.height},this.props.style),{},{cursor:this.state.mouse.cursorState,position:"relative"}),e=this.props.showModBar&&this.state.mouse.isMouseWithin,n={position:"absolute",left:0,top:0},r=he(this.props,[].concat(Xa(this.constructor.propKeys),["tileWidth","tileHeight","colorScheme","nrXTiles","nrYTiles","dispatch","sequences","fullWidth","fullHeight","position","positionDispatch"]));return o.a.createElement("div",Ya({style:t,ref:this.container},r),e&&o.a.createElement(Aa,{style:{position:"absolute",right:0,opacity:.8}}," Plotly Modbar"),o.a.createElement("canvas",{style:n,ref:this.canvasBuffers[0],width:this.props.width,height:this.props.height},"Your browser does not seem to support HTML5 canvas."),o.a.createElement("canvas",{style:n,ref:this.canvasBuffers[1],width:this.props.width,height:this.props.height},"Your browser does not seem to support HTML5 canvas."),o.a.createElement(Na,{overflow:this.props.overflow,overflowX:this.props.overflowX,overflowY:this.props.overflowY,positionX:this.props.scrollBarPositionX,positionY:this.props.scrollBarPositionY,width:this.props.width,height:this.props.height,fullWidth:this.props.fullWidth,fullHeight:this.props.fullHeight}))}}])&&Za(e.prototype,n),r&&Za(e,r),a}(r.PureComponent);nc(rc,"defaultProps",{engine:"canvas",showModBar:!0});var oc=rc;function ic(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ac=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.state={}}var e,n,r;return e=t,(n=[{key:"updateEl",value:function(t){this.el=t}},{key:"font",value:function(t){this.state.font=t}},{key:"globalAlpha",value:function(t){this.state.globalAlpha=t}},{key:"startDrawingFrame",value:function(){this.clear()}},{key:"endDrawingFrame",value:function(){}},{key:"save",value:function(){}},{key:"restore",value:function(){}}])&&ic(e.prototype,n),r&&ic(e,r),t}();function cc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var uc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cache={},this.cacheHeight=0,this.cacheWidth=0}var e,n,r;return e=t,(n=[{key:"getFontTile",value:function(t,e,n,r){return e===this.cacheWidth&&n===this.cacheHeight&&r===this.font||(this.updateDimensions(e,n),this.font=r),void 0===this.cache[t]&&this.createTile(t,e,n),this.cache[t]}},{key:"createTile",value:function(t,e,n,r){var o=this.cache[t]=document.createElement("canvas");return o.width=e,o.height=n,this.ctx=o.getContext("2d"),this.ctx.font=this.font+"px mono",this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillText(t,e/2,n/2,e,r)}},{key:"updateDimensions",value:function(t,e){this.invalidate(),this.cacheWidth=t,this.cacheHeight=e}},{key:"invalidate",value:function(){this.cache={}}}])&&cc(e.prototype,n),r&&cc(e,r),t}();function sc(t){return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fc(t,e){return(fc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yc(t);if(e){var o=yc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hc(this,n)}}function hc(t,e){return!e||"object"!==sc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yc(t){return(yc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fc(t,e)}(i,t);var e,n,r,o=pc(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).ctx=t.getContext("2d"),e.cache=new uc,e}return e=i,(n=[{key:"clear",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"fillRect",value:function(t,e,n,r){this.ctx.fillRect(t,e,n,r)}},{key:"fillText",value:function(t,e,n,r,o){return this.ctx.drawImage(this.cache.getFontTile(t,r,o,this.ctx.font),e,n,r,o)}},{key:"font",value:function(t){this.ctx.font=t}},{key:"fillStyle",value:function(t){this.ctx.fillStyle=t}},{key:"globalAlpha",value:function(t){this.ctx.globalAlpha=t}},{key:"save",value:function(){this.ctx.save()}},{key:"restore",value:function(){this.ctx.restore()}}])&&lc(e.prototype,n),r&&lc(e,r),i}(ac);function dc(t){return(dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mc(t,e){return(mc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wc(t);if(e){var o=wc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oc(this,n)}}function Oc(t,e){return!e||"object"!==dc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wc(t){return(wc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jc,Sc,Pc,Ec=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mc(t,e)}(a,t);var e,n,r,i=gc(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).canvas=o.a.createRef(),e}return e=a,(n=[{key:"componentDidMount",value:function(){this.ctx=new bc(this.canvas.current),this.draw()}},{key:"componentDidUpdate",value:function(){this._draw()}},{key:"_draw",value:function(){this.ctx&&(this.ctx.startDrawingFrame(),this.ctx.save(),this.draw(),this.ctx.restore(),this.ctx.endDrawingFrame())}},{key:"draw",value:function(){console.error("Implement me.")}},{key:"render",value:function(){return o.a.createElement("div",{style:this.props.style},o.a.createElement("canvas",{ref:this.canvas,width:this.props.width,height:this.props.height}))}}])&&vc(e.prototype,n),r&&vc(e,r),a}(r.PureComponent);function _c(t){return(_c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tc(t,e){return(Tc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qc(t);if(e){var o=qc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rc(this,n)}}function Rc(t,e){return!e||"object"!==_c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qc(t){return(qc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Pc={engine:"canvas"},(Sc="defaultProps")in(jc=Ec)?Object.defineProperty(jc,Sc,{value:Pc,enumerable:!0,configurable:!0,writable:!0}):jc[Sc]=Pc,Ec.propTypes={width:c.a.number.isRequired,height:c.a.number.isRequired,style:c.a.object,engine:c.a.oneOf(["canvas","webgl"])};var Ac=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tc(t,e)}(i,t);var e,n,r,o=Cc(i);function i(){return kc(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"drawTile",value:function(t){var e=this,n=t.row,r=t.column,o=this.props.tileWidth,i=this.props.tileHeight,a=i*(n-this.props.startYTile),c=o*(r-this.props.startXTile);if(!(n>=this.props.sequences.raw.length)){var u=this.props.sequences.raw[n].sequence;if(!(r>=u.length)){var s=u[r];if(void 0!==s){var l=this.props.colorScheme.getColor(s,r),f=this.getOverlayFactor(s,r),p="".concat(s,"-").concat(l,"-").concat(f),h=this.props.residueTileCache.createTile({key:p,tileWidth:o,tileHeight:i,create:function(t){var o=t.canvas;return e.drawResidue({text:s,canvas:o,row:n,column:r,colorScheme:l,overlayFactor:f})}});this.props.ctx.drawImage(h,0,0,o,i,c,a,o,i)}}}}},{key:"getOverlayFactor",value:function(t,e){if(!this.props.overlayConservation||!this.props.conservation)return 1;var n=this.props.conservation.map[e][t]||0;return Math.floor(5*n)/5}},{key:"drawResidue",value:function(t){t.row,t.column;var e=t.canvas,n=t.colorScheme,r=t.text,o=t.overlayFactor,i=void 0===o?1:o;e.globalAlpha=.7*i,e.fillStyle=n,e.fillRect(0,0,this.props.tileWidth,this.props.tileHeight),this.props.tileWidth<4||(this.props.border&&(e.globalAlpha=1,e.lineWidth=this.props.borderWidth,e.strokeStyle=this.props.borderStyle,e.strokeRect(0,0,this.props.tileWidth,this.props.tileHeight)),e.globalAlpha=Math.min(1,1/6*this.props.tileWidth+-1/6*4),e.fillStyle=this.props.textColor,e.font=this.props.textFont,e.textBaseline="middle",e.textAlign="center",e.fillText(r,this.props.tileWidth/2,this.props.tileHeight/2+1,this.props.tileWidth))}},{key:"draw",value:function(t){this.props=t;for(var e=this.props.startYTile;e<this.props.endYTile;e++)for(var n=this.props.startXTile;n<this.props.endXTile;n++)this.drawTile({row:e,column:n})}}])&&xc(e.prototype,n),r&&xc(e,r),i}(Ec);var Dc=function(t,e){return t<e};var Mc=function(t,e){return t&&t.length?xi(t,Object(Ne.a)(e,2),Dc):void 0};function Fc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Bc=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.maxElements;Fc(this,t),this.maxElements=n||200,this.invalidate()}var e,n,r;return e=t,(n=[{key:"createTile",value:function(t){var e=this,n=t.key,r=t.tileWidth,o=t.tileHeight,i=t.create;if(n in this.cache)return this.cache[n].value;if(this.cachedElements>=this.maxElements){var a=Mc(Object.keys(this.cache),(function(t){return e.cache[t].insertionTime}));delete this.cache[a]}var c=document.createElement("canvas");this.cache[n]={value:c,insertionTime:Date.now()},c.width=r,c.height=o;var u=c.getContext("2d");return this.cachedElements++,i({canvas:u}),c}},{key:"updateTileSpecs",value:function(t){return!ao(t,this.spec)&&(this.invalidate(),this.spec=t,!0)}},{key:"invalidate",value:function(){this.cache={},this.spec={},this.cachedElements=0}}])&&Lc(e.prototype,n),r&&Lc(e,r),t}();function Hc(t,e){return t-t%e}function Wc(t){return(Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ic(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return zc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zc(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Vc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yc(t,e){return(Yc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Zc(t);if(e){var o=Zc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Uc(this,n)}}function Uc(t,e){return!e||"object"!==Wc(e)&&"function"!=typeof e?Gc(t):e}function Gc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kc(t,e,n){return(Kc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zc(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Zc(t){return(Zc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yc(t,e)}(i,t);var e,n,r,o=Xc(i);function i(t){var e,n,r,a,c,u,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Qc(Gc(s=o.call(this,t)),"renderTile",(function(t){var e=t.row,n=t.column,r=e+"-"+n;return s.tileCache.createTile({key:r,tileWidth:s.props.tileWidth*s.props.xGridSize,tileHeight:s.props.tileHeight*s.props.yGridSize,create:function(t){var r=t.canvas;s.tilingGridManager.draw(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nc(Object(n),!0).forEach((function(e){Qc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({ctx:r,startYTile:e,startXTile:n,residueTileCache:s.residueTileCache,endYTile:e+s.props.yGridSize,endXTile:n+s.props.xGridSize},kt(s.props,["sequences","colorScheme","textFont","textColor","tileHeight","tileWidth","border","borderWidth","borderColor","overlayConservation","conservation"])))}})})),Qc(Gc(s),"onPositionUpdate",(function(t,e){var n={xMovement:t[0]-e[0],yMovement:t[1]-e[1]};s.sendEvent("onPositionUpdate",e),s.props.positionDispatch(Ht(n))})),Qc(Gc(s),"updateScrollPosition",(function(){s.draw()})),Qc(Gc(s),"onMouseMove",(function(t){if(void 0===s.isInDragPhase&&s.hasOnMouseMoveProps()){var r=s.currentPointerPosition(t),o=s.currentMouseSequencePosition;if(!Ge(o,r)&&(void 0!==o&&s.sendEvent("onResidueMouseLeave",o),s.currentMouseSequencePosition=r,s.sendEvent("onResidueMouseEnter",r),s.props.features&&s.props.features.length>0)){var a=s.mouseOverFeatureIds||[],c=s.sequencePositionToFeatureIds(r);Ge(a,c)||(s.mouseOverFeatureIds=c,Kc((e=Gc(s),Zc(i.prototype)),"draw",e).call(e))}}Kc((n=Gc(s),Zc(i.prototype)),"onMouseMove",n).call(n,t)})),Qc(Gc(s),"onMouseLeave",(function(t){s.sendEvent("onResidueMouseLeave",s.currentMouseSequencePosition),s.currentMouseSequencePosition=void 0,s.mouseOverFeatureIds&&(s.mouseOverFeatureIds=void 0,Kc((r=Gc(s),Zc(i.prototype)),"draw",r).call(r)),Kc((a=Gc(s),Zc(i.prototype)),"onMouseLeave",a).call(a,t)})),Qc(Gc(s),"onClick",(function(t){if(!s.mouseHasMoved){var e=s.currentPointerPosition(t);s.sendEvent("onResidueClick",e),s.props.features&&s.sequencePositionToFeatureIds(e).forEach((function(t){s.sendEvent("onFeatureClick",t)}))}Kc((c=Gc(s),Zc(i.prototype)),"onClick",c).call(c,t)})),Qc(Gc(s),"onDoubleClick",(function(t){var e=s.currentPointerPosition(t);s.sendEvent("onResidueDoubleClick",e),Kc((u=Gc(s),Zc(i.prototype)),"onDoubleClick",u).call(u,t)})),s.tileCache=new Bc,s.residueTileCache=new Bc,s.tilingGridManager=new Ac,s}return e=i,(n=[{key:"hasOnMouseMoveProps",value:function(){return void 0!==this.props.onResidueMouseEnter||void 0!==this.props.onResidueMouseLeave||this.props.features&&this.props.features.length>0}},{key:"componentDidMount",value:function(){this.hasOnMouseMoveProps()&&this.container.current.addEventListener("mousemove",this.onMouseMove),Kc(Zc(i.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){this.hasOnMouseMoveProps()&&this.container.current.removeEventListener("mousemove",this.onMouseMove),Kc(Zc(i.prototype),"componentWillUnmount",this).call(this)}},{key:"drawScene",value:function(){var t=this.getTilePositions();this.updateTileSpecs(),this.drawTiles(t),this.drawHighlightedRegions(),this.ctx&&this.ctx.canvas.dispatchEvent(new CustomEvent("drawCompleted",{bubbles:!0}))}},{key:"getTilePositions",value:function(){var t=Math.max(0,this.props.position.currentViewSequencePosition-this.props.cacheElements),e=Math.max(0,this.props.position.currentViewSequence-this.props.cacheElements),n=Math.min(this.props.sequences.length,e+this.props.nrYTiles+2*this.props.cacheElements);return{startXTile:t,startYTile:e,endXTile:Math.min(this.props.sequences.maxLength,t+this.props.nrXTiles+2*this.props.cacheElements),endYTile:n}}},{key:"drawTiles",value:function(t){for(var e=t.startXTile,n=t.startYTile,r=t.endXTile,o=t.endYTile,i=this.props.xGridSize,a=this.props.yGridSize,c=Hc(n,a),u=Hc(e,i),s=c;s<o;s+=a)for(var l=u;l<r;l+=i){var f=this.renderTile({row:s,column:l,canvas:this.ctx}),p=i*this.props.tileWidth,h=a*this.props.tileHeight,y=(s-this.props.position.currentViewSequence)*this.props.tileHeight+this.props.position.yPosOffset,b=(l-this.props.position.currentViewSequencePosition)*this.props.tileWidth+this.props.position.xPosOffset;this.ctx.drawImage(f,0,0,p,h,b,y,p,h)}}},{key:"drawHighlightedRegions",value:function(){var t=this;this.props.highlight&&this.drawHighligtedRegion(this.props.highlight),this.props.features&&this.props.features.forEach((function(e){t.drawHighligtedRegion(e)}))}},{key:"drawHighligtedRegion",value:function(t){var e;if(this.ctx&&t){var n=this.props.tileWidth*(1+t.residues.to-t.residues.from),r=this.props.tileHeight*(1+t.sequences.to-t.sequences.from),o=(t.sequences.from-this.props.position.currentViewSequence)*this.props.tileHeight+this.props.position.yPosOffset,i=(t.residues.from-1-this.props.position.currentViewSequencePosition)*this.props.tileWidth+this.props.position.xPosOffset,a=document.createElement("canvas");a.width=n,a.height=r;var c=a.getContext("2d"),u=null===(e=this.mouseOverFeatureIds)||void 0===e?void 0:e.some((function(e){return e===t.id}));c.globalAlpha=.3,c.fillStyle=u?"green":t.fillColor||"yellow",c.fillRect(0,0,n,r),c.globalAlpha=1,c.strokeStyle=u?"black ":t.borderColor||"red",c.lineWidth="2",c.rect(0,0,n,r),c.stroke(),this.ctx.drawImage(a,0,0,n,r,i,o,n,r)}}},{key:"positionToSequence",value:function(t){var e=this.props.sequences.raw,n=ft(At((this.props.position.yPos+t.yPos)/this.props.tileHeight),0,e.length-1),r=e[n],o=ft(At((this.props.position.xPos+t.xPos)/this.props.tileWidth),0,r.sequence.length-1);return{i:n,sequence:r,position:o,residue:r.sequence[o]}}},{key:"sequencePositionToFeatureIds",value:function(t){if(this.props.features)return this.props.features.filter((function(e){return e.id&&t.position>=e.residues.from-1&&t.position<=e.residues.to-1&&t.i>=e.sequences.from&&t.i<=e.sequences.to})).map((function(t){return t.id}))}},{key:"currentPointerPosition",value:function(t){var e=Ic(da.rel(t),2),n=e[0],r=e[1];return this.positionToSequence({xPos:n,yPos:r})}},{key:"sendEvent",value:function(t,e){void 0!==this.props[t]&&this.props[t](e)}},{key:"componentWillUnmount",value:function(){this.tileCache.invalidate(),this.residueTileCache.invalidate()}},{key:"updateTileSpecs",value:function(){var t=["tileWidth","tileHeight","colorScheme","textFont","borderColor","overlayConservation","conservation"];this.tileCache.updateTileSpecs(kt(this.props,[].concat(t,["xGridSize","yGridSize","sequences"]))),this.residueTileCache.updateTileSpecs(kt(this.props,t))}},{key:"render",value:function(){return Kc(Zc(i.prototype),"render",this).call(this)}}])&&Vc(e.prototype,n),r&&Vc(e,r),i}(oc);$c.defaultProps={showModBar:!1,xGridSize:10,yGridSize:10,border:!1,borderColor:"black",borderWidth:1,cacheElements:20,textColor:"black",textFont:"18px Arial",overflow:"hidden",overflowX:"auto",overflowY:"auto",scrollBarPositionX:"bottom",scrollBarPositionY:"right",overlayConservation:!1,conservation:null},$c.propTypes={showModBar:c.a.bool,onResidueMouseEnter:c.a.func,onResidueMouseLeave:c.a.func,onResidueClick:c.a.func,onFeatureClick:c.a.func,highlight:c.a.object,features:c.a.arrayOf(c.a.object),onResidueDoubleClick:c.a.func,xGridSize:c.a.number.isRequired,yGridSize:c.a.number.isRequired,cacheElements:c.a.number.isRequired,border:c.a.bool,borderColor:c.a.string,borderWidth:c.a.number,textColor:c.a.string,textFont:c.a.string,overflow:c.a.oneOf(["hidden","auto","scroll"]),overflowX:c.a.oneOf(["hidden","auto","scroll","initial"]),overflowY:c.a.oneOf(["hidden","auto","scroll","initial"]),scrollBarPositionX:c.a.oneOf(["top","bottom"]),scrollBarPositionY:c.a.oneOf(["left","right"])},$c.propKeys=Object.keys($c.propTypes);var Jc=So($c,{withX:!0,withY:!0}),tu=Qr((function(t){var e=Math.min(t.props.width,t.sequences.maxLength*t.props.tileWidth),n=Math.min(t.props.height,t.sequences.length*t.props.tileHeight);return{sequences:t.sequences,width:e,height:n,tileWidth:t.props.tileWidth,tileHeight:t.props.tileHeight,colorScheme:t.props.colorScheme,overlayConservation:t.props.overlayConservation,conservation:t.props.overlayConservation?t.props.conservation:null,nrXTiles:t.sequenceStats.nrXTiles,nrYTiles:t.sequenceStats.nrYTiles,fullWidth:t.sequenceStats.fullWidth,fullHeight:t.sequenceStats.fullHeight}}))(Jc),eu=n(601);var nu=function(t,e){var n;return Object(ze.a)(t,(function(t,r,o){return!(n=e(t,r,o))})),!!n};var ru=function(t,e,n){var r=Object(Ye.a)(t)?eu.a:nu;return n&&mn(t,e,n)&&(e=void 0),r(t,Object(Ne.a)(e,3))};function ou(t){return(ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function au(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cu(t,e){return(cu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lu(t);if(e){var o=lu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return su(this,n)}}function su(t,e){return!e||"object"!==ou(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lu(t){return(lu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cu(t,e)}(i,t);var e,n,r,o=uu(i);function i(){return iu(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"shouldComponentUpdate",value:function(t){var e=this;return!(ao(this.props,t)&&ru(this.props.forwardedPropsKeys.map((function(n){return ao(e.props[n],t[n])}))))}}])&&au(e.prototype,n),r&&au(e,r),i}(r.Component);fu.propTypes={forwardPropKeys:c.a.array};var pu=fu;function hu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bu(t){return(bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function du(){return(du=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function vu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gu(t,e){return(gu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ou(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ju(t);if(e){var o=ju(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wu(this,n)}}function wu(t,e){return!e||"object"!==bu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ju(t){return(ju=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Su=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gu(t,e)}(a,t);var e,n,r,i=Ou(a);function a(){return vu(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){var t={paddingTop:this.props.tileHeight+50};return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(oi,du({style:t},this.props.labelsProps)),o.a.createElement("div",null,o.a.createElement(Zi,du({height:50},this.props.overviewBarProps)),o.a.createElement(ha,this.props.positionBarProps),o.a.createElement(tu,this.props.sequenceViewerProps),o.a.createElement("div",{style:{height:10}})))}}])&&mu(e.prototype,n),r&&mu(e,r),a}(pu);Su.propTypes=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hu(Object(n),!0).forEach((function(e){yu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},pu.propTypes);var Pu=Qr((function(t){return{tileHeight:t.props.tileHeight}}))(Su);function Eu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ku(t){return(ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xu(){return(xu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Tu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ru(t,e){return(Ru=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Du(t);if(e){var o=Du(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Au(this,n)}}function Au(t,e){return!e||"object"!==ku(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Du(t){return(Du=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Mu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ru(t,e)}(a,t);var e,n,r,i=qu(a);function a(){return Tu(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){var t={paddingTop:this.props.tileHeight+50};return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",null,o.a.createElement(Zi,xu({height:50},this.props.overviewBarProps)),o.a.createElement(ha,this.props.positionBarProps),o.a.createElement(tu,this.props.sequenceViewerProps)),o.a.createElement(oi,xu({style:t},this.props.labelsProps)))}}])&&Cu(e.prototype,n),r&&Cu(e,r),a}(pu);Mu.propTypes=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Eu(Object(n),!0).forEach((function(e){_u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Eu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},pu.propTypes);var Fu=Qr((function(t){return{tileHeight:t.props.tileHeight}}))(Mu);function Lu(t){return(Lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bu(){return(Bu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Hu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Iu(t,e){return(Iu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Vu(t);if(e){var o=Vu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nu(this,n)}}function Nu(t,e){return!e||"object"!==Lu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vu(t){return(Vu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Iu(t,e)}(a,t);var e,n,r,i=zu(a);function a(){return Hu(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(oi,this.props.labelsProps),o.a.createElement("div",null,o.a.createElement(tu,null),o.a.createElement(ha,this.props.positionBarProps),o.a.createElement("br",null),o.a.createElement(Zi,this.props.overviewBarProps),o.a.createElement("br",null),o.a.createElement(ha,this.props.positionBarProps),o.a.createElement(Zi,null),o.a.createElement(Zi,Bu({},this.props.overviewBarProps,{method:"information-content"}))))}}])&&Wu(e.prototype,n),r&&Wu(e,r),a}(pu);function Xu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Uu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gu(t){return(Gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ku(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qu(t,e){return(Qu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ts(t);if(e){var o=ts(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ju(this,n)}}function Ju(t,e){return!e||"object"!==Gu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ts(t){return(ts=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var es=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qu(t,e)}(a,t);var e,n,r,i=$u(a);function a(){return Ku(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(ha,this.props.positionBarProps),o.a.createElement(tu,this.props.sequenceViewerProps))}}])&&Zu(e.prototype,n),r&&Zu(e,r),a}(pu);es.propTypes=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xu(Object(n),!0).forEach((function(e){Uu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},pu.propTypes);var ns=es;function rs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function os(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function is(t){return(is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function as(){return(as=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function cs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function us(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ss(t,e){return(ss=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ls(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ps(t);if(e){var o=ps(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fs(this,n)}}function fs(t,e){return!e||"object"!==is(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ps(t){return(ps=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ss(t,e)}(a,t);var e,n,r,i=ls(a);function a(){return cs(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){var t={paddingTop:this.props.tileHeight};return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(oi,{style:t}),o.a.createElement("div",null,o.a.createElement(ha,this.props.positionBarProps),o.a.createElement(tu,this.props.sequenceViewerProps),o.a.createElement(ha,this.props.positionBarProps),o.a.createElement(Zi,this.props.overviewBarProps),o.a.createElement("br",null),o.a.createElement(ha,this.props.positionBarProps)),o.a.createElement(oi,as({style:t},this.props.labelsProps)))}}])&&us(e.prototype,n),r&&us(e,r),a}(pu);hs.propTypes=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rs(Object(n),!0).forEach((function(e){os(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},pu.propTypes);var ys=Qr((function(t){return{tileHeight:t.props.tileHeight}}))(hs);function bs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ds(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vs(t){return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ms(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Os(t,e){return(Os=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ws(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ss(t);if(e){var o=Ss(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return js(this,n)}}function js(t,e){return!e||"object"!==vs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ss(t){return(Ss=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ps=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Os(t,e)}(a,t);var e,n,r,i=ws(a);function a(){return ms(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){return o.a.createElement("div",{style:{display:"flex"}},this.props.labelsProps&&this.props.labelsProps.labelStyle&&o.a.createElement(oi,this.props.labelsProps),o.a.createElement(tu,this.props.sequenceViewerProps))}}])&&gs(e.prototype,n),r&&gs(e,r),a}(pu);function Es(t){return(Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _s(){return(_s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function ks(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function xs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ts(t,e){return(Ts=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qs(t);if(e){var o=qs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rs(this,n)}}function Rs(t,e){return!e||"object"!==Es(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qs(t){return(qs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Ps.propTypes=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bs(Object(n),!0).forEach((function(e){ds(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},pu.propTypes);var As={basic:Pu,inverse:Fu,full:Yu,compact:ns,funky:ys,nightingale:Ps,default:Pu},Ds=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ts(t,e)}(a,t);var e,n,r,i=Cs(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).el=o.a.createRef(),e.forwardedPropsKeys=Object.keys(e.constructor.propsToForward),e}return e=a,(n=[{key:"dispatchEvent",value:function(t){this.el.current.dispatchEvent(t)}},{key:"render",value:function(){var t=this.props,e=t.layout,n=ks(t,["layout"]);if(e in As){var r=As[e],i=Qn(n,this.constructor.propsToForward),a=i.forward,c=i.other;return o.a.createElement("div",_s({el:this.ref},c),o.a.createElement(r,_s({},a,{forwardedPropsKeys:this.forwardedPropsKeys})))}console.error("$this.props.layout} is invalid. Please use one of ".concat(Object.keys(As)))}}])&&xs(e.prototype,n),r&&xs(e,r),a}(r.PureComponent);!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Ds,"propsToForward",{sequenceViewerProps:{showModBar:Zn,onResidueMouseEnter:Zn,onResidueMouseLeave:Zn,onResidueClick:Zn,onResidueDoubleClick:Zn,highlight:Zn,features:Zn,onFeatureClick:Zn,onHighlightMouseEnter:Zn,onHighlightMouseLeave:Zn,sequenceBorder:"border",sequenceBorderColor:"borderColor",sequenceBorderWidth:"borderWidth",sequenceTextColor:"textColor",sequenceTextFont:"textFont",sequenceOverflow:"overflow",sequenceOverflowX:"overflowX",sequenceOverflowy:"overflowY",sequenceScrollBarPositionX:"scrollBarPositionX",sequenceScrollBarPositionY:"scrollBarPositionY",sequenceDisableDragging:Zn},labelsProps:{labelComponent:Zn,labelStyle:Zn,labelAttributes:Zn},positionBarProps:{markerSteps:Zn,markerStartIndex:"startIndex",markerComponent:Zn,markerStyle:Zn,markerAttributes:Zn},overviewBarProps:{barMethod:"method",barFillColor:"fillColor",barComponent:Zn,barStyle:Zn,barAttributes:Zn}}),Ds.defaultProps={layout:"default"},Ds.propTyes={layout:c.a.oneOf(Object.keys(As))};var Ms=Ds;function Fs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ls(t){return(Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bs(){return(Bs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Hs(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Ws(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Is(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ws(Object(n),!0).forEach((function(e){zs(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ws(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ns(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vs(t,e){return(Vs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ys(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gs(t);if(e){var o=Gs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xs(this,n)}}function Xs(t,e){return!e||"object"!==Ls(e)&&"function"!=typeof e?Us(t):e}function Us(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gs(t){return(Gs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ks={onResidueClick:"residueClick"},Zs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vs(t,e)}(a,t);var e,n,r,i=Ys(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).el=o.a.createRef(),e._setupStores(),e.createDomHandler=Object(Gt.a)(e.createDomHandler.bind(Us(e))),e.forwardProps=co((function(t){return he(t,["msaStore"])}),e.forwardProps.bind(Us(e))),e}return e=a,(n=[{key:"_setupStores",value:function(){var t=this;this.positionStore=F(Ut),this.positionStore.dispatch(Vt.updateMainStore(this.props.msaStore.getState())),this.msaStoreUnsubscribe=this.props.msaStore.subscribe((function(){t.positionStore.dispatch(Vt.updateMainStore(t.props.msaStore.getState()))}))}},{key:"componentWillUnmount",value:function(){this.msaStoreUnsubscribe()}},{key:"getChildContext",value:function(){return{positionMSAStore:this.positionStore}}},{key:"createDomHandler",value:function(t){var e=this;return function(n){var r=new CustomEvent(t,{detail:n,bubbles:!0});e.el.current.dispatchEvent(r)}}},{key:"forwardProps",value:function(t){var e=this,n=Is({},t);return ve(Ks,(function(t,r){r in Ks&&!(r in n)&&(n[r]=e.createDomHandler(t))})),n}},{key:"render",value:function(){var t=this.props,e=t.children,n=t.msaStore,r=Hs(t,["children","msaStore"]);return e?o.a.createElement(h,{store:n},o.a.createElement("div",Bs({},r,{ref:this.el}),e)):o.a.createElement(h,{store:n},o.a.createElement("div",{ref:this.el},o.a.createElement(Ms,this.forwardProps(r))))}}])&&Ns(e.prototype,n),r&&Ns(e,r),a}(r.Component);Zs.childContextTypes={positionMSAStore:c.a.object},Zs.propTypes={sequences:c.a.arrayOf(Fe).isRequired,width:c.a.number,height:c.a.number,tileWidth:c.a.number,tileHeight:c.a.number,position:Be,colorScheme:Le,onResidueMouseEnter:c.a.func,onResidueMouseLeave:c.a.func,onResidueClick:c.a.func,onResidueDoubleClick:c.a.func,onFeatureClick:c.a.func,highlight:c.a.object,features:c.a.arrayOf(c.a.object),layout:c.a.oneOf(["basic","default","inverse","full","compact","funky","nightingale"]),sequenceBorder:c.a.bool,sequenceBorderColor:c.a.string,sequenceBorderWidth:c.a.number,sequenceTextColor:c.a.string,sequenceTextFont:c.a.string,sequenceOverflow:c.a.oneOf(["hidden","auto","scroll"]),sequenceOverflowX:c.a.oneOf(["hidden","auto","scroll","initial"]),sequenceOverflowY:c.a.oneOf(["hidden","auto","scroll","initial"]),sequenceScrollBarPositionX:c.a.oneOf(["top","bottom"]),sequenceScrollBarPositionY:c.a.oneOf(["left","right"]),labelComponent:c.a.oneOfType([c.a.object,c.a.func]),labelStyle:c.a.object,labelAttributes:c.a.object,markerSteps:c.a.number,markerStartIndex:c.a.number,markerComponent:c.a.oneOfType([c.a.object,c.a.func]),markerStyle:c.a.object,markerAttributes:c.a.object,barMethod:c.a.oneOf(["information-content","conservation"]),barFillColor:c.a.string,barStyle:c.a.object,barAttributes:c.a.object,msaStore:c.a.object};var Qs,$s=Kn(Zs);$s.defaultProps=We,$s.propTypes=Is({},Zs.propTypes),Zs.propTypes=he(Zs.propTypes,[].concat(function(t){if(Array.isArray(t))return Fs(t)}(Qs=Object.keys(He))||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(Qs)||function(t,e){if(t){if("string"==typeof t)return Fs(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fs(t,e):void 0}}(Qs)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),["sequences","position"]));var Js=$s;function tl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function el(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tl(Object(n),!0).forEach((function(e){nl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}el(el({},ut),Vt);var rl=Js,ol=n(569);function il(t){return(il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function al(){return(al=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function cl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ul(t,e,n){return(ul="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hl(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function sl(t,e){return(sl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ll(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hl(t);if(e){var o=hl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fl(this,n)}}function fl(t,e){return!e||"object"!==il(e)&&"function"!=typeof e?pl(t):e}function pl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hl(t){return(hl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yl(Object(n),!0).forEach((function(e){dl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function dl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var vl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sl(t,e)}(u,t);var e,n,a,c=ll(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this)).setActiveTrack=t.setActiveTrack.bind(pl(t)),t}return e=u,a=[{key:"properties",get:function(){return{onActiveTrackChange:{type:Function}}}},{key:"observedAttributes",get:function(){return i.a.observedAttributes.concat(["labelwidth","activeLabel","colorscheme","calculate-conservation","overlay-conservation","sample-size-conservation","text-font"])}}],(n=[{key:"connectedCallback",value:function(){ul(hl(u.prototype),"connectedCallback",this).call(this),this.hasAttribute("activeLabel")&&(this.activeLabel=this.getAttribute("activeLabel"))}},{key:"setActiveTrack",value:function(t){this.setAttribute("activeLabel",t),this.onActiveTrackChange&&this.onActiveTrackChange(t),this.refresh()}},{key:"getColorMap",value:function(){var t;return(null==this||null===(t=this.el)||void 0===t?void 0:t.getColorMap())||{}}},{key:"refresh",value:function(){var t=this;!this.activeLabel&&this._data&&this._data[0]&&this.setActiveTrack(this._data[0].name);var e={sequences:this._data,height:this._height,width:this.width-(this._labelwidth||0),tileHeight:20,tileWidth:Math.max(1,this.getSingleBaseWidth()),colorScheme:this._colorscheme||"clustal",layout:"nightingale",sequenceOverflow:"scroll",sequenceOverflowX:"overflow",sequenceDisableDragging:!0,labelComponent:function(e){return function(t,e,n){var i={height:20,fontWeight:"normal",fontSize:"14px",cursor:"pointer",display:"block",padding:"0 0.5rem",borderLeft:"0.2rem solid transparent",boxSizing:"content-box",color:"#00639A",textTransform:"uppercase"},a=bl(bl({},i),{},{fontWeight:"bold",borderLeft:"0.2rem solid #00639A"}),c=Object(r.useRef)(null);return Object(r.useEffect)((function(){c.current.addEventListener("click",(function(){return n(t.name)}))}),[c]),o.a.createElement("span",{style:t.name===e?a:i,ref:c},t.name)}(e.sequence,t.activeLabel,t.setActiveTrack)}};this.hasAttribute("calculate-conservation")&&(e.calculateConservation=!0),this.hasAttribute("overlay-conservation")&&(e.overlayConservation=!0),this["_sample-size-conservation"]>0&&(e.sampleSizeConservation=this["_sample-size-conservation"]),this["_text-font"]>0&&(e.sequenceTextFont=this.getAttribute("text-font")),this._labelwidth&&(e.labelStyle={width:this._labelwidth-5,"text-align":"end","padding-right":5,overflow:"hidden"}),nt.a.render(o.a.createElement(rl,al({},e,{ref:function(e){return t.el=e}})),this),window.requestAnimationFrame((function(){t.el&&(t.el.updatePositionByResidue({aaPos:t._displaystart}),1>t.getSingleBaseWidth()&&t.dispatchEvent(new CustomEvent("change",{detail:{displaystart:t._displaystart,displayend:t._displaystart+t.xScale.range()[1]},bubbles:!0,cancelable:!0})))}))}},{key:"activeLabel",get:function(){return this.getAttribute("activeLabel")},set:function(t){this.setAttribute("activeLabel",t)}},{key:"data",set:function(t){var e=this;this._data=t,this.refresh(),window.requestAnimationFrame((function(){e.svg=Object(ol.l)(e).select("div")}))}},{key:"margin",get:function(){return{top:10,right:0,bottom:10,left:this._labelwidth||10}}}])&&cl(e.prototype,n),a&&cl(e,a),u}(i.a),ml=n(630),gl=n(631),Ol=n(111),wl=n(49),jl=n(805),Sl=n.n(jl),Pl=n(154);function El(){return(El=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function _l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return kl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kl(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var xl=["buried_index","clustal","clustal2","cinema","helix_propensity","hydro","lesk","mae","nucleotide","purine_pyrimidine","strand_propensity","taylor","turn_propensity","zappo","conservation"],Tl=null;e.default=function(){var t=_l(Object(r.useState)("clustal"),2),e=t[0],n=t[1],i=_l(Object(r.useState)(!1),2),a=i[0],c=i[1],u=_l(Object(r.useState)(null),2),s=u[0],l=u[1],f=Object(r.useRef)(null),p=_l(Object(r.useState)(""),2),h=p[0],y=p[1],b=function(t){return y("".concat(h,"\n").concat(t))},d="MAMYDDEFDTKASDLTFSPWVEVENWKDVTTRLRAIKFALQADRDKIPGVLSDLKTNCPYSAFKRFPDKSLYSVLSKEAVIAVAQIQSASGFKRRADEKNAVSGLVSVTPTQISQSASSSAATPVGLATVKPPRESDSAFQEDTFSYAKFDDASTAFHKALAYLEGLSLRPTYRRKFEKDMNVKWGGSGSAPSGAPAGGSSGSAPPTSGSSGSGAAPTPPPNP";Object(r.useEffect)((function(){for(var t=[],e=0;e<400;e++){var n=Math.round(Math.random()*(d.length-1));t.push({name:"seq_".concat(e),sequence:"".concat(d.substring(0,n)).concat("ACDEFGHIKLMNPQRSTVWY-"[Math.floor(Math.random()*"ACDEFGHIKLMNPQRSTVWY-".length)]).concat(d.substring(n+1))})}f.current.data=t,f.current.addEventListener("conservationProgress",(function(t){return b("[conservationProgress]: ".concat(100*t.detail.progress,"%"))})),f.current.addEventListener("drawCompleted",(function(){var t=f.current.getColorMap(),e=t.name,n=t.map;e!==Tl&&(e&&n&&b("[colors-".concat(e,"]:\n").concat(Object.entries(n).map((function(t){var e=_l(t,2),n=e[0],r=e[1];return"\t".concat(n,": ").concat(r)})).join("\n"))),Tl=e)})),f.current.onActiveTrackChange=function(t){console.log("on active track change:",t)}}),[]),Object(Ol.a)("protvista-msa",vl),Object(Ol.a)("protvista-navigation",ml.a),Object(Ol.a)("protvista-manager",gl.a);var v=function(t){n(t.target.value),b("[setColorScheme]: ".concat(t.target.value))},m={"calculate-conservation":!0};return a&&(m["overlay-conservation"]=!0),s>0&&(m["sample-size-conservation"]=s),o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"protvista-msa"),o.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.a.createElement("label",null,"colorScheme:",o.a.createElement("select",{value:e,onChange:v,onBlur:v},xl.map((function(t){return o.a.createElement("option",{key:t},t)})))),o.a.createElement("label",null,"overlayConservation:",o.a.createElement("input",{type:"checkbox",value:a,onChange:function(){return c(!a)}})),o.a.createElement("label",null,"sampleSizeConservation:",o.a.createElement("input",{type:"number",value:s,onChange:function(t){return l(t.target.value)}}))),o.a.createElement("protvista-manager",{attributes:"length displaystart displayend highlight",displaystart:"1",displayend:"50",id:"example"},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{width:100,flexShrink:0}}),o.a.createElement("protvista-navigation",{length:d.length,displaystart:"1",displayend:"50"})),o.a.createElement("protvista-msa",El({id:"msa-track",ref:f,length:d.length,height:"200",displaystart:"1",displayend:"50","use-ctrl-to-zoom":!0,labelWidth:100,colorscheme:e,"text-font":"16px sans-serif"},m))),o.a.createElement(Pl.default,null,h),o.a.createElement(wl.default,{content:Sl.a}))}},566:function(t,e,n){"use strict";var r=n(567);e.a=function(t){if("string"==typeof t||Object(r.a)(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},567:function(t,e,n){"use strict";var r=n(587),o=n(570);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(t){return"symbol"==i(t)||Object(o.a)(t)&&"[object Symbol]"==Object(r.a)(t)}},571:function(t,e,n){"use strict";var r=n(565),o=n(567);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;e.a=function(t,e){if(Object(r.a)(t))return!1;var n=i(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Object(o.a)(t))||(c.test(t)||!a.test(t)||null!=e&&t in Object(e))}},574:function(t,e,n){"use strict";var r=n(565),o=n(571),i=n(606);var a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,u=function(t){var e=Object(i.a)(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(a,(function(t,n,r,o){e.push(r?o.replace(c,"$1"):n||t)})),e})),s=n(603);e.a=function(t,e){return Object(r.a)(t)?t:Object(o.a)(t,e)?[t]:u(Object(s.a)(t))}},575:function(t,e,n){"use strict";var r=n(574),o=n(566);e.a=function(t,e){for(var n=0,i=(e=Object(r.a)(e,t)).length;null!=t&&n<i;)t=t[Object(o.a)(e[n++])];return n&&n==i?t:void 0}},578:function(t,e,n){"use strict";var r=n(590),o=n(579),i=n(601),a=n(577);var c=function(t,e,n,r,c,u){var s=1&n,l=t.length,f=e.length;if(l!=f&&!(s&&f>l))return!1;var p=u.get(t);if(p&&u.get(e))return p==e;var h=-1,y=!0,b=2&n?new o.a:void 0;for(u.set(t,e),u.set(e,t);++h<l;){var d=t[h],v=e[h];if(r)var m=s?r(v,d,h,e,t,u):r(d,v,h,t,e,u);if(void 0!==m){if(m)continue;y=!1;break}if(b){if(!Object(i.a)(e,(function(t,e){if(!Object(a.a)(b,e)&&(d===t||c(d,t,n,r,u)))return b.push(e)}))){y=!1;break}}else if(d!==v&&!c(d,v,n,r,u)){y=!1;break}}return u.delete(t),u.delete(e),y},u=n(583),s=n(621),l=n(612);var f=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},p=n(576),h=u.a?u.a.prototype:void 0,y=h?h.valueOf:void 0;var b=function(t,e,n,r,o,i,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new s.a(t),new s.a(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(l.a)(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=f;case"[object Set]":var h=1&r;if(u||(u=p.a),t.size!=e.size&&!h)return!1;var b=a.get(t);if(b)return b==e;r|=2,a.set(t,e);var d=c(u(t),u(e),r,o,i,a);return a.delete(t),d;case"[object Symbol]":if(y)return y.call(t)==y.call(e)}return!1},d=n(622),v=Object.prototype.hasOwnProperty;var m=function(t,e,n,r,o,i){var a=1&n,c=Object(d.a)(t),u=c.length;if(u!=Object(d.a)(e).length&&!a)return!1;for(var s=u;s--;){var l=c[s];if(!(a?l in e:v.call(e,l)))return!1}var f=i.get(t);if(f&&i.get(e))return f==e;var p=!0;i.set(t,e),i.set(e,t);for(var h=a;++s<u;){var y=t[l=c[s]],b=e[l];if(r)var m=a?r(b,y,l,e,t,i):r(y,b,l,t,e,i);if(!(void 0===m?y===b||o(y,b,n,r,i):m)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var g=t.constructor,O=e.constructor;g==O||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof O&&O instanceof O||(p=!1)}return i.delete(t),i.delete(e),p},g=n(610),O=n(565),w=n(616),j=n(625),S="[object Object]",P=Object.prototype.hasOwnProperty;var E=function(t,e,n,o,i,a){var u=Object(O.a)(t),s=Object(O.a)(e),l=u?"[object Array]":Object(g.a)(t),f=s?"[object Array]":Object(g.a)(e),p=(l="[object Arguments]"==l?S:l)==S,h=(f="[object Arguments]"==f?S:f)==S,y=l==f;if(y&&Object(w.a)(t)){if(!Object(w.a)(e))return!1;u=!0,p=!1}if(y&&!p)return a||(a=new r.a),u||Object(j.a)(t)?c(t,e,n,o,i,a):b(t,e,l,n,o,i,a);if(!(1&n)){var d=p&&P.call(t,"__wrapped__"),v=h&&P.call(e,"__wrapped__");if(d||v){var E=d?t.value():t,_=v?e.value():e;return a||(a=new r.a),i(E,_,n,o,a)}}return!!y&&(a||(a=new r.a),m(t,e,n,o,i,a))},_=n(570);e.a=function t(e,n,r,o,i){return e===n||(null==e||null==n||!Object(_.a)(e)&&!Object(_.a)(n)?e!=e&&n!=n:E(e,n,r,o,t,i))}},581:function(t,e,n){"use strict";var r=n(575);e.a=function(t,e,n){var o=null==t?void 0:Object(r.a)(t,e);return void 0===o?n:o}},582:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"d",(function(){return y})),n.d(e,"a",(function(){return b})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return v}));var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.min,r=void 0===n?-1/0:n,o=e.max,a=void 0===o?1/0:o;i(this,t),this.segments=[],this.max=a,this.min=r,this.regionString=null}var e,n,o;return e=t,(n=[{key:"encode",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map((function(n){var r=n.start,o=n.end;if(e)return"".concat(r,":").concat(o);var i=r===t.min?"":r,a=o===t.max?"":o;return"".concat(i,":").concat(a)})).join(",")}},{key:"decode",value:function(t){var e=this;void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map((function(t){var n=r(t.split(":"),3),o=n[0],i=n[1];if(void 0!==n[2])throw new Error("there should be at most 1 ':' per region. Region: ".concat(t));var a=o?Number(o):e.min,c=i?Number(i):e.max;if(a>c){var u=[c,a];a=u[0],c=u[1]}if(a<e.min&&(a=e.min),c>e.max&&(c=e.max),Number.isNaN(a))throw new Error("The parsed value of ".concat(o," is NaN. Region: ").concat(t));if(Number.isNaN(c))throw new Error("The parsed value of ".concat(i," is NaN. Region: ").concat(t));return{start:a,end:c}})):this.segments=[]}}])&&a(e.prototype,n),o&&a(e,o),t}();function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(t,e){return t?e?"".concat(t,",").concat(e):t:e},l=function(){function t(e){var n=e.element,r=e.min,o=e.max;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=n,this.region=new c({min:r,max:o}),this.fixedHighlight=null}var e,n,r;return e=t,(n=[{key:"setAttributesInElement",value:function(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight="".concat(this.element._highlightstart,":").concat(this.element._highlightend),this.region.decode(s(this.fixedHighlight,this.element._highlight))))}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this.element["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"changedCallBack",value:function(t,e){switch(t){case"highlightstart":case"highlightend":this.setFloatAttribute(t,e),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":"".concat(Math.max(this.region.min,this.element._highlightstart),":").concat(Math.min(this.region.max,this.element._highlightend));break;default:this.element._highlight=e}this.region.decode(s(this.fixedHighlight,this.element._highlight)),this.element.refresh()}},{key:"setFixedHighlight",value:function(t){this.fixedHighlight=t,this.region.decode(s(t,this.element._highlight)),this.element.refresh()}},{key:"appendHighlightTo",value:function(t){this.highlighted=t.append("g").attr("class","highlighted")}},{key:"updateHighlight",value:function(){var t=this,e=this.highlighted.selectAll("rect").data(this.region.segments);e.enter().append("rect").style("opacity",.5).attr("fill","rgba(255, 235, 59, 0.8)").style("pointer-events","none").merge(e).attr("height",this.element._height).attr("x",(function(e){return t.element.getXFromSeqPosition(e.start)})).attr("width",(function(e){return t.element.getSingleBaseWidth()*(e.end-e.start+1)})),e.exit().remove()}},{key:"max",set:function(t){this.region.max=t}}])&&u(e.prototype,n),r&&u(e,r),t}();function f(t){var e=document.createElement("div");return e.style.borderColor="",e.style.borderColor=t,""!==e.style.borderColor}var p=function(t){return t};function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y=l,b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n=[];if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var r=t.split(",").map((function(t){return t.split(":")}));if(r.length<2)throw new Error("There should be at least 2 points to create a scale");e=r.map((function(t){var e=t[0].trim().toUpperCase();if(!f(e))throw new Error("The color '".concat(e," is not valid'"));return e})),n=r.map((function(t,e){var n=parseFloat(t[1]);if(Number.isNaN(n))throw new Error("The second part of every point should be a number. Error in point ".concat(e,": ").concat(t));return n}))}return{range:e,domain:n}},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keyFormatter,r=void 0===n?p:n,o=e.valueFormatter,i=void 0===o?p:o;if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var a=t.split(",").map((function(t){return t.split(":")})),c={};return a.forEach((function(t){if(2!==t.length)throw new Error("Bad block: ".concat(t.join(":"),"\n The blocks of the string should follow the format KEY:VALUE"));c[r(t[0])]=i(t[1])})),c}return{}},v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.timeStampWheelOutside=0,this.resetScrollableTimeout=null}var e,n,r;return e=t,(n=[{key:"setElementScrollable",value:function(t){this.element.setAttribute("scrollable",t)}},{key:"startResetScrollableTimer",value:function(){var t=this;this.resetScrollableTimeout&&clearTimeout(this.resetScrollableTimeout),this.resetScrollableTimeout=setTimeout((function(){t.setElementScrollable(!0),t.resetScrollableTimeout=null}),400)}},{key:"blockScroll",value:function(t){this.timeStampWheelOutside=t,this.setElementScrollable(!1),this.startResetScrollableTimer()}},{key:"isWheelEventInsideElement",value:function(t,e){var n=this.element.getBoundingClientRect(),r=n.height,o=n.width,i=n.x,a=n.y;return t>i&&e<i+o&&e>a&&e<a+r}},{key:"wheel",value:function(t){var e=t.x,n=t.y,r=t.timeStamp;this.isWheelEventInsideElement(e,n)?r<this.timeStampWheelOutside+400?this.blockScroll(r):this.setElementScrollable(!0):this.blockScroll(r)}}])&&h(e.prototype,n),r&&h(e,r),t}()},586:function(t,e,n){"use strict";var r=n(590),o=n(578);var i=function(t,e,n,i){var a=n.length,c=a,u=!i;if(null==t)return!c;for(t=Object(t);a--;){var s=n[a];if(u&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++a<c;){var l=(s=n[a])[0],f=t[l],p=s[1];if(u&&s[2]){if(void 0===f&&!(l in t))return!1}else{var h=new r.a;if(i)var y=i(f,p,l,t,e,h);if(!(void 0===y?Object(o.a)(p,f,3,i,h):y))return!1}}return!0},a=n(572);var c=function(t){return t==t&&!Object(a.a)(t)},u=n(573);var s=function(t){for(var e=Object(u.a)(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,c(o)]}return e};var l=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};var f=function(t){var e=s(t);return 1==e.length&&e[0][2]?l(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}},p=n(581),h=n(602),y=n(571),b=n(566);var d=function(t,e){return Object(y.a)(t)&&c(e)?l(Object(b.a)(t),e):function(n){var r=Object(p.a)(n,t);return void 0===r&&r===e?Object(h.a)(n,t):Object(o.a)(e,r,3)}},v=n(614),m=n(565);var g=function(t){return function(e){return null==e?void 0:e[t]}},O=n(575);var w=function(t){return function(e){return Object(O.a)(e,t)}};var j=function(t){return Object(y.a)(t)?g(Object(b.a)(t)):w(t)};function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(t){return"function"==typeof t?t:null==t?v.a:"object"==S(t)?Object(m.a)(t)?d(t[0],t[1]):f(t):j(t)}},588:function(t,e,n){"use strict";var r=n(569),o=n(582),i=n(623);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){var e="function"==typeof Map?new Map:void 0;return(p=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return h(t,arguments,d(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,t)})(t)}function h(t,e,n){return(h=y()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&b(o,n.prototype),o}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(v,t);var e,n,a,u,p,h=(e=v,n=y(),function(){var t,r=d(e);if(n){var o=d(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return l(this,t)});function v(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),t=h.call(this),v._polyfillElementClosest(),t._updateScaleDomain=t._updateScaleDomain.bind(f(t)),t._initZoom=t._initZoom.bind(f(t)),t.zoomed=t.zoomed.bind(f(t)),t._applyZoomTranslation=t.applyZoomTranslation.bind(f(t)),t._resetEventHandler=t._resetEventHandler.bind(f(t));var e=!1;return t.applyZoomTranslation=function(){e||(e=!0,requestAnimationFrame((function(){e=!1,t._applyZoomTranslation()})))},t._onResize=t._onResize.bind(f(t)),t._listenForResize=t._listenForResize.bind(f(t)),t.trackHighlighter=new o.d({element:f(t),min:1}),t.scrollFilter=new o.b(f(t)),t.wheelListener=function(e){return t.scrollFilter.wheel(e)},t}return a=v,p=[{key:"_getClickCoords",value:function(){return r.e?[r.e.pageX,r.e.pageY]:null}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"observedAttributes",get:function(){return["displaystart","displayend","length","highlight"]}}],(u=[{key:"connectedCallback",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=this.getAttribute("length")?parseFloat(this.getAttribute("length")):0,this._displaystart=this.getAttribute("displaystart")?parseFloat(this.getAttribute("displaystart")):1,this._displayend=this.getAttribute("displayend")?parseFloat(this.getAttribute("displayend")):this.length,this._height=this.getAttribute("height")?Number(this.getAttribute("height")):44,this._highlightEvent=this.getAttribute("highlight-event")?this.getAttribute("highlight-event"):"onclick",this.trackHighlighter.setAttributesInElement(this),this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this._initZoom(),this._listenForResize(),this.addEventListener("error",(function(t){console.error(t)})),this.addEventListener("click",this._resetEventHandler),this.hasAttribute("filter-scroll")&&document.addEventListener("wheel",this.wheelListener,{capture:!0})}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro?this._ro.unobserve(this):window.removeEventListener("resize",this._onResize),this.removeEventListener("click",this._resetEventHandler),document.removeEventListener("wheel",this.wheelListener)}},{key:"getWidthWithMargins",value:function(){return this.width?this.width-this.margin.left-this.margin.right:0}},{key:"_updateScaleDomain",value:function(){this.xScale=Object(r.i)().domain([1,this._length+1]).range([0,this.getWidthWithMargins()])}},{key:"_initZoom",value:function(){var t=this;this._zoom=Object(r.m)().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).extent([[0,0],[this.getWidthWithMargins(),0]]).filter((function(){if(!(r.e instanceof WheelEvent))return!0;if(t.hasAttribute("scroll-filter")){var e=t.getAttribute("scrollable");if(e)return"true"===e}return!t.hasAttribute("use-ctrl-to-zoom")||r.e.ctrlKey})).on("zoom",this.zoomed)}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"attributeChangedCallback",value:function(t,e,n){if("null"===n&&(n=null),e!==n){if(t.startsWith("highlight"))return void this.trackHighlighter.changedCallBack(t,n);this.setFloatAttribute(t,n),"length"===t&&(this._updateScaleDomain(),this._originXScale=this.xScale.copy()),this.applyZoomTranslation()}}},{key:"zoomed",value:function(){if(this.xScale=r.e.transform.rescaleX(this._originXScale),!this.dontDispatch){var t=c(this.xScale.domain(),2),e=t[0],n=t[1];this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,e),displayend:Math.min(this.length,Math.max(n-1,e+1))},bubbles:!0,cancelable:!0}))}}},{key:"applyZoomTranslation",value:function(){if(this.svg&&this._originXScale){var t=Math.max(1,this.length/(1+this._displayend-this._displaystart)),e=-this._originXScale(this._displaystart);this.dontDispatch=!0,this.svg.call(this.zoom.transform,r.n.scale(t).translate(e,0)),this.dontDispatch=!1,this.refresh()}}},{key:"_onResize",value:function(){this.width=this.offsetWidth,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this.svg&&this.svg.attr("width",this.width),this._zoom.scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]),this.applyZoomTranslation()}},{key:"_listenForResize",value:function(){this._ro=new i.a(this._onResize),this._ro.observe(this)}},{key:"_resetEventHandler",value:function(t){t.target.closest(".feature")||this.dispatchEvent(this.createEvent("reset",null,!0))}},{key:"getXFromSeqPosition",value:function(t){return this.margin.left+this.xScale(t)}},{key:"getSingleBaseWidth",value:function(){return this.xScale(2)-this.xScale(1)}},{key:"createEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;e&&(e=e.feature?e.feature:e);var u={eventtype:t,coords:v._getClickCoords(),feature:e,target:c};return n&&(e&&e.fragments?u.highlight=e.fragments.map((function(t){return"".concat(t.start,":").concat(t.end)})).join(","):r.e&&r.e.shiftKey&&this._highlight?u.highlight="".concat(this._highlight,",").concat(i,":").concat(a):u.highlight=i&&a?"".concat(i,":").concat(a):null),o&&(u.selectedid=e&&e.protvistaFeatureId),new CustomEvent("change",{detail:u,bubbles:!0,cancelable:!0})}},{key:"bindEvents",value:function(t,e){t.on("mouseover",(function(t,n,r){e.dispatchEvent(e.createEvent("mouseover",t,"onmouseover"===e._highlightEvent,!1,t.start,t.end,r[n]))})).on("mouseout",(function(){e.dispatchEvent(e.createEvent("mouseout",null,"onmouseover"===e._highlightEvent))})).on("click",(function(t,n,r){e.dispatchEvent(e.createEvent("click",t,"onclick"===e._highlightEvent,!0,t.start,t.end,r[n]))}))}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",set:function(t){this._height=t},get:function(){return this._height}},{key:"length",set:function(t){this._length=t,this.trackHighlighter.max=t},get:function(){return this._length}},{key:"xScale",get:function(){return this._xScale},set:function(t){this._xScale=t}},{key:"zoom",get:function(){return this._zoom}},{key:"svg",set:function(t){this._svg=t,t.call(this._zoom),this.applyZoomTranslation()},get:function(){return this._svg}},{key:"margin",get:function(){return{top:10,right:10,bottom:10,left:10}}},{key:"fixedHighlight",set:function(t){this.trackHighlighter.setFixedHighlight(t)}}])&&s(a.prototype,u),p&&s(a,p),v}(p(HTMLElement));e.a=v},592:function(t,e,n){"use strict";var r=n(600),o=n(584);var i=function(t,e){return function(n,r){if(null==n)return n;if(!Object(o.a)(n))return t(n,r);for(var i=n.length,a=e?i:-1,c=Object(n);(e?a--:++a<i)&&!1!==r(c[a],a,c););return n}}(r.a);e.a=i},599:function(t,e,n){"use strict";var r=n(572),o=n(567),i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt;e.a=function(t){if("number"==typeof t)return t;if(Object(o.a)(t))return NaN;if(Object(r.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(r.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=c.test(t);return n||u.test(t)?s(t.slice(2),n?2:8):a.test(t)?NaN:+t}},600:function(t,e,n){"use strict";var r=n(604),o=n(573);e.a=function(t,e){return t&&Object(r.a)(t,e,o.a)}},601:function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},602:function(t,e,n){"use strict";var r=function(t,e){return null!=t&&e in Object(t)},o=n(574),i=n(619),a=n(565),c=n(617),u=n(620),s=n(566);var l=function(t,e,n){for(var r=-1,l=(e=Object(o.a)(e,t)).length,f=!1;++r<l;){var p=Object(s.a)(e[r]);if(!(f=null!=t&&n(t,p)))break;t=t[p]}return f||++r!=l?f:!!(l=null==t?0:t.length)&&Object(u.a)(l)&&Object(c.a)(p,l)&&(Object(a.a)(t)||Object(i.a)(t))};e.a=function(t,e){return null!=t&&l(t,e,r)}},603:function(t,e,n){"use strict";var r=n(583),o=n(568),i=n(565),a=n(567),c=r.a?r.a.prototype:void 0,u=c?c.toString:void 0;var s=function t(e){if("string"==typeof e)return e;if(Object(i.a)(e))return Object(o.a)(e,t)+"";if(Object(a.a)(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n};e.a=function(t){return null==t?"":s(t)}},604:function(t,e,n){"use strict";var r=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),c=a.length;c--;){var u=a[t?c:++o];if(!1===n(i[u],u,i))break}return e}}();e.a=r},605:function(t,e,n){"use strict";var r=n(599);var o=function(t){return t?(t=Object(r.a)(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};e.a=function(t){var e=o(t),n=e%1;return e==e?n?e-n:e:0}},606:function(t,e,n){"use strict";var r=n(624);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r.a),n}o.Cache=r.a,e.a=o},618:function(t,e,n){"use strict";var r=n(644),o=n(611);e.a=function(t,e,n,i){var a=!n;n||(n={});for(var c=-1,u=e.length;++c<u;){var s=e[c],l=i?i(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),a?Object(o.a)(n,s,l):Object(r.a)(n,s,l)}return n}},630:function(t,e,n){"use strict";var r=n(569);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,f(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,t)})(t)}function u(t,e,n){return(u=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&l(o,n.prototype),o}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(h,t);var e,n,o,c,u,p=(e=h,n=s(),function(){var t,r=f(e);if(n){var o=f(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return a(this,t)});function h(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(t=p.call(this))._x=null,t._padding=0,t.dontDispatch=!1,t}return o=h,u=[{key:"observedAttributes",get:function(){return["length","displaystart","displayend","highlightStart","highlightEnd","width"]}}],(c=[{key:"_refreshWidth",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.width>0&&(this._padding=10)}},{key:"connectedCallback",value:function(){this._refreshWidth(),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=parseFloat(this.getAttribute("length")),this._displaystart=parseFloat(this.getAttribute("displaystart"))||1,this._displayend=parseFloat(this.getAttribute("displayend"))||this._length,this._highlightStart=parseFloat(this.getAttribute("highlightStart")),this._highlightEnd=parseFloat(this.getAttribute("highlightEnd")),this._onResize=this._onResize.bind(this),this._createNavRuler()}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro&&this._ro.unobserve(this),window.removeEventListener("resize",this._onResize)}},{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&(this["_".concat(t)]=parseFloat(n),this._updateNavRuler())}},{key:"_createNavRuler",value:function(){var t=this;this._x=Object(r.i)().range([this._padding,this.width-this._padding]),this._x.domain([1,this._length]),this._svg=Object(r.l)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",40),this._xAxis=Object(r.a)(this._x),this._displaystartLabel=this._svg.append("text").attr("class","start-label").attr("x",0).attr("y",40-this._padding),this._displayendLabel=this._svg.append("text").attr("class","end-label").attr("x",this.width).attr("y",40-this._padding).attr("text-anchor","end"),this._axis=this._svg.append("g").attr("class","x axis").call(this._xAxis),this._viewport=Object(r.d)().extent([[this._padding,0],[this.width-this._padding,20.4]]).on("brush",(function(){r.e.selection&&(t._displaystart=Object(r.f)("d")(t._x.invert(r.e.selection[0])),t._displayend=Object(r.f)("d")(t._x.invert(r.e.selection[1])),t.dontDispatch||t.dispatchEvent(new CustomEvent("change",{detail:{displayend:t._displayend,displaystart:t._displaystart,extra:{transform:r.e.transform}},bubbles:!0,cancelable:!0})),t._updateLabels(),t._updatePolygon())})),this._brushG=this._svg.append("g").attr("class","brush").call(this._viewport),this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.polygon=this._svg.append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),this._updateNavRuler(),"ResizeObserver"in window&&(this._ro=new ResizeObserver(this._onResize),this._ro.observe(this)),window.addEventListener("resize",this._onResize)}},{key:"_onResize",value:function(){this._refreshWidth(),this._x=this._x.range([this._padding,this.width-this._padding]),this._svg.attr("width",this.width),this._viewport.extent([[this._padding,0],[this.width-this._padding,20.4]]),this._brushG.call(this._viewport),this._updateNavRuler()}},{key:"_updateNavRuler",value:function(){this._x&&(this._x.domain([1,this._length]),this._axis.call(this._xAxis),this._updatePolygon(),this._updateLabels(),this._brushG&&(this.dontDispatch=!0,this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.dontDispatch=!1))}},{key:"_updateLabels",value:function(){this._displaystartLabel&&this._displaystartLabel.text(this._displaystart),this._displayendLabel&&this._displayendLabel.attr("x",this.width).text(this._displayend)}},{key:"_updatePolygon",value:function(){this.polygon&&this.polygon.attr("points","".concat(this._x(this._displaystart),",").concat(20,"\n        ").concat(this._x(this._displayend),",").concat(20,"\n        ").concat(this.width,",").concat(40,"\n        0,").concat(40))}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}}])&&i(o.prototype,c),u&&i(o,u),h}(c(HTMLElement));e.a=p},631:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,p(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)})(t)}function s(t,e,n){return(s=l()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&f(o,n.prototype),o}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(h,t);var e,n,r,i,u,s=(e=h,n=l(),function(){var t,r=p(e);if(n){var o=p(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return c(this,t)});function h(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(t=s.call(this)).protvistaElements=new Set,t.attributeValues=new Map,t.propertyValues=new Map,t.mouseOver=!1,t}return r=h,u=[{key:"observedAttributes",get:function(){return["attributes","length","displaystart","displayend","highlight"]}}],(i=[{key:"attributeChangedCallback",value:function(t,e,n){if(e!==n){if("attributes"===t){if(this._attributes=n.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute")}else"length"===t&&(this.length=n),"displaystart"===t&&(this.displaystart=n),"displayend"===t&&(this.displayend=n),"highlight"===t&&(this.highlight=n);this.applyAttributes()}}},{key:"register",value:function(t){this.protvistaElements.add(t),this.applyAttributes()}},{key:"unregister",value:function(t){this.protvistaElements.delete(t)}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"applyAttributes",value:function(){var t=this;this.protvistaElements.forEach((function(e){t.attributeValues.forEach((function(t,n){!1===t?e.removeAttribute(n):e.setAttribute(n,"boolean"==typeof t?"":t)}))}))}},{key:"applyProperties",value:function(t){var e=this;if(t){var n=this.querySelector("#".concat(t));this.propertyValues.forEach((function(t,e){n[e]=t}))}else this.protvistaElements.forEach((function(t){e.propertyValues.forEach((function(e,n){t[n]=e}))}))}},{key:"isRegisteredAttribute",value:function(t){return o(this.attributeValues.keys()).includes(t)||h.observedAttributes.includes(t)}},{key:"_changeListener",value:function(t){var e=this;switch(t.detail.handler){case"property":this.propertyValues.set(t.detail.type,t.detail.value),this.applyProperties(t.detail.for);break;default:this.isRegisteredAttribute(t.detail.type)&&this.attributeValues.set(t.detail.type,t.detail.value),Object.keys(t.detail).forEach((function(n){e.isRegisteredAttribute(n)&&e.attributeValues.set(n,t.detail[n])})),this.applyAttributes()}}},{key:"connectedCallback",value:function(){this.addEventListener("change",this._changeListener)}},{key:"length",set:function(t){this.attributeValues.set("length",t)},get:function(){return this.attributeValues.get("length")}},{key:"displaystart",set:function(t){this.attributeValues.set("displaystart",t)},get:function(){return this.attributeValues.get("displaystart")}},{key:"displayend",set:function(t){this.attributeValues.set("displayend",t)},get:function(){return this.attributeValues.get("displayend")}},{key:"highlight",set:function(t){this.attributeValues.set("highlight",t)},get:function(){return this.attributeValues.get("highlight")}}])&&a(r.prototype,i),u&&a(r,u),h}(u(HTMLElement));e.a=h},633:function(t,e,n){"use strict";var r=n(714),o=n(572),i=n(648);var a=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},c=Object.prototype.hasOwnProperty;var u=function(t){if(!Object(o.a)(t))return a(t);var e=Object(i.a)(t),n=[];for(var r in t)("constructor"!=r||!e&&c.call(t,r))&&n.push(r);return n},s=n(584);e.a=function(t){return Object(s.a)(t)?Object(r.a)(t,!0):u(t)}},636:function(t,e,n){"use strict";var r=n(621);e.a=function(t){var e=new t.constructor(t.byteLength);return new r.a(e).set(new r.a(t)),e}},641:function(t,e,n){"use strict";e.a=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},642:function(t,e,n){"use strict";var r=n(572),o=Object.create,i=function(){function t(){}return function(e){if(!Object(r.a)(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();e.a=i},643:function(t,e,n){"use strict";var r=n(686),o=Object(r.a)(Object.getPrototypeOf,Object);e.a=o},644:function(t,e,n){"use strict";var r=n(611),o=n(612),i=Object.prototype.hasOwnProperty;e.a=function(t,e,n){var a=t[e];i.call(t,e)&&Object(o.a)(a,n)&&(void 0!==n||e in t)||Object(r.a)(t,e,n)}},649:function(t,e,n){"use strict";var r=n(662),o=n(643),i=n(650),a=n(687),c=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Object(r.a)(e,Object(i.a)(t)),t=Object(o.a)(t);return e}:a.a;e.a=c},652:function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},660:function(t,e,n){"use strict";(function(t){var r=n(607);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i="object"==("undefined"==typeof exports?"undefined":o(exports))&&exports&&!exports.nodeType&&exports,a=i&&"object"==o(t)&&t&&!t.nodeType&&t,c=a&&a.exports===i?r.a.Buffer:void 0,u=c?c.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,r=u?u(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(647)(t))},661:function(t,e,n){"use strict";var r=n(642),o=n(643),i=n(648);e.a=function(t){return"function"!=typeof t.constructor||Object(i.a)(t)?{}:Object(r.a)(Object(o.a)(t))}},663:function(t,e,n){"use strict";var r=n(636);e.a=function(t,e){var n=e?Object(r.a)(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},664:function(t,e,n){"use strict";var r=n(688),o=n(649),i=n(633);e.a=function(t){return Object(r.a)(t,i.a,o.a)}},674:function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,s=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?s=u.concat(s):f=-1,s.length&&h())}function h(){if(!l){var t=c(p);l=!0;for(var e=s.length;e;){for(u=s,s=[];++f<e;)u&&u[f].run();f=-1,e=s.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function b(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new y(t,e)),1!==s.length||l||c(h)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=b,o.addListener=b,o.once=b,o.off=b,o.removeListener=b,o.removeAllListeners=b,o.emit=b,o.prependListener=b,o.prependOnceListener=b,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},703:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=a(n(0)),i=a(n(56));function a(t){return t&&t.__esModule?t:{default:t}}var c=function(t){var e=t.children,n=t.width,i=t.height,a=t.style,c=void 0===a?{}:a,u=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["children","width","height","style"]);return o.default.createElement("svg",r({children:e,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:i,width:n,style:c},u))};c.propTypes={children:i.default.node.isRequired,width:i.default.oneOfType([i.default.number,i.default.string]),height:i.default.oneOfType([i.default.number,i.default.string]),style:i.default.object},e.default=c},704:function(t,e,n){t.exports=function(){return new Worker(n.p+"62b53c9c107e960ca50a.worker.js")}},709:function(t,e,n){"use strict";var r=n(590),o=n(652),i=n(644),a=n(618),c=n(573);var u=function(t,e){return t&&Object(a.a)(e,Object(c.a)(e),t)},s=n(633);var l=function(t,e){return t&&Object(a.a)(e,Object(s.a)(e),t)},f=n(660),p=n(641),h=n(650);var y=function(t,e){return Object(a.a)(t,Object(h.a)(t),e)},b=n(649);var d=function(t,e){return Object(a.a)(t,Object(b.a)(t),e)},v=n(622),m=n(664),g=n(610),O=Object.prototype.hasOwnProperty;var w=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&O.call(t,"index")&&(n.index=t.index,n.input=t.input),n},j=n(636);var S=function(t,e){var n=e?Object(j.a)(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},P=/\w*$/;var E=function(t){var e=new t.constructor(t.source,P.exec(t));return e.lastIndex=t.lastIndex,e},_=n(583),k=_.a?_.a.prototype:void 0,x=k?k.valueOf:void 0;var T=function(t){return x?Object(x.call(t)):{}},C=n(663);var R=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return Object(j.a)(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return S(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Object(C.a)(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return E(t);case"[object Set]":return new r;case"[object Symbol]":return T(t)}},q=n(661),A=n(565),D=n(616),M=n(570);var F=function(t){return Object(M.a)(t)&&"[object Map]"==Object(g.a)(t)},L=n(613),B=n(651),H=B.a&&B.a.isMap,W=H?Object(L.a)(H):F,I=n(572);var z=function(t){return Object(M.a)(t)&&"[object Set]"==Object(g.a)(t)},N=B.a&&B.a.isSet,V=N?Object(L.a)(N):z,Y={};Y["[object Arguments]"]=Y["[object Array]"]=Y["[object ArrayBuffer]"]=Y["[object DataView]"]=Y["[object Boolean]"]=Y["[object Date]"]=Y["[object Float32Array]"]=Y["[object Float64Array]"]=Y["[object Int8Array]"]=Y["[object Int16Array]"]=Y["[object Int32Array]"]=Y["[object Map]"]=Y["[object Number]"]=Y["[object Object]"]=Y["[object RegExp]"]=Y["[object Set]"]=Y["[object String]"]=Y["[object Symbol]"]=Y["[object Uint8Array]"]=Y["[object Uint8ClampedArray]"]=Y["[object Uint16Array]"]=Y["[object Uint32Array]"]=!0,Y["[object Error]"]=Y["[object Function]"]=Y["[object WeakMap]"]=!1;e.a=function t(e,n,a,s,h,b){var O,j=1&n,S=2&n,P=4&n;if(a&&(O=h?a(e,s,h,b):a(e)),void 0!==O)return O;if(!Object(I.a)(e))return e;var E=Object(A.a)(e);if(E){if(O=w(e),!j)return Object(p.a)(e,O)}else{var _=Object(g.a)(e),k="[object Function]"==_||"[object GeneratorFunction]"==_;if(Object(D.a)(e))return Object(f.a)(e,j);if("[object Object]"==_||"[object Arguments]"==_||k&&!h){if(O=S||k?{}:Object(q.a)(e),!j)return S?d(e,l(O,e)):y(e,u(O,e))}else{if(!Y[_])return h?e:{};O=R(e,_,j)}}b||(b=new r.a);var x=b.get(e);if(x)return x;b.set(e,O),V(e)?e.forEach((function(r){O.add(t(r,n,a,r,e,b))})):W(e)&&e.forEach((function(r,o){O.set(o,t(r,n,a,o,e,b))}));var T=P?S?m.a:v.a:S?keysIn:c.a,C=E?void 0:T(e);return Object(o.a)(C||e,(function(r,o){C&&(r=e[o=r]),Object(i.a)(O,o,t(r,n,a,o,e,b))})),O}},796:function(t,e,n){"use strict";(function(t,r){var o,i=n(797);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:r;var a=Object(i.a)(o);e.a=a}).call(this,n(112),n(647)(t))},797:function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.d(e,"a",(function(){return r}))},798:function(t,e,n){"use strict";(function(e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(114);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function i(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0}function a(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var c=n(799),u=Object.prototype.hasOwnProperty,s=Array.prototype.slice,l="foo"===function(){}.name;function f(t){return Object.prototype.toString.call(t)}function p(t){return!a(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var h=t.exports=g,y=/\s*function\s+([^\(\s]*)\s*/;function b(t){if(c.isFunction(t)){if(l)return t.name;var e=t.toString().match(y);return e&&e[1]}}function d(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function v(t){if(l||!c.isFunction(t))return c.inspect(t);var e=b(t);return"[Function"+(e?": "+e:"")+"]"}function m(t,e,n,r,o){throw new h.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:o})}function g(t,e){t||m(t,!0,e,"==",h.ok)}function O(t,e,n,o){if(t===e)return!0;if(a(t)&&a(e))return 0===i(t,e);if(c.isDate(t)&&c.isDate(e))return t.getTime()===e.getTime();if(c.isRegExp(t)&&c.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"===r(t)||null!==e&&"object"===r(e)){if(p(t)&&p(e)&&f(t)===f(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(a(t)!==a(e))return!1;var u=(o=o||{actual:[],expected:[]}).actual.indexOf(t);return-1!==u&&u===o.expected.indexOf(e)||(o.actual.push(t),o.expected.push(e),function(t,e,n,r){if(null==t||null==e)return!1;if(c.isPrimitive(t)||c.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=w(t),i=w(e);if(o&&!i||!o&&i)return!1;if(o)return t=s.call(t),e=s.call(e),O(t,e,n);var a,u,l=P(t),f=P(e);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),u=l.length-1;u>=0;u--)if(l[u]!==f[u])return!1;for(u=l.length-1;u>=0;u--)if(a=l[u],!O(t[a],e[a],n,r))return!1;return!0}(t,e,n,o))}return n?t===e:t==e}function w(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function j(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function S(t,e,n,r){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!o&&m(o,n,"Missing expected exception"+r);var i="string"==typeof r,a=!t&&o&&!n;if((!t&&c.isError(o)&&i&&j(o,n)||a)&&m(o,n,"Got unwanted exception"+r),t&&o&&n&&!j(o,n)||!t&&o)throw o}h.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return d(v(t.actual),128)+" "+t.operator+" "+d(v(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,o=b(e),i=r.indexOf("\n"+o);if(i>=0){var a=r.indexOf("\n",i+1);r=r.substring(a+1)}this.stack=r}}},c.inherits(h.AssertionError,Error),h.fail=m,h.ok=g,h.equal=function(t,e,n){t!=e&&m(t,e,n,"==",h.equal)},h.notEqual=function(t,e,n){t==e&&m(t,e,n,"!=",h.notEqual)},h.deepEqual=function(t,e,n){O(t,e,!1)||m(t,e,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(t,e,n){O(t,e,!0)||m(t,e,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(t,e,n){O(t,e,!1)&&m(t,e,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function t(e,n,r){O(e,n,!0)&&m(e,n,r,"notDeepStrictEqual",t)},h.strictEqual=function(t,e,n){t!==e&&m(t,e,n,"===",h.strictEqual)},h.notStrictEqual=function(t,e,n){t===e&&m(t,e,n,"!==",h.notStrictEqual)},h.throws=function(t,e,n){S(!0,t,e,n)},h.doesNotThrow=function(t,e,n){S(!1,t,e,n)},h.ifError=function(t){if(t)throw t},h.strict=o((function t(e,n){e||m(e,!0,n,"==",t)}),h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var P=Object.keys||function(t){var e=[];for(var n in t)u.call(t,n)&&e.push(n);return e}}).call(this,n(112))},799:function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},i=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(u(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),c=r[n];n<o;c=r[++n])d(c)||!w(c)?a+=" "+c:a+=" "+u(c);return a},e.deprecate=function(n,r){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var a,c={};function u(t,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),b(n)?r.showHidden=n:n&&e._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),f(r,t,r.depth)}function s(t,e){var n=u.styles[e];return n?"["+u.colors[n][0]+"m"+t+"["+u.colors[n][1]+"m":t}function l(t,e){return t}function f(t,n,r){if(t.customInspect&&n&&P(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return m(o)||(o=f(t,o,r)),o}var i=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(v(e))return t.stylize(""+e,"number");if(b(e))return t.stylize(""+e,"boolean");if(d(e))return t.stylize("null","null")}(t,n);if(i)return i;var a=Object.keys(n),c=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),S(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(n);if(0===a.length){if(P(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(O(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(j(n))return t.stylize(Date.prototype.toString.call(n),"date");if(S(n))return p(n)}var s,l="",w=!1,E=["{","}"];(y(n)&&(w=!0,E=["[","]"]),P(n))&&(l=" [Function"+(n.name?": "+n.name:"")+"]");return O(n)&&(l=" "+RegExp.prototype.toString.call(n)),j(n)&&(l=" "+Date.prototype.toUTCString.call(n)),S(n)&&(l=" "+p(n)),0!==a.length||w&&0!=n.length?r<0?O(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),s=w?function(t,e,n,r,o){for(var i=[],a=0,c=e.length;a<c;++a)T(e,String(a))?i.push(h(t,e,n,r,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(h(t,e,n,r,o,!0))})),i}(t,n,r,c,a):a.map((function(e){return h(t,n,r,c,e,w)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(s,l,E)):E[0]+l+E[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,o,i){var a,c,u;if((u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?c=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(c=t.stylize("[Setter]","special")),T(r,o)||(a="["+o+"]"),c||(t.seen.indexOf(u.value)<0?(c=d(n)?f(t,u.value,null):f(t,u.value,n-1)).indexOf("\n")>-1&&(c=i?c.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+c.split("\n").map((function(t){return"   "+t})).join("\n")):c=t.stylize("[Circular]","special")),g(a)){if(i&&o.match(/^\d+$/))return c;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+c}function y(t){return Array.isArray(t)}function b(t){return"boolean"==typeof t}function d(t){return null===t}function v(t){return"number"==typeof t}function m(t){return"string"==typeof t}function g(t){return void 0===t}function O(t){return w(t)&&"[object RegExp]"===E(t)}function w(t){return"object"===r(t)&&null!==t}function j(t){return w(t)&&"[object Date]"===E(t)}function S(t){return w(t)&&("[object Error]"===E(t)||t instanceof Error)}function P(t){return"function"==typeof t}function E(t){return Object.prototype.toString.call(t)}function _(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(g(a)&&(a=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!c[n])if(new RegExp("\\b"+n+"\\b","i").test(a)){var r=t.pid;c[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else c[n]=function(){};return c[n]},e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=y,e.isBoolean=b,e.isNull=d,e.isNullOrUndefined=function(t){return null==t},e.isNumber=v,e.isString=m,e.isSymbol=function(t){return"symbol"===r(t)},e.isUndefined=g,e.isRegExp=O,e.isObject=w,e.isDate=j,e.isError=S,e.isFunction=P,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===r(t)||void 0===t},e.isBuffer=n(800);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function x(){var t=new Date,e=[_(t.getHours()),_(t.getMinutes()),_(t.getSeconds())].join(":");return[t.getDate(),k[t.getMonth()],e].join(" ")}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",x(),e.format.apply(e,arguments))},e.inherits=n(801),e._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var C="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(C&&t[C]){var e;if("function"!=typeof(e=t[C]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,C,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,o)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),C&&Object.defineProperty(e,C,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,o(t))},e.promisify.custom=C,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};e.apply(this,n).then((function(e){t.nextTick(a,null,e)}),(function(e){t.nextTick(R,e,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,o(e)),n}}).call(this,n(674))},800:function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return t&&"object"===n(t)&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},801:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},802:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=a(n(0)),i=a(n(703));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){return o.default.createElement(i.default,r({viewBox:"0 0 16 16"},t),o.default.createElement("path",{d:"M4 0H0v4h1V1h3V0zm11 0h-3v1h3v3h1V0h-1zM1 15v-3H0v4h4v-1H1zm14-3v3h-3v1h4v-4h-1zm-2-3l-.008-.003L11.5 10.5 9 8l2.5-2.5L12.971 7H13V3H9v.03l1.5 1.47L8 7 5.5 4.5 7 3.03V3H3v4l1.5-1.5L7 8l-2.5 2.5L3 9v4h4l-1.5-1.5L8 9l2.5 2.5L9 13h4V9z"}))}},803:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=a(n(0)),i=a(n(703));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){return o.default.createElement(i.default,r({viewBox:"0 0 16 16"},t),o.default.createElement("path",{d:"M.013 1.012V15h13.999V1.012H.013zm10.999 7.995H8.013v2.999h-2V9.007h-3V7.008h3V4.01h2v2.998h2.999v1.999z"}))}},804:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=a(n(0)),i=a(n(703));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){return o.default.createElement(i.default,r({viewBox:"0 0 16 16"},t),o.default.createElement("path",{d:"M.004 1v14h14V1h-14zM11 9H3V7h8v2z"}))}},805:function(t,e){t.exports='<h1 id="protvista-msa">protvista-msa</h1>\n<p>A custom element that visualises multiple sequences alignments. It is basically a wrapper of <a href="https://github.com/ebi-webcomponents/react-msa-viewer">react-msa-viewer</a> that plays along with other nightingale components.</p>\n<p>It currently uses the <code>clustal</code> color scheme, and only displays the alignment, none of the other components includede in <code>react-msa-viewer</code>. it uses the scroll only to move vertically.</p>\n<h2 id="usage">Usage</h2>\n<pre><code class="language-html">&lt;protvista-msa\n  id=&quot;msa-track&quot;\n  length=&quot;300&quot;\n  height=&quot;200&quot;\n  displaystart=&quot;10&quot;\n  displayend=&quot;30&quot;\n  use-ctrl-to-zoom\n  labelWidth=&quot;100&quot;\n  colorscheme=&quot;clustal&quot;\n  activeLabel=&quot;seq_1&quot;\n/&gt;</code></pre>\n<p>This readme is been use as a road map. A 🚧 emoji indicates that this feature is under construction.</p>\n<h2 id="features">Features</h2>\n<ul>\n<li>✅ Inherits from <code>protvista-zoomable</code> and supports updates from the <code>protvista-manager</code></li>\n<li>✅ Refreshes when the property <code>data</code> is updated</li>\n<li>✅ Renders the sequence names if there is space assigned in the attribute <code>labelwidth</code></li>\n<li>✅ Forces the zoom to stay at a level thet there is at least a pixel per base.</li>\n<li>🔲 Find an alternative to be able to zoom farther.</li>\n<li>✅ Changes in color schema</li>\n<li>🔲 Highlights a region</li>\n<li>🔲 Adding other components to the layout. eg. scale, conservancy plot, etc.</li>\n<li>✅ Calculates conservation of the alignment. This calculations runs as in a separate web worker.</li>\n<li>✅ Can use the conservation either as a colorscheme or as an overlay of the current colorscheme.</li>\n</ul>\n<h2 id="api-reference">API reference</h2>\n<h3 id="parameters">Parameters</h3>\n<h5 id="width"><code>width</code></h5>\n<p>The width assigned for the component, including anything reseved for the sequence names</p>\n<p>type: <code>number</code>\ndefaultValue: calculated based onavailable space.</p>\n<h5 id="height"><code>height</code></h5>\n<p>Height of the component</p>\n<p>type: <code>number</code></p>\n<h5 id="labelwidth"><code>labelwidth</code></h5>\n<p>The space assigned for the sequence labels. This will be taken from the total <code>width</code>. Which means that if the <code>width</code> is <code>1000</code> and <code>labelwidth</code> is <code>200</code>, the alignment will be using <code>800</code>.</p>\n<p>If a value of <code>0</code> is assigned, the rendering of labels will be avoided completely.</p>\n<p>type: <code>number</code>\ndefaultValue: 0</p>\n<h5 id="colorscheme"><code>colorscheme</code></h5>\n<p>The colour scheme to use when painting the alignment tiles.</p>\n<p>Note: The conservation color scheme has to calculate some values. The current approach is to do the calculation in a web worker, if the component requests using the <code>&#39;conservation&#39;</code> scheme before the calculation is completed, it paint all the background in white, and repaints it once the calculations are done.</p>\n<p>type: <code>enum(&#39;buried_index&#39;|&#39;clustal&#39;|&#39;clustal2&#39;|&#39;cinema&#39;|&#39;helix_propensity&#39;|&#39;hydro&#39;|&#39;lesk&#39;|&#39;mae&#39;|&#39;nucleotide&#39;|&#39;purine_pyrimidine&#39;|&#39;strand_propensity&#39;|&#39;taylor&#39;|&#39;turn_propensity&#39;|&#39;zappo&#39;|&#39;conservation&#39;)</code>\ndefaultValue: <code>&#39;clustal&#39;</code></p>\n<h5 id="text-font"><code>text-font</code></h5>\n<p>The font for the bases in the alignment. It should be in the format <code>&quot;[size]px [font]&quot;</code>. Where <code>[size]</code> is a number and <code>[font]</code> should be a valid font name.</p>\n<p>type: <code>string</code>\ndefault: <code>&#39;18px Arial&#39;</code></p>\n<h5 id="calculate-conservation"><code>calculate-conservation</code></h5>\n<p>A flag that enable the calculation of the conservation values per base in the alignment.</p>\n<p>The calculation is executed on a web worker to avoid any interrruption on the main thread.</p>\n<p>type: <code>boolean</code>\ndefaultValue: <code>false</code></p>\n<h4 id="activelabel"><code>activeLabel</code></h4>\n<p>The value of the active label/track to be selected in the visualisation.</p>\n<h5 id="other-inherit-from-protvista-zoomable">Other inherit from <code>protvista-zoomable</code></h5>\n<p>displaystart, displayend, length, highlight</p>\n<p>See more <a href="https://github.com/ebi-webcomponents/nightingale/tree/master/packages/protvista-zoomable">here</a></p>\n<h5 id="overlay-conservation"><code>overlay-conservation</code></h5>\n<p>It uses the calculated conservation to define opacity values for the background of the residues.\nThis way highly conservated areas will be full coloured, while mutations will have a white background.</p>\n<p>type: <code>boolean</code>\ndefaultValue: <code>false</code></p>\n<h5 id="sample-size-conservation"><code>sample-size-conservation</code></h5>\n<p>If present, the value given here indicates how many sequences will be considered when calculating the conservation.\nThis way alignments with many sequences won&#39;t require a full analysis of the conservation, but it will be estimated based on a sample.\nIf not present, the conservation analysis will be executed with the all the sequences in the alignment.</p>\n<p>type: <code>number</code>\ndefaultValue: <code>undefined</code></p>\n<h3 id="properties">Properties</h3>\n<h4 id="data"><code>data</code></h4>\n<p>The sequences to be displayed. The should be in the following shape:</p>\n<pre><code class="language-javascript">[\n  {\n    name: &quot;seq1&quot;,\n    sequence: &quot;MAMYDDEFDTKASDLTFSPWVEVE&quot;,\n  },\n  // ...\n];</code></pre>\n<h4 id="onactivetrackchange"><code>onActiveTrackChange</code></h4>\n<p>The value of <code>onActiveTrackChange</code> should be a callback function to fire for when the active label/track is changed. Usage:</p>\n<pre><code>// msaTrack is a reference to &lt;protvista-msa /&gt; element\nmsaTrack.current.onActiveTrackChange = (trackId) =&gt; {\n  console.log(&quot;active track changed:&quot;, trackId);\n};</code></pre><p>type: <code>array</code></p>\n<h3 id="methods">Methods</h3>\n<h4 id="getcolormap"><code>getColorMap()</code></h4>\n<p>Return an object that contains the name of the current colorscheme in usage, and a map, that is a dictionary indicating the colorMapping used. For example the default scheme <code>&#39;clustal&#39;</code> would return something like:</p>\n<pre><code class="language-javascript">{\n  name: &#39;clustal&#39;,\n  map: {\n    A: &quot;orange&quot;,\n    B: &quot;#fff&quot;,\n    C: &quot;green&quot;,\n    D: &quot;red&quot;,\n    E: &quot;red&quot;,\n    F: &quot;blue&quot;,\n    G: &quot;orange&quot;,\n    H: &quot;red&quot;,\n    I: &quot;green&quot;,\n    J: &quot;#fff&quot;,\n    K: &quot;red&quot;,\n    L: &quot;green&quot;,\n    M: &quot;green&quot;,\n    N: &quot;#fff&quot;,\n    O: &quot;#fff&quot;,\n    P: &quot;orange&quot;,\n    Q: &quot;#fff&quot;,\n    R: &quot;red&quot;,\n    S: &quot;orange&quot;,\n    T: &quot;orange&quot;,\n    U: &quot;#fff&quot;,\n    V: &quot;green&quot;,\n    W: &quot;blue&quot;,\n    X: &quot;#fff&quot;,\n    Y: &quot;blue&quot;,\n    Z: &quot;#fff&quot;,\n    Gap: &quot;#fff&quot;\n  }\n}</code></pre>\n<h3 id="events">Events</h3>\n<h4 id="conservationprogress"><code>conservationProgress</code></h4>\n<p>It notifies progress at calculating the conservation. The detail of the event is an event with the progress, and the current count of bases per position in the current sequence.\nWhen the progress is equal to 1, then the current values of the sum is divided by the number of sequences.</p>\n<pre><code class="language-javascript">// in the middle of the calculation\n{\n  progress: 0.5,\n  conservation: [\n    {M:5, A:3},\n    {E:4, S:4},\n  ]\n}\n\n//When the conservation calculation has been completed\n{\n  progress: 1,\n  conservation: [\n    {M:0.5, A:0.375, P:0.125},\n    {E:0.375, S:0.375, -:0.5},\n  ]\n}\n</code></pre>\n<h4 id="drawcompleted"><code>drawCompleted</code></h4>\n<p>Evrytime the component redraws the alignment this event is raised. There are multiple actions to redraw the alignment, for instance, changes in the props, or dragging the viewport.</p>\n<p>It doesn&#39;t have any data in the details.</p>\n'}}]);