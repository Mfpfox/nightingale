(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{159:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),o=n(30),a=n(714),c=n(590),s=n(632),l=n(631),u=n(592),h=n(610),f=n(113),p=n(790),d=n.n(p),b=n(52);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O(t);if(e){var i=O(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function w(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(){var t=S(["\n                  <li>","</li>\n                "]);return j=function(){return t},t}function k(){var t=S(["\n          <ul>\n            ","\n          </ul>\n        "]);return k=function(){return t},t}function S(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var E={type:{label:"Feature key",resolver:function(t){return t.type}},description:{label:"Description",resolver:function(t){return t.description}},positions:{label:"Positions",resolver:function(t){return"".concat(t.start,"-").concat(t.end)}},consequence:{label:"Evidences",child:!0,resolver:function(t){var e=t.evidences;if(e&&e.length>0)return Object(o.c)(k(),e.map((function(t){return Object(o.c)(j(),t.code)})))}},ftId:{label:"Feature ID",child:!0,resolver:function(t){return t.ftId}}},C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(g,t);var e,n,o,p=_(g);function g(){return y(this,g),p.apply(this,arguments)}return e=g,(n=[{key:"componentDidMount",value:function(){document.querySelector("#data-table").columns=E}},{key:"render",value:function(){return Object(f.a)("data-loader",h.a),Object(f.a)("protvista-datatable",a.a),Object(f.a)("protvista-manager",s.a),Object(f.a)("protvista-track",c.b),Object(f.a)("protvista-navigation",l.a),Object(f.a)("protvista-feature-adapter",u.a),i.a.createElement(r.Fragment,null,i.a.createElement(b.default,{content:d.a}),i.a.createElement("h2",null,"Track with data-loader"),i.a.createElement("protvista-feature-adapter",{subscribers:"#my-protvista-track,#data-table"},i.a.createElement("data-loader",null,i.a.createElement("source",{src:"https://www.ebi.ac.uk/proteins/api/features/P05067?categories=MOLECULE_PROCESSING"}))),i.a.createElement("protvista-manager",{attributes:"length displaystart displayend variantfilters highlight selectedid"},i.a.createElement("protvista-navigation",{length:"770"}),i.a.createElement("protvista-track",{id:"my-protvista-track",length:"770",layout:"non-overlapping"}),i.a.createElement("protvista-datatable",{id:"data-table"})))}}])&&v(e.prototype,n),o&&v(e,o),g}(r.Component);e.default=C},567:function(t,e,n){"use strict";var r=n(568);e.a=function(t){if("string"==typeof t||Object(r.a)(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},568:function(t,e,n){"use strict";var r=n(588),i=n(571);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(t){return"symbol"==o(t)||Object(i.a)(t)&&"[object Symbol]"==Object(r.a)(t)}},572:function(t,e,n){"use strict";var r=n(566),i=n(568);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;e.a=function(t,e){if(Object(r.a)(t))return!1;var n=o(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Object(i.a)(t))||(c.test(t)||!a.test(t)||null!=e&&t in Object(e))}},575:function(t,e,n){"use strict";var r=n(566),i=n(572),o=n(607);var a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,s=function(t){var e=Object(o.a)(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(a,(function(t,n,r,i){e.push(r?i.replace(c,"$1"):n||t)})),e})),l=n(604);e.a=function(t,e){return Object(r.a)(t)?t:Object(i.a)(t,e)?[t]:s(Object(l.a)(t))}},576:function(t,e,n){"use strict";var r=n(575),i=n(567);e.a=function(t,e){for(var n=0,o=(e=Object(r.a)(e,t)).length;null!=t&&n<o;)t=t[Object(i.a)(e[n++])];return n&&n==o?t:void 0}},579:function(t,e,n){"use strict";var r=n(591),i=n(580),o=n(602),a=n(578);var c=function(t,e,n,r,c,s){var l=1&n,u=t.length,h=e.length;if(u!=h&&!(l&&h>u))return!1;var f=s.get(t);if(f&&s.get(e))return f==e;var p=-1,d=!0,b=2&n?new i.a:void 0;for(s.set(t,e),s.set(e,t);++p<u;){var g=t[p],y=e[p];if(r)var v=l?r(y,g,p,e,t,s):r(g,y,p,t,e,s);if(void 0!==v){if(v)continue;d=!1;break}if(b){if(!Object(o.a)(e,(function(t,e){if(!Object(a.a)(b,e)&&(g===t||c(g,t,n,r,s)))return b.push(e)}))){d=!1;break}}else if(g!==y&&!c(g,y,n,r,s)){d=!1;break}}return s.delete(t),s.delete(e),d},s=n(584),l=n(622),u=n(613);var h=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},f=n(577),p=s.a?s.a.prototype:void 0,d=p?p.valueOf:void 0;var b=function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new l.a(t),new l.a(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(u.a)(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=h;case"[object Set]":var p=1&r;if(s||(s=f.a),t.size!=e.size&&!p)return!1;var b=a.get(t);if(b)return b==e;r|=2,a.set(t,e);var g=c(s(t),s(e),r,i,o,a);return a.delete(t),g;case"[object Symbol]":if(d)return d.call(t)==d.call(e)}return!1},g=n(623),y=Object.prototype.hasOwnProperty;var v=function(t,e,n,r,i,o){var a=1&n,c=Object(g.a)(t),s=c.length;if(s!=Object(g.a)(e).length&&!a)return!1;for(var l=s;l--;){var u=c[l];if(!(a?u in e:y.call(e,u)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++l<s;){var d=t[u=c[l]],b=e[u];if(r)var v=a?r(b,d,u,e,t,o):r(d,b,u,t,e,o);if(!(void 0===v?d===b||i(d,b,n,r,o):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var m=t.constructor,_=e.constructor;m==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _||(f=!1)}return o.delete(t),o.delete(e),f},m=n(611),_=n(566),w=n(617),O=n(626),j="[object Object]",k=Object.prototype.hasOwnProperty;var S=function(t,e,n,i,o,a){var s=Object(_.a)(t),l=Object(_.a)(e),u=s?"[object Array]":Object(m.a)(t),h=l?"[object Array]":Object(m.a)(e),f=(u="[object Arguments]"==u?j:u)==j,p=(h="[object Arguments]"==h?j:h)==j,d=u==h;if(d&&Object(w.a)(t)){if(!Object(w.a)(e))return!1;s=!0,f=!1}if(d&&!f)return a||(a=new r.a),s||Object(O.a)(t)?c(t,e,n,i,o,a):b(t,e,u,n,i,o,a);if(!(1&n)){var g=f&&k.call(t,"__wrapped__"),y=p&&k.call(e,"__wrapped__");if(g||y){var S=g?t.value():t,E=y?e.value():e;return a||(a=new r.a),o(S,E,n,i,a)}}return!!d&&(a||(a=new r.a),v(t,e,n,i,o,a))},E=n(571);e.a=function t(e,n,r,i,o){return e===n||(null==e||null==n||!Object(E.a)(e)&&!Object(E.a)(n)?e!=e&&n!=n:S(e,n,r,i,t,o))}},581:function(t,e,n){"use strict";e.a=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},582:function(t,e,n){"use strict";var r=n(576);e.a=function(t,e,n){var i=null==t?void 0:Object(r.a)(t,e);return void 0===i?n:i}},583:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return b})),n.d(e,"c",(function(){return g})),n.d(e,"b",(function(){return y}));var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.min,r=void 0===n?-1/0:n,i=e.max,a=void 0===i?1/0:i;o(this,t),this.segments=[],this.max=a,this.min=r,this.regionString=null}var e,n,i;return e=t,(n=[{key:"encode",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map((function(n){var r=n.start,i=n.end;if(e)return"".concat(r,":").concat(i);var o=r===t.min?"":r,a=i===t.max?"":i;return"".concat(o,":").concat(a)})).join(",")}},{key:"decode",value:function(t){var e=this;void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map((function(t){var n=r(t.split(":"),3),i=n[0],o=n[1];if(void 0!==n[2])throw new Error("there should be at most 1 ':' per region. Region: ".concat(t));var a=i?Number(i):e.min,c=o?Number(o):e.max;if(a>c){var s=[c,a];a=s[0],c=s[1]}if(a<e.min&&(a=e.min),c>e.max&&(c=e.max),Number.isNaN(a))throw new Error("The parsed value of ".concat(i," is NaN. Region: ").concat(t));if(Number.isNaN(c))throw new Error("The parsed value of ".concat(o," is NaN. Region: ").concat(t));return{start:a,end:c}})):this.segments=[]}}])&&a(e.prototype,n),i&&a(e,i),t}();function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(t,e){return t?e?"".concat(t,",").concat(e):t:e},u=function(){function t(e){var n=e.element,r=e.min,i=e.max;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=n,this.region=new c({min:r,max:i}),this.fixedHighlight=null}var e,n,r;return e=t,(n=[{key:"setAttributesInElement",value:function(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight="".concat(this.element._highlightstart,":").concat(this.element._highlightend),this.region.decode(l(this.fixedHighlight,this.element._highlight))))}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this.element["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"changedCallBack",value:function(t,e){switch(t){case"highlightstart":case"highlightend":this.setFloatAttribute(t,e),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":"".concat(Math.max(this.region.min,this.element._highlightstart),":").concat(Math.min(this.region.max,this.element._highlightend));break;default:this.element._highlight=e}this.region.decode(l(this.fixedHighlight,this.element._highlight)),this.element.refresh()}},{key:"setFixedHighlight",value:function(t){this.fixedHighlight=t,this.region.decode(l(t,this.element._highlight)),this.element.refresh()}},{key:"appendHighlightTo",value:function(t){this.highlighted=t.append("g").attr("class","highlighted")}},{key:"updateHighlight",value:function(){var t=this,e=this.highlighted.selectAll("rect").data(this.region.segments);e.enter().append("rect").style("opacity",.5).attr("fill","rgba(255, 235, 59, 0.8)").style("pointer-events","none").merge(e).attr("height",this.element._height).attr("x",(function(e){return t.element.getXFromSeqPosition(e.start)})).attr("width",(function(e){return t.element.getSingleBaseWidth()*(e.end-e.start+1)})),e.exit().remove()}},{key:"max",set:function(t){this.region.max=t}}])&&s(e.prototype,n),r&&s(e,r),t}();function h(t){var e=document.createElement("div");return e.style.borderColor="",e.style.borderColor=t,""!==e.style.borderColor}var f=function(t){return t};function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d=u,b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n=[];if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var r=t.split(",").map((function(t){return t.split(":")}));if(r.length<2)throw new Error("There should be at least 2 points to create a scale");e=r.map((function(t){var e=t[0].trim().toUpperCase();if(!h(e))throw new Error("The color '".concat(e," is not valid'"));return e})),n=r.map((function(t,e){var n=parseFloat(t[1]);if(Number.isNaN(n))throw new Error("The second part of every point should be a number. Error in point ".concat(e,": ").concat(t));return n}))}return{range:e,domain:n}},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keyFormatter,r=void 0===n?f:n,i=e.valueFormatter,o=void 0===i?f:i;if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var a=t.split(",").map((function(t){return t.split(":")})),c={};return a.forEach((function(t){if(2!==t.length)throw new Error("Bad block: ".concat(t.join(":"),"\n The blocks of the string should follow the format KEY:VALUE"));c[r(t[0])]=o(t[1])})),c}return{}},y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.timeStampWheelOutside=0,this.resetScrollableTimeout=null}var e,n,r;return e=t,(n=[{key:"setElementScrollable",value:function(t){this.element.setAttribute("scrollable",t)}},{key:"startResetScrollableTimer",value:function(){var t=this;this.resetScrollableTimeout&&clearTimeout(this.resetScrollableTimeout),this.resetScrollableTimeout=setTimeout((function(){t.setElementScrollable(!0),t.resetScrollableTimeout=null}),400)}},{key:"blockScroll",value:function(t){this.timeStampWheelOutside=t,this.setElementScrollable(!1),this.startResetScrollableTimer()}},{key:"isWheelEventInsideElement",value:function(t,e){var n=this.element.getBoundingClientRect(),r=n.height,i=n.width,o=n.x,a=n.y;return t>o&&e<o+i&&e>a&&e<a+r}},{key:"wheel",value:function(t){var e=t.x,n=t.y,r=t.timeStamp;this.isWheelEventInsideElement(e,n)?r<this.timeStampWheelOutside+400?this.blockScroll(r):this.setElementScrollable(!0):this.blockScroll(r)}}])&&p(e.prototype,n),r&&p(e,r),t}()},586:function(t,e,n){"use strict";var r=n(612);var i=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r},o=n(593);var a=function(t,e,n,r){return Object(o.a)(t,(function(t,i,o){e(r,t,n(t),o)})),r},c=n(587),s=n(566);var l=function(t,e){return function(n,r){var o=Object(s.a)(n)?i:a,l=e?e():{};return o(n,t,Object(c.a)(r,2),l)}},u=Object.prototype.hasOwnProperty,h=l((function(t,e,n){u.call(t,n)?t[n].push(e):Object(r.a)(t,n,[e])}));e.a=h},587:function(t,e,n){"use strict";var r=n(591),i=n(579);var o=function(t,e,n,o){var a=n.length,c=a,s=!o;if(null==t)return!c;for(t=Object(t);a--;){var l=n[a];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<c;){var u=(l=n[a])[0],h=t[u],f=l[1];if(s&&l[2]){if(void 0===h&&!(u in t))return!1}else{var p=new r.a;if(o)var d=o(h,f,u,t,e,p);if(!(void 0===d?Object(i.a)(f,h,3,o,p):d))return!1}}return!0},a=n(573);var c=function(t){return t==t&&!Object(a.a)(t)},s=n(574);var l=function(t){for(var e=Object(s.a)(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,c(i)]}return e};var u=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};var h=function(t){var e=l(t);return 1==e.length&&e[0][2]?u(e[0][0],e[0][1]):function(n){return n===t||o(n,t,e)}},f=n(582),p=n(603),d=n(572),b=n(567);var g=function(t,e){return Object(d.a)(t)&&c(e)?u(Object(b.a)(t),e):function(n){var r=Object(f.a)(n,t);return void 0===r&&r===e?Object(p.a)(n,t):Object(i.a)(e,r,3)}},y=n(615),v=n(566);var m=function(t){return function(e){return null==e?void 0:e[t]}},_=n(576);var w=function(t){return function(e){return Object(_.a)(e,t)}};var O=function(t){return Object(d.a)(t)?m(Object(b.a)(t)):w(t)};function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(t){return"function"==typeof t?t:null==t?y.a:"object"==j(t)?Object(v.a)(t)?g(t[0],t[1]):h(t):O(t)}},589:function(t,e,n){"use strict";var r=n(570),i=n(583),o=n(624);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){var e="function"==typeof Map?new Map:void 0;return(f=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return p(t,arguments,g(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,t)})(t)}function p(t,e,n){return(p=d()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&b(i,n.prototype),i}).apply(null,arguments)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(y,t);var e,n,a,s,f,p=(e=y,n=d(),function(){var t,r=g(e);if(n){var i=g(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return u(this,t)});function y(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),t=p.call(this),y._polyfillElementClosest(),t._updateScaleDomain=t._updateScaleDomain.bind(h(t)),t._initZoom=t._initZoom.bind(h(t)),t.zoomed=t.zoomed.bind(h(t)),t._applyZoomTranslation=t.applyZoomTranslation.bind(h(t)),t._resetEventHandler=t._resetEventHandler.bind(h(t));var e=!1;return t.applyZoomTranslation=function(){e||(e=!0,requestAnimationFrame((function(){e=!1,t._applyZoomTranslation()})))},t._onResize=t._onResize.bind(h(t)),t._listenForResize=t._listenForResize.bind(h(t)),t.trackHighlighter=new i.d({element:h(t),min:1}),t.scrollFilter=new i.b(h(t)),t.wheelListener=function(e){return t.scrollFilter.wheel(e)},t}return a=y,f=[{key:"_getClickCoords",value:function(){return r.e?[r.e.pageX,r.e.pageY]:null}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"observedAttributes",get:function(){return["displaystart","displayend","length","highlight"]}}],(s=[{key:"connectedCallback",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=this.getAttribute("length")?parseFloat(this.getAttribute("length")):0,this._displaystart=this.getAttribute("displaystart")?parseFloat(this.getAttribute("displaystart")):1,this._displayend=this.getAttribute("displayend")?parseFloat(this.getAttribute("displayend")):this.length,this._height=this.getAttribute("height")?Number(this.getAttribute("height")):44,this._highlightEvent=this.getAttribute("highlight-event")?this.getAttribute("highlight-event"):"onclick",this.trackHighlighter.setAttributesInElement(this),this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this._initZoom(),this._listenForResize(),this.addEventListener("error",(function(t){console.error(t)})),this.addEventListener("click",this._resetEventHandler),this.hasAttribute("filter-scroll")&&document.addEventListener("wheel",this.wheelListener,{capture:!0})}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro?this._ro.unobserve(this):window.removeEventListener("resize",this._onResize),this.removeEventListener("click",this._resetEventHandler),document.removeEventListener("wheel",this.wheelListener)}},{key:"getWidthWithMargins",value:function(){return this.width?this.width-this.margin.left-this.margin.right:0}},{key:"_updateScaleDomain",value:function(){this.xScale=Object(r.i)().domain([1,this._length+1]).range([0,this.getWidthWithMargins()])}},{key:"_initZoom",value:function(){var t=this;this._zoom=Object(r.m)().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).extent([[0,0],[this.getWidthWithMargins(),0]]).filter((function(){if(!(r.e instanceof WheelEvent))return!0;if(t.hasAttribute("scroll-filter")){var e=t.getAttribute("scrollable");if(e)return"true"===e}return!t.hasAttribute("use-ctrl-to-zoom")||r.e.ctrlKey})).on("zoom",this.zoomed)}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"attributeChangedCallback",value:function(t,e,n){if("null"===n&&(n=null),e!==n){if(t.startsWith("highlight"))return void this.trackHighlighter.changedCallBack(t,n);this.setFloatAttribute(t,n),"length"===t&&(this._updateScaleDomain(),this._originXScale=this.xScale.copy()),this.applyZoomTranslation()}}},{key:"zoomed",value:function(){if(this.xScale=r.e.transform.rescaleX(this._originXScale),!this.dontDispatch){var t=c(this.xScale.domain(),2),e=t[0],n=t[1];this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,e),displayend:Math.min(this.length,Math.max(n-1,e+1))},bubbles:!0,cancelable:!0}))}}},{key:"applyZoomTranslation",value:function(){if(this.svg&&this._originXScale){var t=Math.max(1,this.length/(1+this._displayend-this._displaystart)),e=-this._originXScale(this._displaystart);this.dontDispatch=!0,this.svg.call(this.zoom.transform,r.n.scale(t).translate(e,0)),this.dontDispatch=!1,this.refresh()}}},{key:"_onResize",value:function(){this.width=this.offsetWidth,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this.svg&&this.svg.attr("width",this.width),this._zoom.scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]),this.applyZoomTranslation()}},{key:"_listenForResize",value:function(){this._ro=new o.a(this._onResize),this._ro.observe(this)}},{key:"_resetEventHandler",value:function(t){t.target.closest(".feature")||this.dispatchEvent(this.createEvent("reset",null,!0))}},{key:"getXFromSeqPosition",value:function(t){return this.margin.left+this.xScale(t)}},{key:"getSingleBaseWidth",value:function(){return this.xScale(2)-this.xScale(1)}},{key:"createEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;e&&(e=e.feature?e.feature:e);var s={eventtype:t,coords:y._getClickCoords(),feature:e,target:c};return n&&(e&&e.fragments?s.highlight=e.fragments.map((function(t){return"".concat(t.start,":").concat(t.end)})).join(","):r.e&&r.e.shiftKey&&this._highlight?s.highlight="".concat(this._highlight,",").concat(o,":").concat(a):s.highlight=o&&a?"".concat(o,":").concat(a):null),i&&(s.selectedid=e&&e.protvistaFeatureId),new CustomEvent("change",{detail:s,bubbles:!0,cancelable:!0})}},{key:"bindEvents",value:function(t,e){t.on("mouseover",(function(t,n,r){e.dispatchEvent(e.createEvent("mouseover",t,"onmouseover"===e._highlightEvent,!1,t.start,t.end,r[n]))})).on("mouseout",(function(){e.dispatchEvent(e.createEvent("mouseout",null,"onmouseover"===e._highlightEvent))})).on("click",(function(t,n,r){e.dispatchEvent(e.createEvent("click",t,"onclick"===e._highlightEvent,!0,t.start,t.end,r[n]))}))}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",set:function(t){this._height=t},get:function(){return this._height}},{key:"length",set:function(t){this._length=t,this.trackHighlighter.max=t},get:function(){return this._length}},{key:"xScale",get:function(){return this._xScale},set:function(t){this._xScale=t}},{key:"zoom",get:function(){return this._zoom}},{key:"svg",set:function(t){this._svg=t,t.call(this._zoom),this.applyZoomTranslation()},get:function(){return this._svg}},{key:"margin",get:function(){return{top:10,right:10,bottom:10,left:10}}},{key:"fixedHighlight",set:function(t){this.trackHighlighter.setFixedHighlight(t)}}])&&l(a.prototype,s),f&&l(a,f),y}(f(HTMLElement));e.a=y},590:function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var r=n(570),i=n(633),o=n(585),a=n(588),c=n(566),s=n(571);var l=function(t){return"string"==typeof t||!Object(c.a)(t)&&Object(s.a)(t)&&"[object String]"==Object(a.a)(t)},u=n(606),h=n(569);var f=function(t,e){return Object(h.a)(e,(function(e){return t[e]}))},p=n(574);var d=function(t){return null==t?[]:f(t,Object(p.a)(t))},b=Math.max;var g=function(t,e,n,r){t=Object(o.a)(t)?t:d(t),n=n&&!r?Object(u.a)(n):0;var a=t.length;return n<0&&(n=b(a+n,0)),l(t)?n<=a&&t.indexOf(e,n)>-1:!!a&&Object(i.a)(t,e,n)>-1},y=n(586),v=n(596),m=n(597),_=n(589);function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"isContinuous",value:function(t){return"bridge"!==(t=t.toLowerCase())}}],(n=[{key:"getFeatureShape",value:function(t,e,n,r){return r=r||"rectangle",this._ftLength=n,this._ftHeight=e,this._ftWidth=t*n,"function"!=typeof this["_"+r]&&(r="rectangle"),this["_"+r]()}},{key:"_rectangle",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+"Z"}},{key:"_roundRectangle",value:function(){return"M6,0h"+(this._ftWidth-12)+",0a6,6 0 0 1 6,6v"+(this._ftHeight-12)+"a6,6 0 0 1 -6,6h"+(12-this._ftWidth)+"a6,6 0 0 1 -6,-6v"+(12-this._ftHeight)+"a6,6 0 0 1 6,-6Z"}},{key:"_bridge",value:function(){return 1!==this._ftLength?"M0,"+this._ftHeight+"L0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L"+this._ftWidth+",2L0,2Z":"M0,"+this._ftHeight+"L0,"+this._ftHeight/2+"L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth/2+",0L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight+"Z"}},{key:"_getMiddleLine",value:function(t){return"M0,"+t+"L"+this._ftWidth+","+t+"Z"}},{key:"_diamond",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(t+5)+",5L"+t+",10L"+(t-5)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth):e+"Z"}},{key:"_chevron",value:function(){var t=this._ftWidth/2,e="M"+t+",5L"+(5+t)+",0L"+(5+t)+",5L"+t+",10L"+(-5+t)+",5L"+(-5+t)+",0";return 1!==this._ftLength?e+"L"+t+",5"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_catFace",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",0L"+(-5+t)+",6L"+(-2+t)+",10L"+(2+t)+",10L"+(5+t)+",6L"+(5+t)+",0L"+(2+t)+",4L"+(-2+t)+",4";return 1!==this._ftLength?e+"M"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_triangle",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(5+t)+",10L"+(-5+t)+",10";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_wave",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",5A2.5,5 0 1,1 "+t+",5A2.5,5 0 1,0 "+(5+t)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getPolygon",value:function(t){for(var e="M ",n=this._ftWidth/2,r=0;r<t;r++)e+=5*Math.cos(2*Math.PI*r/t)+n+","+(5*Math.sin(2*Math.PI*r/t)+5)+" ";return 1!==this._ftLength?e+" "+(5*Math.cos(0)+n)+","+(5*Math.sin(0)+5)+" "+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_hexagon",value:function(){return this._getPolygon(6)}},{key:"_pentagon",value:function(){return this._getPolygon(5)}},{key:"_circle",value:function(){var t=this._ftWidth/2,e=Math.sqrt(10/Math.PI),n="M"+t+",0A"+e+","+e+" 0 1,1 "+t+",10A"+e+","+e+" 0 1,1 "+t+",0";return 1!==this._ftLength?n+this._getMiddleLine(5,this._ftWidth)+"Z":n+"Z"}},{key:"_arrow",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-1+t)+",0L"+(-5+t)+",4L"+(-1+t)+","+this._ftHeight+"L"+t+","+this._ftHeight+"L"+(4+t)+",4";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_doubleBar",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-5+t)+",10L"+t+",10L"+(5+t)+",0";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getBrokenEnd",value:function(){var t=this._ftHeight/4;return"L"+(this._ftWidth-t)+","+t+"L"+this._ftWidth+","+2*t+"L"+(this._ftWidth-t)+","+3*t+"L"+this._ftWidth+","+this._ftHeight}},{key:"_getBrokenStart",value:function(){var t=this._ftHeight/4;return"L"+t+","+3*t+"L0,"+2*t+"L"+t+","+t}},{key:"_discontinuosStart",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuos",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuosEnd",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+"Z"}},{key:"_helix",value:function(){for(var t=2.5,e=2.5,n=Math.round(this._ftWidth/5),r="",i=0;i<n;i++)r+="M"+(-2.5+e)+","+this._ftHeight+" C"+(e+t)+",7.5 "+(2.5+e)+",2.5 "+e+", 0 C"+(e-t)+",2.5 "+e+",7.5 "+(2.5+e)+","+this._ftHeight,e+=5;return r}},{key:"_strand",value:function(){var t=0;this._ftWidth>5&&(t=this._ftWidth-5);var e=this._ftHeight/4;return"M0,"+e+"L"+t+","+e+"L"+t+","+3*e+"L0,"+3*e+"L0,"+e+"M"+t+",0L"+this._ftWidth+","+2*e+"L"+t+","+this._ftHeight+"Z"}}])&&w(e.prototype,n),r&&w(e,r),t}();function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var k=function(){function t(e){var n=e.layoutHeight,r=e.padding,i=void 0===r?1:r,o=e.minHeight,a=void 0===o?17:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._padding=i,this._minHeight=a,this._layoutHeight=n}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this._features=t}},{key:"getFeatureYPos",value:function(){var t=this.getFeatureHeight();return this._layoutHeight/2-t/2}},{key:"getFeatureHeight",value:function(){return Math.min(this._layoutHeight,this._minHeight)-this._padding}}])&&j(e.prototype,n),r&&j(e,r),t}();function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A(t);if(e){var i=A(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return L(this,n)}}function L(t,e){return!e||"object"!==S(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=function(t,e){return e.some((function(e){return n=t,r=e,!(Number(r.start)>Number(n.end)||Number(r.end)<Number(n.start));var n,r}))},M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(o,t);var e,n,r,i=x(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).featuresMap=new Map,e._rowHeight=0,e._rows=[],e._minHeight=15,e}return e=o,(n=[{key:"init",value:function(t){var e=this;t.forEach((function(t){var n=e._rows.findIndex((function(e){return!P(t,e)}));n>=0?(e._rows[n].push(t),e.featuresMap.set(t,n)):(e._rows.push([t]),e.featuresMap.set(t,e._rows.length-1))})),this._rowHeight=Math.min(this._layoutHeight/this._rows.length,this._minHeight)}},{key:"getOffset",value:function(){return this._rows.length*this._rowHeight<this._layoutHeight?this._layoutHeight/2-this._rows.length*this._rowHeight/2:0}},{key:"getFeatureYPos",value:function(t){var e=this.featuresMap.get(t);return this.getOffset()+this._rowHeight*e+2*this._padding}},{key:"getFeatureHeight",value:function(){return this._rowHeight-2*this._padding}}])&&E(e.prototype,n),r&&E(e,r),o}(k),R={CHAIN:{name:"chain",label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},TRANSIT:{name:"transit peptide",label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},INIT_MET:{name:"initiator methionine",label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},PROPEP:{name:"propeptide",label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},PEPTIDE:{name:"peptide",label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},SIGNAL:{name:"signal peptide",label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},HELIX:{name:"helix",label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},STRAND:{name:"strand",label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},TURN:{name:"turn",label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},DISULFID:{name:"disulfide bond",label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},CROSSLNK:{name:"cross-link",label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},REGION:{name:"region of interest",label:"Region of interest",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},COILED:{name:"coiled-coil region",label:"Coiled-coil region",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},MOTIF:{name:"short sequence motif",label:"Short sequence motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},REPEAT:{name:"repeat",label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},CA_BIND:{name:"calcium-binding region",label:"Calcium-binding region",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},DNA_BIND:{name:"DNA-binding region",label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},DOMAIN:{name:"other domain of interest",label:"Other domain of interest",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},ZN_FING:{name:"zinc finger region",label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},NP_BIND:{name:"nucleotide-binding region",label:"Nucleotide-binding region",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},METAL:{name:"metal ion-binding site",label:"Metal ion-binding site",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},SITE:{name:"other site of interest",label:"Other site of interest",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},BINDING:{name:"other binding site",label:"Other binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},ACT_SITE:{name:"active site",label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},MOD_RES:{name:"Post-translationally modified residue",label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},LIPID:{name:"lipid moiety-binding region",label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},CARBOHYD:{name:"glycosylation site",label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},COMPBIAS:{name:"compositionally biased region",label:"Compositionally biased region",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},CONFLICT:{name:"sequence conflict",label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},NON_CONS:{name:"non-consecutive residues",label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},NON_TER:{name:"non-terminal residue",label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},UNSURE:{name:"unsure residue",label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},NON_STD:{name:"non-standard amino acid",label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},MUTAGEN:{name:"mutagenesis site",label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},TOPO_DOM:{name:"topological domain",label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},TRANSMEM:{name:"transmembrane region",label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},INTRAMEM:{name:"intramembrane region",label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},VAR_SEQ:{name:"splice variant",label:"Splice variant",tooltip:"",shape:"rectangle",color:"#CC11CC"},VARIANT:{name:"sequence variant",label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},UNIQUE:{name:"unique",label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},NON_UNIQUE:{name:"non-unique",label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},ANTIGEN:{name:"antigen",label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},PDBE_COVER:{name:"pdbe coverage",label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}},F=function(t){if(R[t.toUpperCase()])return R[t.toUpperCase()].shape;var e=Object.values(R).find((function(e){return e.name.toUpperCase()===t.toUpperCase()}));return e?e.shape:"rectangle"},T=function(t){if(R[t.toUpperCase()])return R[t.toUpperCase()].color;var e=Object.values(R).find((function(e){return e.name.toUpperCase()===t.toUpperCase()}));return e||console.log(t),e?e.color:"black"};function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t){return function(t){if(Array.isArray(t))return H(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function z(t,e,n){return(z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function q(t,e){return(q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=U(t);if(e){var i=U(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return B(this,n)}}function B(t,e){return!e||"object"!==D(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var V=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}(a,t);var e,n,i,o=Z(a);function a(){return I(this,a),o.apply(this,arguments)}return e=a,i=[{key:"normalizeLocations",value:function(t){return t.map((function(t){var e=t.locations,n=t.start,r=t.end;return e?t:Object.assign(t,{locations:[{fragments:[{start:n,end:r}]}]})}))}},{key:"observedAttributes",get:function(){return _.a.observedAttributes.concat(["highlight","color","shape","filters"])}}],(n=[{key:"getLayout",value:function(){return"non-overlapping"===String(this.getAttribute("layout")).toLowerCase()?new M({layoutHeight:this._height}):new k({layoutHeight:this._height})}},{key:"connectedCallback",value:function(){var t=this;z(U(a.prototype),"connectedCallback",this).call(this),this._color=this.getAttribute("color"),this._shape=this.getAttribute("shape"),this._featureShape=new O,this._layoutObj=this.getLayout(),this._data&&this._createTrack(),this.addEventListener("load",(function(e){g(t.children,e.target)&&(t.data=e.detail.payload)}))}},{key:"processData",value:function(t){this._originalData=a.normalizeLocations(t)}},{key:"_getFeatureColor",value:function(t){return t.color?t.color:t.feature&&t.feature.color?t.feature.color:this._color?this._color:t.type?T(t.type):t.feature&&t.feature.type?T(t.feature.type):"black"}},{key:"_getFeatureFillColor",value:function(t){return t.fill?t.fill:t.feature&&t.feature.fill?t.feature.fill:this._getFeatureColor(t)}},{key:"_getShape",value:function(t){return t.shape?t.shape:t.feature&&t.feature.shape?t.feature.shape:this._shape?this._shape:t.type?F(t.type):t.feature&&t.feature.type?F(t.feature.type):"rectangle"}},{key:"_createTrack",value:function(){this._layoutObj.init(this._data),Object(r.l)(this).selectAll("div").remove(),this.svg=Object(r.l)(this).append("div").style("line-height",0).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg),this.seq_g=this.svg.append("g").attr("class","sequence-features"),this._createFeatures()}},{key:"_createFeatures",value:function(){var t=this;this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data),this.locations=this.featuresG.enter().append("g").attr("class","feature-group").attr("id",(function(t){return"g_".concat(t.accession)})).selectAll("g.location-group").data((function(t){return t.locations.map((function(e){return Object.assign({},e,{feature:t})}))})).enter().append("g").attr("class","location-group"),this.features=this.locations.selectAll("g.fragment-group").data((function(t){return t.fragments.map((function(e){return Object.assign({},e,{feature:t.feature})}))})).enter().append("path").attr("class",(function(e){return"".concat(t._getShape(e)," feature")})).attr("d",(function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e))})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})).attr("fill",(function(e){return t._getFeatureFillColor(e)})).attr("stroke",(function(e){return t._getFeatureColor(e)})).style("fill-opacity",(function(t){var e=t.feature;return e.opacity?e.opacity:.9})).style("stroke-opacity",(function(t){var e=t.feature;return e.opacity?e.opacity:.9})).call(this.bindEvents,this)}},{key:"_applyFilters",value:function(){var t=this;if(!this._filters||this._filters.length<=0)this._data=this._originalData;else{var e=Object(y.a)(this._filters,"category"),n=Object.values(e).map((function(e){var n=e.map((function(e){return e.filterFn(t._originalData)}));return v.a.apply(void 0,N(n))})),r=m.a.apply(void 0,N(n));this._data=r}}},{key:"refresh",value:function(){var t=this;this.xScale&&this.seq_g&&(this.features=this.seq_g.selectAll("path.feature").data(this._data.reduce((function(t,e){return t.concat(e.locations.reduce((function(t,n){return t.concat(n.fragments.map((function(t){return Object.assign({},t,{feature:e})})))}),[]))}),[])),this.features.attr("d",(function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e))})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})),this._updateHighlight())}},{key:"_updateHighlight",value:function(){this.trackHighlighter.updateHighlight()}},{key:"data",set:function(t){this.processData(t),this._applyFilters(),this._layoutObj=this.getLayout(),this._createTrack()}},{key:"filters",set:function(t){this._filters=t,this._applyFilters(),this._createTrack()}}])&&W(e.prototype,n),i&&W(e,i),a}(_.a);e.b=V},592:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return s}));var r=n(634),i=[{name:"ECO:0000269",description:"Manual assertion based on experiment",shortDescription:"Publication",acronym:"EXP",isManual:!0},{name:"ECO:0000303",description:"Manual assertion based on opinion",shortDescription:"Publication",acronym:"NAS",isManual:!0},{name:"ECO:0000305",description:"Manual assertion inferred by curator",shortDescription:"Curated",acronym:"IC",isManual:!0},{name:"ECO:0000250",description:"Manual assertion inferred from sequence similarity",shortDescription:"By similarity",acronym:"ISS",isManual:!0},{name:"ECO:0000255",description:"Manual assertion according to rules",shortDescription:"Sequence Analysis",acronym:"ISM",isManual:!0},{name:"ECO:0000244",description:"Manual assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXM",isManual:!0},{name:"ECO:0000312",description:"Manual assertion inferred from database entries",shortDescription:"Imported",acronym:"MI",isManual:!0},{name:"ECO:0000256",description:"Automatic assertion according to rules",shortDescription:"Automatic annotation",acronym:"AA"},{name:"ECO:0000259",description:"Automatic assertion inferred from signature match",shortDescription:"Automatic annotation",acronym:"AA"},{name:"ECO:0000213",description:"Automatic assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXA"},{name:"ECO:0000313",description:"Automatic assertion inferred from database entries",shortDescription:"Imported",acronym:"AI"}];function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function(t){return t?"\n      <ul>".concat(t.map((function(t){var e,n=i.find((function(e){return e.name===t.code}));return n?"<li title='".concat(n.description,'\' style="padding: .25rem 0">').concat(n.shortDescription,":&nbsp;").concat(t.source?(e=t.source).name.toLowerCase()==="PubMed".toLowerCase()?"".concat(e.id,"&nbsp;(<a href='").concat(e.url,"' style=\"color:#FFF\" target='_blank'>").concat(e.name,"</a>&nbsp;<a href='").concat(e.alternativeUrl,"' style=\"color:#FFF\" target='_blank'>EuropePMC</a>)"):"&nbsp;<a href='".concat(e.url,"' style=\"color:#FFF\" target='_blank'>").concat(e.id,"</a>&nbsp;(").concat(e.name,")"):"","</li>"):""})).join(""),"</ul>\n    "):""},l=function(t){return"<ul>".concat(t.map((function(t){return'<li style="padding: .25rem 0">'.concat(t.name," ").concat(t.url?'<a href="'.concat(t.url,'" style="color:#FFF" target="_blank">').concat(t.id,"</a>"):"".concat(t.name," ").concat(t.id),"</li>")})).join(""),"</ul>")},u=function(t){var e=s(t.evidences);return"\n      ".concat(t.description?"<h5>Description</h5><p>".concat(t.description,"</p>"):"","\n      ").concat(t.matchScore?"<h5>Match score</h5><p>".concat(t.matchScore,"%</p>"):"","\n      ").concat(t.ftId?"<h5>Feature ID</h5><p>".concat(t.ftId,"</p>"):"","\n      ").concat(t.alternativeSequence?"<h5>Alternative sequence</h5><p>".concat(t.alternativeSequence,"</p>"):"","\n      ").concat(e?"<h5>Evidence</h5>".concat(e):"","\n      ").concat(t.xrefs?"<h5>Cross-references</h5>".concat(l(t.xrefs)):"","\n        ")};function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){var e="function"==typeof Map?new Map:void 0;return(d=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return b(t,arguments,v(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,t)})(t)}function b(t,e,n){return(b=g()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&y(i,n.prototype),i}).apply(null,arguments)}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O=function(t){var e=[],n=t.features;return n&&n.length>0&&(e=function(t){return t.map((function(t){var e={};return t.begin&&(e.start=t.begin),a(a({},t),e)}))}(e=n.map((function(t){return _(_({},t),{},{tooltipContent:u(t),protvistaFeatureId:Object(r.a)()})})))),e},j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(c,t);var e,n,r,i,o,a=(e=c,n=g(),function(){var t,r=v(e);if(n){var i=v(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return p(this,t)});function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this))._adaptedData=[],t}return r=c,(i=[{key:"connectedCallback",value:function(){this.subscribers=this.getAttribute("subscribers"),this._filters=this.getAttribute("filters")?this.getAttribute("filters").split(","):[],this._addLoaderListeners()}},{key:"parseEntry",value:function(t){this._adaptedData=O(t)}},{key:"filterData",value:function(){var t=this;Array.isArray(this._adaptedData)&&this._filters.length>0&&(this._adaptedData=this._adaptedData.filter((function(e){return t._filters.includes(e.type)})))}},{key:"_setSubscriberData",value:function(){var t=this;this.subscribers.forEach((function(e){var n=document.querySelector(e);n?n.data=t._adaptedData:console.error("Element with id '".concat(e,"' not found"))}))}},{key:"_emitEvent",value:function(t){this.parseEntry(t),this.filterData(),this.subscribers&&this._setSubscriberData(),this.dispatchEvent(new CustomEvent("load",{detail:{payload:this._adaptedData},bubbles:!0,cancelable:!0}))}},{key:"_addLoaderListeners",value:function(){var t=this;this.addEventListener("load",(function(e){if(e.target!==t){e.stopPropagation();try{if(e.detail.payload.errorMessage)throw e.detail.payload.errorMessage;t._emitEvent(e.detail.payload)}catch(e){t.dispatchEvent(new CustomEvent("error",{detail:e,bubbles:!0,cancelable:!0}))}}}))}},{key:"data",set:function(t){this._emitEvent(t)}},{key:"subscribers",set:function(t){t&&(this._subscribers=t.split(","))},get:function(){return this._subscribers}},{key:"adaptedData",get:function(){return this._adaptedData}}])&&f(r.prototype,i),o&&f(r,o),c}(d(HTMLElement));e.a=j},593:function(t,e,n){"use strict";var r=n(601),i=n(585);var o=function(t,e){return function(n,r){if(null==n)return n;if(!Object(i.a)(n))return t(n,r);for(var o=n.length,a=e?o:-1,c=Object(n);(e?a--:++a<o)&&!1!==r(c[a],a,c););return n}}(r.a);e.a=o},596:function(t,e,n){"use strict";var r=n(629),i=n(594),o=n(580),a=n(598),c=n(581),s=n(578),l=n(627),u=n(628),h=n(577),f=l.a&&1/Object(h.a)(new l.a([,-0]))[1]==1/0?function(t){return new l.a(t)}:u.a;var p=function(t,e,n){var r=-1,i=a.a,l=t.length,u=!0,p=[],d=p;if(n)u=!1,i=c.a;else if(l>=200){var b=e?null:f(t);if(b)return Object(h.a)(b);u=!1,i=s.a,d=new o.a}else d=e?[]:p;t:for(;++r<l;){var g=t[r],y=e?e(g):g;if(g=n||0!==g?g:0,u&&y==y){for(var v=d.length;v--;)if(d[v]===y)continue t;e&&d.push(y),p.push(g)}else i(d,y,n)||(d!==p&&d.push(y),p.push(g))}return p},d=n(599),b=Object(i.a)((function(t){return p(Object(r.a)(t,1,d.a,!0))}));e.a=b},597:function(t,e,n){"use strict";var r=n(569),i=n(580),o=n(598),a=n(581),c=n(614),s=n(578),l=Math.min;var u=function(t,e,n){for(var u=n?a.a:o.a,h=t[0].length,f=t.length,p=f,d=Array(f),b=1/0,g=[];p--;){var y=t[p];p&&e&&(y=Object(r.a)(y,Object(c.a)(e))),b=l(y.length,b),d[p]=!n&&(e||h>=120&&y.length>=120)?new i.a(p&&y):void 0}y=t[0];var v=-1,m=d[0];t:for(;++v<h&&g.length<b;){var _=y[v],w=e?e(_):_;if(_=n||0!==_?_:0,!(m?Object(s.a)(m,w):u(g,w,n))){for(p=f;--p;){var O=d[p];if(!(O?Object(s.a)(O,w):u(t[p],w,n)))continue t}m&&m.push(w),g.push(_)}}return g},h=n(594),f=n(599);var p=function(t){return Object(f.a)(t)?t:[]},d=Object(h.a)((function(t){var e=Object(r.a)(t,p);return e.length&&e[0]===t[0]?u(e):[]}));e.a=d},600:function(t,e,n){"use strict";var r=n(573),i=n(568),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;e.a=function(t){if("number"==typeof t)return t;if(Object(i.a)(t))return NaN;if(Object(r.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(r.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=c.test(t);return n||s.test(t)?l(t.slice(2),n?2:8):a.test(t)?NaN:+t}},601:function(t,e,n){"use strict";var r=n(605),i=n(574);e.a=function(t,e){return t&&Object(r.a)(t,e,i.a)}},602:function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},603:function(t,e,n){"use strict";var r=function(t,e){return null!=t&&e in Object(t)},i=n(575),o=n(620),a=n(566),c=n(618),s=n(621),l=n(567);var u=function(t,e,n){for(var r=-1,u=(e=Object(i.a)(e,t)).length,h=!1;++r<u;){var f=Object(l.a)(e[r]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++r!=u?h:!!(u=null==t?0:t.length)&&Object(s.a)(u)&&Object(c.a)(f,u)&&(Object(a.a)(t)||Object(o.a)(t))};e.a=function(t,e){return null!=t&&u(t,e,r)}},604:function(t,e,n){"use strict";var r=n(584),i=n(569),o=n(566),a=n(568),c=r.a?r.a.prototype:void 0,s=c?c.toString:void 0;var l=function t(e){if("string"==typeof e)return e;if(Object(o.a)(e))return Object(i.a)(e,t)+"";if(Object(a.a)(e))return s?s.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n};e.a=function(t){return null==t?"":l(t)}},605:function(t,e,n){"use strict";var r=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),c=a.length;c--;){var s=a[t?c:++i];if(!1===n(o[s],s,o))break}return e}}();e.a=r},606:function(t,e,n){"use strict";var r=n(600);var i=function(t){return t?(t=Object(r.a)(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};e.a=function(t){var e=i(t),n=e%1;return e==e?n?e-n:e:0}},607:function(t,e,n){"use strict";var r=n(625);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r.a),n}i.Cache=r.a,e.a=i},610:function(t,e,n){"use strict";var r=n(582);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){s=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,p(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)})(t)}function u(t,e,n){return(u=h()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&f(i,n.prototype),i}).apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var b=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function c(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((r=r.apply(t,e||[])).next())}))},g=new Map,y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Headers({accept:"application/json"}),n=g.get(t);if(n)return n;var r=b(void 0,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.fetch(t,{headers:e});case 2:if((r=n.sent).ok){n.next=5;break}throw new Error("Request Failed: Status = ".concat(r.status,"; URI = ").concat(t,"; Time = ").concat(new Date));case 5:if(204!==r.status){n.next=7;break}return n.abrupt("return",{payload:null,headers:r.headers});case 7:return n.next=9,r.json();case 9:return i=n.sent,n.abrupt("return",{payload:i,headers:r.headers});case 11:case"end":return n.stop()}}),n)})));return g.set(t,r),r.catch((function(){return g.delete(t)})),r},v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(g,t);var e,n,i,a,l,u=(e=g,n=h(),function(){var t,r=p(e);if(n){var i=p(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function g(){var t;return d(this,g),(t=u.call(this))._data=null,t.selector=(t.getAttribute("selector")||"").trim()||function(t){return t},t}return i=g,l=[{key:"is",get:function(){return"data-loader"}}],(a=[{key:"fetch",value:function(){return b(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,i,a,c,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=this.children,(e=Array.from(l).filter((function(t){return t.matches('source[src], script[type="application/json"]')}))).length){t.next=3;break}return t.abrupt("return");case 3:n=[],a=o(e),t.prev=5,a.s();case 7:if((c=a.n()).done){t.next=31;break}if(s=c.value,t.prev=9,!(s instanceof HTMLSourceElement)){t.next=22;break}return t.t0=Object,t.t1=Object,t.t2={},t.next=16,y(s.src);case 16:t.t3=t.sent,t.t4=t.t1.assign.call(t.t1,t.t2,t.t3),t.t5={srcElement:s,src:s.src},i=t.t0.assign.call(t.t0,t.t4,t.t5),t.next=23;break;case 22:i={payload:JSON.parse(s.textContent)};case 23:return t.abrupt("break",31);case 26:t.prev=26,t.t6=t.catch(9),n.push(t.t6);case 29:t.next=7;break;case 31:t.next=36;break;case 33:t.prev=33,t.t7=t.catch(5),a.e(t.t7);case 36:return t.prev=36,a.f(),t.finish(36);case 39:if(i){t.next=43;break}this._errors=n;try{this.dispatchEvent(new CustomEvent("error",{detail:n,bubbles:!0,cancelable:!0}))}catch(t){console.error(t)}return t.abrupt("return");case 43:"string"==typeof this.selector?this._data=Object(r.a)(i.payload,this.selector):this._data=this.selector(i.payload),i.payload=this.data,this.dispatchEvent(new CustomEvent("load",{detail:i,bubbles:!0,cancelable:!0}));case 46:case"end":return t.stop()}var l}),t,this,[[5,33,36,39],[9,26]])})))}},{key:"connectedCallback",value:function(){this.fetch()}},{key:"data",get:function(){return this._data}},{key:"loaded",get:function(){return!!this.data}},{key:"errors",get:function(){return this._errors}},{key:"selector",get:function(){return this._selector},set:function(t){this._selector=t}}])&&c(i.prototype,a),l&&c(i,l),g}(l(HTMLElement));e.a=v},631:function(t,e,n){"use strict";var r=n(570);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,h(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)})(t)}function s(t,e,n){return(s=l()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(p,t);var e,n,i,c,s,f=(e=p,n=l(),function(){var t,r=h(e);if(n){var i=h(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function p(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(t=f.call(this))._x=null,t._padding=0,t.dontDispatch=!1,t}return i=p,s=[{key:"observedAttributes",get:function(){return["length","displaystart","displayend","highlightStart","highlightEnd","width"]}}],(c=[{key:"_refreshWidth",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.width>0&&(this._padding=10)}},{key:"connectedCallback",value:function(){this._refreshWidth(),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=parseFloat(this.getAttribute("length")),this._displaystart=parseFloat(this.getAttribute("displaystart"))||1,this._displayend=parseFloat(this.getAttribute("displayend"))||this._length,this._highlightStart=parseFloat(this.getAttribute("highlightStart")),this._highlightEnd=parseFloat(this.getAttribute("highlightEnd")),this._onResize=this._onResize.bind(this),this._createNavRuler()}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro&&this._ro.unobserve(this),window.removeEventListener("resize",this._onResize)}},{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&(this["_".concat(t)]=parseFloat(n),this._updateNavRuler())}},{key:"_createNavRuler",value:function(){var t=this;this._x=Object(r.i)().range([this._padding,this.width-this._padding]),this._x.domain([1,this._length]),this._svg=Object(r.l)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",40),this._xAxis=Object(r.a)(this._x),this._displaystartLabel=this._svg.append("text").attr("class","start-label").attr("x",0).attr("y",40-this._padding),this._displayendLabel=this._svg.append("text").attr("class","end-label").attr("x",this.width).attr("y",40-this._padding).attr("text-anchor","end"),this._axis=this._svg.append("g").attr("class","x axis").call(this._xAxis),this._viewport=Object(r.d)().extent([[this._padding,0],[this.width-this._padding,20.4]]).on("brush",(function(){r.e.selection&&(t._displaystart=Object(r.f)("d")(t._x.invert(r.e.selection[0])),t._displayend=Object(r.f)("d")(t._x.invert(r.e.selection[1])),t.dontDispatch||t.dispatchEvent(new CustomEvent("change",{detail:{displayend:t._displayend,displaystart:t._displaystart,extra:{transform:r.e.transform}},bubbles:!0,cancelable:!0})),t._updateLabels(),t._updatePolygon())})),this._brushG=this._svg.append("g").attr("class","brush").call(this._viewport),this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.polygon=this._svg.append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),this._updateNavRuler(),"ResizeObserver"in window&&(this._ro=new ResizeObserver(this._onResize),this._ro.observe(this)),window.addEventListener("resize",this._onResize)}},{key:"_onResize",value:function(){this._refreshWidth(),this._x=this._x.range([this._padding,this.width-this._padding]),this._svg.attr("width",this.width),this._viewport.extent([[this._padding,0],[this.width-this._padding,20.4]]),this._brushG.call(this._viewport),this._updateNavRuler()}},{key:"_updateNavRuler",value:function(){this._x&&(this._x.domain([1,this._length]),this._axis.call(this._xAxis),this._updatePolygon(),this._updateLabels(),this._brushG&&(this.dontDispatch=!0,this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.dontDispatch=!1))}},{key:"_updateLabels",value:function(){this._displaystartLabel&&this._displaystartLabel.text(this._displaystart),this._displayendLabel&&this._displayendLabel.attr("x",this.width).text(this._displayend)}},{key:"_updatePolygon",value:function(){this.polygon&&this.polygon.attr("points","".concat(this._x(this._displaystart),",").concat(20,"\n        ").concat(this._x(this._displayend),",").concat(20,"\n        ").concat(this.width,",").concat(40,"\n        0,").concat(40))}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}}])&&o(i.prototype,c),s&&o(i,s),p}(c(HTMLElement));e.a=f},632:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return c(t,arguments,u(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,t)})(t)}function c(t,e,n){return(c=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l(i,n.prototype),i}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(f,t);var e,n,r,a,c,h=(e=f,n=s(),function(){var t,r=u(e);if(n){var i=u(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return o(this,t)});function f(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(t=h.call(this)).protvistaElements=new Set,t.attributeValues=new Map,t.propertyValues=new Map,t.mouseOver=!1,t}return r=f,c=[{key:"observedAttributes",get:function(){return["attributes"]}}],(a=[{key:"attributeChangedCallback",value:function(t,e,n){if(e!==n&&"attributes"===t){if(this._attributes=n.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute")}}},{key:"register",value:function(t){this.protvistaElements.add(t)}},{key:"unregister",value:function(t){this.protvistaElements.delete(t)}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"applyAttributes",value:function(){var t=this;this.protvistaElements.forEach((function(e){t.attributeValues.forEach((function(t,n){!1===t?e.removeAttribute(n):e.setAttribute(n,"boolean"==typeof t?"":t)}))}))}},{key:"applyProperties",value:function(t){var e=this;if(t){var n=this.querySelector("#".concat(t));this.propertyValues.forEach((function(t,e){n[e]=t}))}else this.protvistaElements.forEach((function(t){e.propertyValues.forEach((function(e,n){t[n]=e}))}))}},{key:"_changeListener",value:function(t){var e=this;switch(t.detail.handler){case"property":this.propertyValues.set(t.detail.type,t.detail.value),this.applyProperties(t.detail.for);break;default:-1!==this._attributes.indexOf(t.detail.type)&&this.attributeValues.set(t.detail.type,t.detail.value),Object.keys(t.detail).forEach((function(n){-1!==e._attributes.indexOf(n)&&e.attributeValues.set(n,t.detail[n])})),this.applyAttributes()}}},{key:"connectedCallback",value:function(){this.addEventListener("change",this._changeListener)}}])&&i(r.prototype,a),c&&i(r,c),f}(a(HTMLElement));e.a=h},634:function(t,e,n){"use strict";var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function o(){if(!r)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}for(var a=[],c=0;c<256;++c)a.push((c+256).toString(16).substr(1));var s,l,u=function(t,e){var n=e||0,r=a;return(r[t[n+0]]+r[t[n+1]]+r[t[n+2]]+r[t[n+3]]+"-"+r[t[n+4]]+r[t[n+5]]+"-"+r[t[n+6]]+r[t[n+7]]+"-"+r[t[n+8]]+r[t[n+9]]+"-"+r[t[n+10]]+r[t[n+11]]+r[t[n+12]]+r[t[n+13]]+r[t[n+14]]+r[t[n+15]]).toLowerCase()},h=0,f=0;e.a=function(t,e,n){var r=e&&n||0,i=e||[],a=(t=t||{}).node||s,c=void 0!==t.clockseq?t.clockseq:l;if(null==a||null==c){var p=t.random||(t.rng||o)();null==a&&(a=s=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==c&&(c=l=16383&(p[6]<<8|p[7]))}var d=void 0!==t.msecs?t.msecs:Date.now(),b=void 0!==t.nsecs?t.nsecs:f+1,g=d-h+(b-f)/1e4;if(g<0&&void 0===t.clockseq&&(c=c+1&16383),(g<0||d>h)&&void 0===t.nsecs&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=d,f=b,l=c;var y=(1e4*(268435455&(d+=122192928e5))+b)%4294967296;i[r++]=y>>>24&255,i[r++]=y>>>16&255,i[r++]=y>>>8&255,i[r++]=255&y;var v=d/4294967296*1e4&268435455;i[r++]=v>>>8&255,i[r++]=255&v,i[r++]=v>>>24&15|16,i[r++]=v>>>16&255,i[r++]=c>>>8|128,i[r++]=255&c;for(var m=0;m<6;++m)i[r+m]=a[m];return e||u(i)}},701:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(16),i=n(13),o=n(30),a=new WeakMap,c=Object(o.b)((function(t){return function(e){if(!(e instanceof o.a))throw new Error("unsafeSVG can only be used in text bindings");var n=a.get(e);if(void 0===n||!Object(i.f)(t)||t!==n.value||e.value!==n.fragment){var c=document.createElement("template");c.innerHTML="<svg>".concat(t,"</svg>");var s=c.content,l=s.firstChild;s.removeChild(l),Object(r.c)(s,l.firstChild);var u=document.importNode(s,!0);e.setValue(u),a.set(e,{value:t,fragment:u})}}}))},702:function(t,e){t.exports='<svg viewBox="0 0 496 496" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>plus</title><desc>Created with Sketch.</desc><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="plus-circle" fill="#000000" fill-rule="nonzero"><path d="M248,0 C385,0 496,111 496,248 C496,385 385,496 248,496 C111,496 0,385 0,248 C0,111 111,0 248,0 Z M248,36 C130.915633,36 36,130.915633 36,248 C36,365.084367 130.915633,460 248,460 C365.084367,460 460,365.084367 460,248 C460,130.915633 365.084367,36 248,36 Z M392,276 C392,282.6 386.6,288 380,288 L288,288 L288,380 C288,386.6 282.6,392 276,392 L220,392 C213.4,392 208,386.6 208,380 L208,288 L116,288 C109.4,288 104,282.6 104,276 L104,220 C104,213.4 109.4,208 116,208 L208,208 L208,116 C208,109.4 213.4,104 220,104 L276,104 C282.6,104 288,109.4 288,116 L288,208 L380,208 C386.6,208 392,213.4 392,220 L392,276 Z" id="Shape"></path></g></g></svg>'},703:function(t,e){t.exports='<svg viewBox="0 0 496 496" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>plus-circle</title><desc>Created with Sketch.</desc><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="plus-circle" fill="#000000" fill-rule="nonzero"><path d="M248,0 C385,0 496,111 496,248 C496,385 385,496 248,496 C111,496 0,385 0,248 C0,111 111,0 248,0 Z M248,36 C130.915633,36 36,130.915633 36,248 C36,365.084367 130.915633,460 248,460 C365.084367,460 460,365.084367 460,248 C460,130.915633 365.084367,36 248,36 Z M392,276 C392,282.6 386.6,288 380,288 L288,288 L208,288 L116,288 C109.4,288 104,282.6 104,276 L104,220 C104,213.4 109.4,208 116,208 L208,208 L288,208 L380,208 C386.6,208 392,213.4 392,220 L392,276 Z" id="Shape"></path></g></g></svg>'},714:function(t,e,n){"use strict";var r=n(65),i=n(634),o=n(583),a=n(701);function c(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n  :host {\n    display: block;\n  }\n  .protvista-datatable-container {\n    overflow-y: auto;\n    overflow-x: hidden;\n  }\n\n  :host([scrollable="true"]) .protvista-datatable-container {\n    overflow-y: auto;\n    will-change: scroll;\n  }\n\n  :host([scrollable="false"]) .protvista-datatable-container {\n    overflow-y: hidden;\n  }\n\n  .protvista-datatable__child-toggle svg {\n    width: 1.1rem;\n    height: 1.1rem;\n  }\n\n  table {\n    width: 100%;\n    padding: 0;\n    margin: 0;\n    border-spacing: 0;\n  }\n\n  th {\n    position: sticky;\n    position: -webkit-sticky;\n    position: -moz-sticky;\n    position: -ms-sticky;\n    position: -o-sticky;\n    text-align: left;\n    background-color: var(--protvista-datable__header-background, #fff);\n    color: var(--protvista-datable__header-text, #393b42);\n    text-overflow: ellipsis;\n    top: 0;\n  }\n\n  td,\n  th {\n    padding: 1rem;\n    border-bottom: 1px solid #c2c4c4;\n  }\n\n  tr:hover:not(.active):not(.child-row) {\n    background-color: var(--protvista-datatable__hover, #f1f1f1);\n  }\n\n  td {\n    cursor: pointer;\n  }\n\n  td:nth-child(1) {\n    border-left: 0.5rem solid transparent;\n  }\n\n  .overlapped td:nth-child(1) {\n    border-left: 0.5rem solid\n      var(--protvista-datatable__overlapped, rgba(255, 0, 0, 0.8));\n  }\n\n  .active {\n    background-color: var(\n      --protvista-datatable__active,\n      rgba(255, 235, 59, 0.3)\n    );\n  }\n  .hidden {\n    opacity: 0.2;\n  }\n  .evidence-tag {\n    cursor: pointer;\n    font-size: 80%;\n    white-space: nowrap;\n    margin-left: 0.5rem;\n    border-radius: 0.5rem;\n    background-color: #f1f1f1;\n    padding: 0.25rem 0.5rem;\n    color: #3a343a;\n  }\n  .evidence-tag__label {\n    padding-left: 0.25rem;\n    text-transform: capitalize;\n  }\n  .svg-colour-reviewed {\n    fill: #c39b00;\n  }\n  .svg-colour-unreviewed {\n    fill: #c0c0c0;\n  }\n\n  .protvista-datatable__child-item {\n    display: flex;\n  }\n\n  .protvista-datatable__child-item__title {\n    font-weight: 700;\n    flex-basis: 10vw;\n    flex-grow: 0;\n    margin-right: 1rem;\n  }\n\n  .protvista-datatable__child-item__content {\n  }\n']);return c=function(){return t},t}var s=Object(r.b)(c()),l=n(702),u=n.n(l),h=n(703),f=n.n(h);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(){var t=C(["\n                        <td>\n                          ","\n                        </td>\n                      "]);return y=function(){return t},t}function v(){var t=C(["\n                        <td />\n                      "]);return v=function(){return t},t}function m(){var t=C(['\n                        <td\n                          class="protvista-datatable__child-toggle"\n                          @click="','"\n                        >\n                          ',"\n                        </td>\n                      "]);return m=function(){return t},t}function _(){var t=C(["\n                <tr\n                  data-id=","\n                  class=",'\n                  @click="','"\n                >\n                  ',"\n                  ","\n                </tr>\n                ","\n              "]);return _=function(){return t},t}function w(){var t=C(["\n                    <th>","</th>\n                  "]);return w=function(){return t},t}function O(){var t=C(['\n      <div\n        class="protvista-datatable-container"\n        style="height:','rem"\n      >\n        <table>\n          <thead>\n            <tr>\n              <th></th>\n              ',"\n            </tr>\n          </thead>\n          <tbody>\n            ","\n          </tbody>\n        </table>\n      </div>\n    "]);return O=function(){return t},t}function j(){var t=C([""]);return j=function(){return t},t}function k(){var t=C([""]);return k=function(){return t},t}function S(){var t=C(['\n                  <div class="protvista-datatable__child-item">\n                    <div class="protvista-datatable__child-item__title">\n                      ','\n                    </div>\n                    <div class="protvista-datatable__child-item__content">\n                      ',"\n                    </div>\n                  </div>\n                "]);return S=function(){return t},t}function E(){var t=C(['\n      <tr class="child-row">\n        <td\n          colspan="','"\n        >\n          ',"\n        </td>\n      </tr>\n    "]);return E=function(){return t},t}function C(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function x(t){return function(t){if(Array.isArray(t))return L(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t,e,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=D(t);if(e){var i=D(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return F(this,n)}}function F(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?T(t):e}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(h,t);var e,n,c,l=R(h);function h(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(t=l.call(this)).height=25,t.visibleChildren=[],t.noScrollToRow=!1,t.noDeselect=!1,t.eventHandler=t.eventHandler.bind(T(t)),t.scrollFilter=new o.b(T(t)),t.wheelListener=function(e){return t.scrollFilter.wheel(e)},t}return e=h,c=[{key:"processData",value:function(t){return t.map((function(t){return b(b({},t),{},{start:t.start?t.start:t.begin})})).sort((function(t,e){return t.start-e.start})).map((function(t){return b(b({},t),{},{protvistaFeatureId:t.protvistaFeatureId||Object(i.a)()})}))}},{key:"isWithinRange",value:function(t,e,n,r){return!n&&e===Number(r)||!r&&t===Number(n)||t<=n&&e>=r}},{key:"isOutside",value:function(t,e,n,r){return t>r||e<n}},{key:"properties",get:function(){return{data:{type:Object},highlight:{converter:function(t){return t&&"null"!==t?t.split(":").map((function(t){return Number(t)})):null}},height:{type:Number},columns:{type:Object},displayStart:{type:Number},displayEnd:{type:Number},visibleChildren:{type:Array},selectedid:{type:String},rowClickEvent:{type:Function},noScrollToRow:{type:Boolean},noDeselect:{type:Boolean}}}},{key:"styles",get:function(){return s}}],(n=[{key:"connectedCallback",value:function(){var t=this;P(D(h.prototype),"connectedCallback",this).call(this),this.addEventListener("load",(function(e){Array.from(t.children).includes(e.target)&&(t.data=h.processData(e.detail.payload.features))})),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this.noDeselect||document.addEventListener("click",this.eventHandler),this.classList.add("feature"),this.hasAttribute("filter-scroll")&&document.addEventListener("wheel",this.wheelListener,{capture:!0})}},{key:"disconnectedCallback",value:function(){P(D(h.prototype),"disconnectedCallback",this).call(this),this.manager&&this.manager.unregister(this),document.removeEventListener("click",this.eventHandler),document.removeEventListener("wheel",this.wheelListener)}},{key:"eventHandler",value:function(t){t.target.closest("protvista-datatable")||t.target.closest(".feature")||(this.selectedid=null)}},{key:"handleClick",value:function(t,e){if(t.target.parentNode){var n=e.start,r=e.end,i="function"==typeof this.rowClickEvent&&this.rowClickEvent(e)||{};this.selectedid=t.target.parentNode.dataset.id,n&&r&&(i.highlight="".concat(n,":").concat(r)),this.dispatchEvent(new CustomEvent("change",{detail:i,bubbles:!0,cancelable:!0}))}}},{key:"getStyleClass",value:function(t,e,n){var r="";return this.selectedid&&this.selectedid===t&&(r="".concat(r," active")),this.displayStart&&this.displayEnd&&h.isOutside(this.displayStart,this.displayEnd,e,n)&&(r="".concat(r," hidden")),this.highlight&&h.isWithinRange(this.highlight[0],this.highlight[1],e,n)&&(r="".concat(r," overlapped")),r}},{key:"hasChildData",value:function(t,e){var n=this;return t.some((function(t){return n.columns[t].resolver(e)}))}},{key:"toggleVisibleChild",value:function(t){this.visibleChildren.includes(t)?this.visibleChildren=this.visibleChildren.filter((function(e){return e!==t})):this.visibleChildren=[].concat(x(this.visibleChildren),[t])}},{key:"scrollIntoView",value:function(){this.selectedid&&this.shadowRoot.querySelector('[data-id="'.concat(this.selectedid,'"]')).scrollIntoView({behavior:"smooth",block:"center"})}},{key:"getChildRow",value:function(t,e){var n=this;return Object(r.c)(E(),Object.values(this.columns).filter((function(t){return!t.child})).length+1,t.map((function(t){return n.columns[t].resolver(e)?Object(r.c)(S(),n.columns[t].label,n.columns[t].resolver(e)):Object(r.c)(k())})))}},{key:"render",value:function(){var t=this;if(!this.data||!this.columns)return Object(r.c)(j());var e=Object.keys(this.columns).filter((function(e){return t.columns[e].child})),n=Object.values(this.columns).filter((function(t){return!t.child&&!1!==t.display}));return Object(r.c)(O(),this.height,n.map((function(t){return Object(r.c)(w(),t.label)})),this.data.map((function(i){var o=t.hasChildData(e,i);return Object(r.c)(_(),i.protvistaFeatureId,t.getStyleClass(i.protvistaFeatureId,i.start,i.end),(function(e){return t.handleClick(e,i)}),o?Object(r.c)(m(),(function(){return t.toggleVisibleChild(i.protvistaFeatureId)}),t.visibleChildren.includes(i.protvistaFeatureId)?Object(a.a)(f.a):Object(a.a)(u.a)):Object(r.c)(v()),n.map((function(t){return Object(r.c)(y(),t.resolver(i))})),o&&t.visibleChildren.includes(i.protvistaFeatureId)?t.getChildRow(e,i):"")})))}},{key:"updated",value:function(){this.noScrollToRow||this.scrollIntoView()}},{key:"data",set:function(t){var e=this._data;this._data=h.processData(t),this.requestUpdate("data",e)},get:function(){return this._data}}])&&A(e.prototype,n),c&&A(e,c),h}(r.a);e.a=N},790:function(t,e){t.exports='<h1 id="protvista-datatable">protvista-datatable</h1>\n<p><a href="https://www.npmjs.com/package/protvista-datatable"><img src="https://img.shields.io/npm/v/protvista-datatable.svg" alt="Published on NPM"></a></p>\n<p>This component can be used to display a table of features.</p>\n<p>Wrapping it within <code>&lt;protvista-manager&gt;</code> will allow highlighting of features as well as hidding features which are out of the display when zooming.</p>\n<p><a href="https://ebi-webcomponents.github.io/nightingale/#/datatable">Demo</a></p>\n<h2 id="usage">Usage</h2>\n<pre><code class="language-html">&lt;protvista-datatable /&gt;</code></pre>\n<h2 id="styling">Styling</h2>\n<p><code>--protvista-datatable__hover</code>: the background color of a row on mouse over</p>\n<p><code>--protvista-datatable__active</code>: the background color of a row within a highlighted region</p>\n<p><code>--protvista-datatable__active--clicked</code>: the background color of a clicked row</p>\n<h2 id="api-reference">API Reference</h2>\n<h3 id="properties">Properties</h3>\n<h4 id="data-object"><code>data: Object</code></h4>\n<p>The data to display. <code>protvistaFeatureId</code> can be used as an attribute of the <code>data</code> object to provide an id for each row. To sort rows by position the <code>data</code> object must have either <code>start</code> or <code>begin</code> as attributes.</p>\n<h4 id="columns-object"><code>columns: Object</code></h4>\n<p>The definition used to display columns. It takes the following form:</p>\n<pre><code class="language-Javascript">const columns = {\n  column1: {\n    label: &quot;My first column&quot;,\n    resolver: d =&gt; d[&quot;column_name&quot;] //this is used to resolve what to display in the column\n  }\n};</code></pre>\n<h4 id="displaystart-number-optional"><code>displaystart: number (optional)</code></h4>\n<p>The start position of the selected region.</p>\n<h4 id="displayend-number-optional"><code>displayend: number (optional)</code></h4>\n<p>The end position of the selected region.</p>\n<h4 id="highlight-string-optional"><code>highlight: string (optional)</code></h4>\n<p>A comma separated list of regions to highlight.</p>\n<p>Each region follows the format: <code>[start]:[end]</code>, where both <code>[start]</code> and <code>[end]</code> are optional numbers.</p>\n<h3 id="selectedid-string-optional"><code>selectedid: string (optional)</code></h3>\n<p>The row id to select. Row ids are attributed based on the <code>protvistaFeatureId</code> attribute in each data point. These are added to the data in the various adapters.</p>\n<h3 id="height-number-optional"><code>height: number (optional)</code></h3>\n<p>The height of the table (in <code>rem</code>)</p>\n<h3 id="rowclickevent-function-optional"><code>rowClickEvent: function (optional)</code></h3>\n<p>A callback which will fire when a row is clicked. The data object for the clicked row will be provided in the callback.</p>\n<h3 id="noscrolltorow-boolean-false"><code>noScrollToRow: boolean (false)</code></h3>\n<p>Don&#39;t scroll to row if it has been selected</p>\n<h3 id="nodeselect-boolean-false"><code>noDeselect: boolean (false)</code></h3>\n<p>Don&#39;t de-select row if clicking outside of table</p>\n'}}]);