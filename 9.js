(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{161:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),o=n(587),a=n(578),s=n(577),c=n(110),l=n(49),u=n(705),h=n.n(u),f=n(618),p=n(706),d=n(638);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,m(e).apply(this,arguments))}var n,u,g;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,r["Component"]),n=e,(u=[{key:"componentDidMount",value:function(){document.querySelector("#track1").data=f,document.querySelector("#track2").data=f,document.querySelector("#track3").data=f,document.querySelector("#track4").data=p,document.querySelector("#track5").data=d}},{key:"render",value:function(){return Object(c.a)("protvista-feature-adapter",a.a),Object(c.a)("protvista-track",s.b),Object(c.a)("data-loader",o.a),i.a.createElement(r.Fragment,null,i.a.createElement(l.default,{content:h.a}),i.a.createElement("h2",null,"Track with data-loader"),i.a.createElement("protvista-track",{length:"770",displaystart:"1",displayend:"770","tooltip-event":"click"},i.a.createElement("protvista-feature-adapter",{id:"adapter1"},i.a.createElement("data-loader",null,i.a.createElement("source",{src:"https://www.ebi.ac.uk/proteins/api/features/P05067?categories=PTM"})))),i.a.createElement("h2",null,"Track with set data"),i.a.createElement("protvista-track",{id:"track1",width:"1020",length:"223",displaystart:"1",displayend:"223",color:"red",highlight:"20:50,40:80"}),i.a.createElement("protvista-track",{id:"track2",width:"1020",length:"223",displaystart:"100",displayend:"200",highlightstart:"23",highlightend:"45",color:"green",layout:"non-overlapping"}),i.a.createElement("protvista-track",{id:"track3",width:"1020",length:"223",displaystart:"110",displayend:"210",highlightstart:"23",highlightend:"45"}),i.a.createElement("protvista-track",{id:"track4",length:"3",displaystart:"1",displayend:"3",highlightstart:"2",highlightend:"2",layout:"non-overlapping",shape:"roundRectangle",height:"460"}),i.a.createElement("protvista-track",{id:"track5",length:"100",width:"1020",height:"100",displaystart:"1",displayend:"80",layout:"non-overlapping"}))}}])&&b(n.prototype,u),g&&b(n,g),e}();e.default=_},561:function(t,e,n){"use strict";var r=n(580),i=n(565);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a="[object Symbol]";e.a=function(t){return"symbol"==o(t)||Object(i.a)(t)&&Object(r.a)(t)==a}},562:function(t,e,n){"use strict";var r=n(561),i=1/0;e.a=function(t){if("string"==typeof t||Object(r.a)(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}},564:function(t,e,n){"use strict";var r=n(560),i=n(561);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.a=function(t,e){if(Object(r.a)(t))return!1;var n=o(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Object(i.a)(t))||s.test(t)||!a.test(t)||null!=e&&t in Object(e)}},567:function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},568:function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,i=n;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},569:function(t,e,n){"use strict";var r=n(570);e.a=function(t,e,n){var i=null==t?void 0:Object(r.a)(t,e);return void 0===i?n:i}},570:function(t,e,n){"use strict";var r=n(572),i=n(562);e.a=function(t,e){for(var n=0,o=(e=Object(r.a)(e,t)).length;null!=t&&n<o;)t=t[Object(i.a)(e[n++])];return n&&n==o?t:void 0}},571:function(t,e,n){"use strict";var r=n(595);var i=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r};var o=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var c=a[t?s:++i];if(!1===n(o[c],c,o))break}return e}}(),a=n(566);var s=function(t,e){return t&&o(t,e,a.a)},c=n(581);var l=function(t,e){return function(n,r){if(null==n)return n;if(!Object(c.a)(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(s);var u=function(t,e,n,r){return l(t,function(t,i,o){e(r,t,n(t),o)}),r},h=n(586),f=n(603);var p=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},d=n(600),g=1,b=2;var y=function(t,e,n,r,i,o){var a=n&g,s=t.length,c=e.length;if(s!=c&&!(a&&c>s))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var u=-1,h=!0,y=n&b?new f.a:void 0;for(o.set(t,e),o.set(e,t);++u<s;){var m=t[u],v=e[u];if(r)var _=a?r(v,m,u,e,t,o):r(m,v,u,t,e,o);if(void 0!==_){if(_)continue;h=!1;break}if(y){if(!p(e,function(t,e){if(!Object(d.a)(y,e)&&(m===t||i(m,t,n,r,o)))return y.push(e)})){h=!1;break}}else if(m!==v&&!i(m,v,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h},m=n(579),v=n(606),_=n(596);var w=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n},O=n(599),k=1,S=2,j="[object Boolean]",E="[object Date]",C="[object Error]",x="[object Map]",L="[object Number]",M="[object RegExp]",A="[object Set]",T="[object String]",F="[object Symbol]",P="[object ArrayBuffer]",N="[object DataView]",D=m.a?m.a.prototype:void 0,H=D?D.valueOf:void 0;var R=function(t,e,n,r,i,o,a){switch(n){case N:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!o(new v.a(t),new v.a(e)));case j:case E:case L:return Object(_.a)(+t,+e);case C:return t.name==e.name&&t.message==e.message;case M:case T:return t==e+"";case x:var s=w;case A:var c=r&k;if(s||(s=O.a),t.size!=e.size&&!c)return!1;var l=a.get(t);if(l)return l==e;r|=S,a.set(t,e);var u=y(s(t),s(e),r,i,o,a);return a.delete(t),u;case F:if(H)return H.call(t)==H.call(e)}return!1},W=n(607),I=1,q=Object.prototype.hasOwnProperty;var Z=function(t,e,n,r,i,o){var a=n&I,s=Object(W.a)(t),c=s.length;if(c!=Object(W.a)(e).length&&!a)return!1;for(var l=c;l--;){var u=s[l];if(!(a?u in e:q.call(e,u)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++l<c;){var d=t[u=s[l]],g=e[u];if(r)var b=a?r(g,d,u,e,t,o):r(d,g,u,t,e,o);if(!(void 0===b?d===g||i(d,g,n,r,o):b)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=t.constructor,m=e.constructor;y!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m)&&(f=!1)}return o.delete(t),o.delete(e),f},z=n(592),B=n(560),U=n(594),X=n(609),Y=1,G="[object Arguments]",V="[object Array]",$="[object Object]",J=Object.prototype.hasOwnProperty;var K=function(t,e,n,r,i,o){var a=Object(B.a)(t),s=Object(B.a)(e),c=a?V:Object(z.a)(t),l=s?V:Object(z.a)(e),u=(c=c==G?$:c)==$,f=(l=l==G?$:l)==$,p=c==l;if(p&&Object(U.a)(t)){if(!Object(U.a)(e))return!1;a=!0,u=!1}if(p&&!u)return o||(o=new h.a),a||Object(X.a)(t)?y(t,e,n,r,i,o):R(t,e,c,n,r,i,o);if(!(n&Y)){var d=u&&J.call(t,"__wrapped__"),g=f&&J.call(e,"__wrapped__");if(d||g){var b=d?t.value():t,m=g?e.value():e;return o||(o=new h.a),i(b,m,n,r,o)}}return!!p&&(o||(o=new h.a),Z(t,e,n,r,i,o))},Q=n(565);var tt=function t(e,n,r,i,o){return e===n||(null==e||null==n||!Object(Q.a)(e)&&!Object(Q.a)(n)?e!=e&&n!=n:K(e,n,r,i,t,o))},et=1,nt=2;var rt=function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var c=(s=n[i])[0],l=t[c],u=s[1];if(a&&s[2]){if(void 0===l&&!(c in t))return!1}else{var f=new h.a;if(r)var p=r(l,u,c,t,e,f);if(!(void 0===p?tt(u,l,et|nt,r,f):p))return!1}}return!0},it=n(575);var ot=function(t){return t==t&&!Object(it.a)(t)};var at=function(t){for(var e=Object(a.a)(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ot(i)]}return e};var st=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}};var ct=function(t){var e=at(t);return 1==e.length&&e[0][2]?st(e[0][0],e[0][1]):function(n){return n===t||rt(n,t,e)}},lt=n(569);var ut=function(t,e){return null!=t&&e in Object(t)},ht=n(572),ft=n(604),pt=n(605),dt=n(597),gt=n(562);var bt=function(t,e,n){for(var r=-1,i=(e=Object(ht.a)(e,t)).length,o=!1;++r<i;){var a=Object(gt.a)(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Object(dt.a)(i)&&Object(pt.a)(a,i)&&(Object(B.a)(t)||Object(ft.a)(t))};var yt=function(t,e){return null!=t&&bt(t,e,ut)},mt=n(564),vt=1,_t=2;var wt=function(t,e){return Object(mt.a)(t)&&ot(e)?st(Object(gt.a)(t),e):function(n){var r=Object(lt.a)(n,t);return void 0===r&&r===e?yt(n,t):tt(e,r,vt|_t)}},Ot=n(598);var kt=function(t){return function(e){return null==e?void 0:e[t]}},St=n(570);var jt=function(t){return function(e){return Object(St.a)(e,t)}};var Et=function(t){return Object(mt.a)(t)?kt(Object(gt.a)(t)):jt(t)};function Ct(t){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var xt=function(t){return"function"==typeof t?t:null==t?Ot.a:"object"==Ct(t)?Object(B.a)(t)?wt(t[0],t[1]):ct(t):Et(t)};var Lt=function(t,e){return function(n,r){var o=Object(B.a)(n)?i:u,a=e?e():{};return o(n,t,xt(r,2),a)}},Mt=Object.prototype.hasOwnProperty,At=Lt(function(t,e,n){Mt.call(t,n)?t[n].push(e):Object(r.a)(t,n,[e])});e.a=At},572:function(t,e,n){"use strict";var r=n(560),i=n(564),o=n(602),a="Expected a function";function s(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(a);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(s.Cache||o.a),n}s.Cache=o.a;var c=s,l=500;var u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/\\(\\)?/g,f=function(t){var e=c(t,function(t){return n.size===l&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(u,function(t,n,r,i){e.push(r?i.replace(h,"$1"):n||t)}),e}),p=n(579),d=n(583),g=n(561),b=1/0,y=p.a?p.a.prototype:void 0,m=y?y.toString:void 0;var v=function t(e){if("string"==typeof e)return e;if(Object(r.a)(e))return Object(d.a)(e,t)+"";if(Object(g.a)(e))return m?m.call(e):"";var n=e+"";return"0"==n&&1/e==-b?"-0":n};var _=function(t){return null==t?"":v(t)};e.a=function(t,e){return Object(r.a)(t)?t:Object(i.a)(t,e)?[t]:f(_(t))}},573:function(t,e,n){var r=n(584),i=n(585),o=i;o.v1=r,o.v4=i,t.exports=o},574:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.min,r=void 0===n?-1/0:n,i=e.max,o=void 0===i?1/0:i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.segments=[],this.max=o,this.min=r,this.regionString=null}var e,n,o;return e=t,(n=[{key:"encode",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map(function(n){var r=n.start,i=n.end;if(e)return"".concat(r,":").concat(i);var o=r===t.min?"":r,a=i===t.max?"":i;return"".concat(o,":").concat(a)}).join(",")}},{key:"decode",value:function(t){var e=this;void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map(function(t){var n=r(t.split(":"),3),i=n[0],o=n[1];if(void 0!==n[2])throw new Error("there should be at most 1 ':' per region. Region: ".concat(t));var a=i?Number(i):e.min,s=o?Number(o):e.max;if(a>s){var c=[s,a];a=c[0],s=c[1]}if(a<e.min&&(a=e.min),s>e.max&&(s=e.max),Number.isNaN(a))throw new Error("The parsed value of ".concat(i," is NaN. Region: ").concat(t));if(Number.isNaN(s))throw new Error("The parsed value of ".concat(o," is NaN. Region: ").concat(t));return{start:a,end:s}}):this.segments=[]}}])&&i(e.prototype,n),o&&i(e,o),t}();function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(t,e){return t?e?"".concat(t,",").concat(e):t:e},c=function(){function t(e){var n=e.element,r=e.min,i=e.max;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=n,this.region=new o({min:r,max:i}),this.fixedHighlight=null}var e,n,r;return e=t,(n=[{key:"setAttributesInElement",value:function(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight="".concat(this.element._highlightstart,":").concat(this.element._highlightend),this.region.decode(s(this.fixedHighlight,this.element._highlight))))}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this.element["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"changedCallBack",value:function(t,e){switch(t){case"highlightstart":case"highlightend":this.setFloatAttribute(t,e),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":"".concat(Math.max(this.region.min,this.element._highlightstart),":").concat(Math.min(this.region.max,this.element._highlightend));break;default:this.element._highlight=e}this.region.decode(s(this.fixedHighlight,this.element._highlight)),this.element.refresh()}},{key:"setFixedHighlight",value:function(t){this.fixedHighlight=t,this.region.decode(s(t,this.element._highlight)),this.element.refresh()}},{key:"appendHighlightTo",value:function(t){this.highlighted=t.append("g").attr("class","highlighted")}},{key:"updateHighlight",value:function(){var t=this,e=this.highlighted.selectAll("rect").data(this.region.segments);e.enter().append("rect").style("opacity",.5).attr("fill","rgba(255, 235, 59, 0.8)").style("pointer-events","none").merge(e).attr("height",this.element._height).attr("x",function(e){return t.element.getXFromSeqPosition(e.start)}).attr("width",function(e){return t.element.getSingleBaseWidth()*(e.end-e.start+1)}),e.exit().remove()}},{key:"max",set:function(t){this.region.max=t}}])&&a(e.prototype,n),r&&a(e,r),t}();function l(t){var e=document.createElement("div");return e.style.borderColor="",e.style.borderColor=t,""!==e.style.borderColor}var u=function(t){return t};function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.timeStampWheelOutside=0,this.resetScrollableTimeout=null}var e,n,r;return e=t,(n=[{key:"setElementScrollable",value:function(t){this.element.setAttribute("scrollable",t)}},{key:"startResetScrollableTimer",value:function(){var t=this;this.resetScrollableTimeout&&clearTimeout(this.resetScrollableTimeout),this.resetScrollableTimeout=setTimeout(function(){t.setElementScrollable(!0),t.resetScrollableTimeout=null},400)}},{key:"blockScroll",value:function(t){this.timeStampWheelOutside=t,this.setElementScrollable(!1),this.startResetScrollableTimer()}},{key:"isWheelEventInsideElement",value:function(t,e){var n=this.element.getBoundingClientRect(),r=n.height,i=n.width,o=n.x,a=n.y;return t>o&&e<o+i&&e>a&&e<a+r}},{key:"wheel",value:function(t){var e=t.x,n=t.y,r=t.timeStamp;this.isWheelEventInsideElement(e,n)?r<this.timeStampWheelOutside+400?this.blockScroll(r):this.setElementScrollable(!0):this.blockScroll(r)}}])&&h(e.prototype,n),r&&h(e,r),t}();n.d(e,"d",function(){return p}),n.d(e,"a",function(){return d}),n.d(e,"c",function(){return g}),n.d(e,"b",function(){return b});var p=c,d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n=[];if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var r=t.split(",").map(function(t){return t.split(":")});if(r.length<2)throw new Error("There should be at least 2 points to create a scale");e=r.map(function(t){var e=t[0].trim().toUpperCase();if(!l(e))throw new Error("The color '".concat(e," is not valid'"));return e}),n=r.map(function(t,e){var n=parseFloat(t[1]);if(Number.isNaN(n))throw new Error("The second part of every point should be a number. Error in point ".concat(e,": ").concat(t));return n})}return{range:e,domain:n}},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keyFormatter,r=void 0===n?u:n,i=e.valueFormatter,o=void 0===i?u:i;if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var a=t.split(",").map(function(t){return t.split(":")}),s={};return a.forEach(function(t){if(2!==t.length)throw new Error("Bad block: ".concat(t.join(":"),"\n The blocks of the string should follow the format KEY:VALUE"));s[r(t[0])]=o(t[1])}),s}return{}},b=f},577:function(t,e,n){"use strict";var r=n(563),i=n(608),o=n(581),a=n(580),s=n(560),c=n(565),l="[object String]";var u=function(t){return"string"==typeof t||!Object(s.a)(t)&&Object(c.a)(t)&&Object(a.a)(t)==l},h=n(575),f=n(561),p=NaN,d=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,b=/^0b[01]+$/i,y=/^0o[0-7]+$/i,m=parseInt;var v=function(t){if("number"==typeof t)return t;if(Object(f.a)(t))return p;if(Object(h.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(h.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(d,"");var n=b.test(t);return n||y.test(t)?m(t.slice(2),n?2:8):g.test(t)?p:+t},_=1/0,w=17976931348623157e292;var O=function(t){return t?(t=v(t))===_||t===-_?(t<0?-1:1)*w:t==t?t:0:0===t?t:0};var k=function(t){var e=O(t),n=e%1;return e==e?n?e-n:e:0},S=n(583);var j=function(t,e){return Object(S.a)(e,function(e){return t[e]})},E=n(566);var C=function(t){return null==t?[]:j(t,Object(E.a)(t))},x=Math.max;var L=function(t,e,n,r){t=Object(o.a)(t)?t:C(t),n=n&&!r?k(n):0;var a=t.length;return n<0&&(n=x(a+n,0)),u(t)?n<=a&&t.indexOf(e,n)>-1:!!a&&Object(i.a)(t,e,n)>-1},M=n(571),A=n(590),T=n(591),F=n(582);function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var N=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"isContinuous",value:function(t){return"bridge"!==(t=t.toLowerCase())}}],(n=[{key:"getFeatureShape",value:function(t,e,n,r){return r=r||"rectangle",this._ftLength=n,this._ftHeight=e,this._ftWidth=t*n,"function"!=typeof this["_"+r]&&(r="rectangle"),this["_"+r]()}},{key:"_rectangle",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+"Z"}},{key:"_roundRectangle",value:function(){return"M6,0h"+(this._ftWidth-12)+",0a6,6 0 0 1 6,6v"+(this._ftHeight-12)+"a6,6 0 0 1 "+-6+",6h"+(12-this._ftWidth)+"a6,6 0 0 1 "+-6+","+-6+"v"+(12-this._ftHeight)+"a6,6 0 0 1 6,"+-6+"Z"}},{key:"_bridge",value:function(){return 1!==this._ftLength?"M0,"+this._ftHeight+"L0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L"+this._ftWidth+",2L0,2Z":"M0,"+this._ftHeight+"L0,"+this._ftHeight/2+"L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth/2+",0L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight+"Z"}},{key:"_getMiddleLine",value:function(t){return"M0,"+t+"L"+this._ftWidth+","+t+"Z"}},{key:"_diamond",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(t+5)+",5L"+t+",10L"+(t-5)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth):e+"Z"}},{key:"_chevron",value:function(){var t=this._ftWidth/2,e="M"+t+",5L"+(5+t)+",0L"+(5+t)+",5L"+t+",10L"+(-5+t)+",5L"+(-5+t)+",0";return 1!==this._ftLength?e+"L"+t+",5"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_catFace",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",0L"+(-5+t)+",6L"+(-2+t)+",10L"+(2+t)+",10L"+(5+t)+",6L"+(5+t)+",0L"+(2+t)+",4L"+(-2+t)+",4";return 1!==this._ftLength?e+"M"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_triangle",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(5+t)+",10L"+(-5+t)+",10";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_wave",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",5A2.5,5 0 1,1 "+t+",5A2.5,5 0 1,0 "+(5+t)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getPolygon",value:function(t){for(var e="M ",n=this._ftWidth/2,r=0;r<t;r++)e+=5*Math.cos(2*Math.PI*r/t)+n+","+(5*Math.sin(2*Math.PI*r/t)+5)+" ";return 1!==this._ftLength?e+" "+(5*Math.cos(0)+n)+","+(5*Math.sin(0)+5)+" "+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_hexagon",value:function(){return this._getPolygon(6)}},{key:"_pentagon",value:function(){return this._getPolygon(5)}},{key:"_circle",value:function(){var t=this._ftWidth/2,e=Math.sqrt(10/Math.PI),n="M"+t+",0A"+e+","+e+" 0 1,1 "+t+",10A"+e+","+e+" 0 1,1 "+t+",0";return 1!==this._ftLength?n+this._getMiddleLine(5,this._ftWidth)+"Z":n+"Z"}},{key:"_arrow",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-1+t)+",0L"+(-5+t)+",4L"+(-1+t)+","+this._ftHeight+"L"+t+","+this._ftHeight+"L"+(4+t)+",4";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_doubleBar",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-5+t)+",10L"+t+",10L"+(5+t)+",0";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getBrokenEnd",value:function(){var t=this._ftHeight/4;return"L"+(this._ftWidth-t)+","+t+"L"+this._ftWidth+","+2*t+"L"+(this._ftWidth-t)+","+3*t+"L"+this._ftWidth+","+this._ftHeight}},{key:"_getBrokenStart",value:function(){var t=this._ftHeight/4;return"L"+t+","+3*t+"L0,"+2*t+"L"+t+","+t}},{key:"_discontinuosStart",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuos",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuosEnd",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+"Z"}},{key:"_helix",value:function(){for(var t=2.5,e=2.5,n=Math.round(this._ftWidth/5),r="",i=0;i<n;i++){r+="M"+(-2.5+e)+","+this._ftHeight+" C"+(e+t)+",7.5 "+(2.5+e)+","+t+" "+e+", 0 C"+(e-t)+","+t+" "+e+",7.5 "+(2.5+e)+","+this._ftHeight,e+=5}return r}},{key:"_strand",value:function(){var t=0;this._ftWidth>5&&(t=this._ftWidth-5);var e=this._ftHeight/4;return"M0,"+e+"L"+t+","+e+"L"+t+","+3*e+"L0,"+3*e+"L0,"+e+("M"+t+",0L"+this._ftWidth+","+2*e+"L"+t+","+this._ftHeight+"Z")}}])&&P(e.prototype,n),r&&P(e,r),t}();function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var H=function(){function t(e){var n=e.layoutHeight,r=e.padding,i=void 0===r?1:r,o=e.minHeight,a=void 0===o?17:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._padding=i,this._minHeight=a,this._layoutHeight=n}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this._features=t}},{key:"getFeatureYPos",value:function(){var t=this.getFeatureHeight();return this._layoutHeight/2-t/2}},{key:"getFeatureHeight",value:function(){return Math.min(this._layoutHeight,this._minHeight)-this._padding}}])&&D(e.prototype,n),r&&D(e,r),t}();function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var z=function(t,e){return e.some(function(e){return n=t,r=e,!(Number(r.start)>Number(n.end)||Number(r.end)<Number(n.start));var n,r})},B=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=I(this,q(e).call(this,t))).featuresMap=new Map,n._rowHeight=0,n._rows=[],n._minHeight=15,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(e,H),n=e,(r=[{key:"init",value:function(t){var e=this;t.forEach(function(t){var n=e._rows.findIndex(function(e){return!z(t,e)});n>=0?(e._rows[n].push(t),e.featuresMap.set(t,n)):(e._rows.push([t]),e.featuresMap.set(t,e._rows.length-1))}),this._rowHeight=Math.min(this._layoutHeight/this._rows.length,this._minHeight)}},{key:"getOffset",value:function(){return this._rows.length*this._rowHeight<this._layoutHeight?this._layoutHeight/2-this._rows.length*this._rowHeight/2:0}},{key:"getFeatureYPos",value:function(t){var e=this.featuresMap.get(t);return this.getOffset()+this._rowHeight*e+2*this._padding}},{key:"getFeatureHeight",value:function(){return this._rowHeight-2*this._padding}}])&&W(n.prototype,r),i&&W(n,i),e}(),U={CHAIN:{name:"chain",label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},TRANSIT:{name:"transit peptide",label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},INIT_MET:{name:"initiator methionine",label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},PROPEP:{name:"propeptide",label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},PEPTIDE:{name:"peptide",label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},SIGNAL:{name:"signal peptide",label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},HELIX:{name:"helix",label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},STRAND:{name:"strand",label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},TURN:{name:"turn",label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},DISULFID:{name:"disulfide bond",label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},CROSSLNK:{name:"cross-link",label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},REGION:{name:"region of interest",label:"Region of interest",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},COILED:{name:"coiled-coil region",label:"Coiled-coil region",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},MOTIF:{name:"short sequence motif",label:"Short sequence motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},REPEAT:{name:"repeat",label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},CA_BIND:{name:"calcium-binding region",label:"Calcium-binding region",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},DNA_BIND:{name:"DNA-binding region",label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},DOMAIN:{name:"other domain of interest",label:"Other domain of interest",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},ZN_FING:{name:"zinc finger region",label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},NP_BIND:{name:"nucleotide-binding region",label:"Nucleotide-binding region",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},METAL:{name:"metal ion-binding site",label:"Metal ion-binding site",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},SITE:{name:"other site of interest",label:"Other site of interest",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},BINDING:{name:"other binding site",label:"Other binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},ACT_SITE:{name:"active site",label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},MOD_RES:{name:"Post-translationally modified residue",label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},LIPID:{name:"lipid moiety-binding region",label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},CARBOHYD:{name:"glycosylation site",label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},COMPBIAS:{name:"compositionally biased region",label:"Compositionally biased region",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},CONFLICT:{name:"sequence conflict",label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},NON_CONS:{name:"non-consecutive residues",label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},NON_TER:{name:"non-terminal residue",label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},UNSURE:{name:"unsure residue",label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},NON_STD:{name:"non-standard amino acid",label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},MUTAGEN:{name:"mutagenesis site",label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},TOPO_DOM:{name:"topological domain",label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},TRANSMEM:{name:"transmembrane region",label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},INTRAMEM:{name:"intramembrane region",label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},VAR_SEQ:{name:"splice variant",label:"Splice variant",tooltip:"",shape:"rectangle",color:"#CC11CC"},VARIANT:{name:"sequence variant",label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},UNIQUE:{name:"unique",label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},NON_UNIQUE:{name:"non-unique",label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},ANTIGEN:{name:"antigen",label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},PDBE_COVER:{name:"pdbe coverage",label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}},X=function(t){if(U[t.toUpperCase()])return U[t.toUpperCase()].shape;var e=Object.values(U).find(function(e){return e.name.toUpperCase()===t.toUpperCase()});return e?e.shape:"rectangle"},Y=function(t){if(U[t.toUpperCase()])return U[t.toUpperCase()].color;var e=Object.values(U).find(function(e){return e.name.toUpperCase()===t.toUpperCase()});return e||console.log(t),e?e.color:"black"};function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function J(t,e){return!e||"object"!==G(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function K(t,e,n){return(K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Q(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",function(){return H});var et=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),J(this,Q(e).apply(this,arguments))}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(e,F["a"]),n=e,o=[{key:"normalizeLocations",value:function(t){return t.map(function(t){var e=t.locations,n=t.start,r=t.end;return e?t:Object.assign(t,{locations:[{fragments:[{start:n,end:r}]}]})})}},{key:"observedAttributes",get:function(){return F.a.observedAttributes.concat(["highlight","color","shape","filters"])}}],(i=[{key:"getLayout",value:function(){return"non-overlapping"===String(this.getAttribute("layout")).toLowerCase()?new B({layoutHeight:this._height}):new H({layoutHeight:this._height})}},{key:"connectedCallback",value:function(){var t=this;K(Q(e.prototype),"connectedCallback",this).call(this),this._color=this.getAttribute("color"),this._shape=this.getAttribute("shape"),this._featureShape=new N,this._layoutObj=this.getLayout(),this._data&&this._createTrack(),this.addEventListener("load",function(e){L(t.children,e.target)&&(t.data=e.detail.payload)})}},{key:"processData",value:function(t){this._originalData=e.normalizeLocations(t)}},{key:"_getFeatureColor",value:function(t){return t.color?t.color:t.feature&&t.feature.color?t.feature.color:this._color?this._color:t.type?Y(t.type):t.feature&&t.feature.type?Y(t.feature.type):"black"}},{key:"_getFeatureFillColor",value:function(t){return t.fill?t.fill:t.feature&&t.feature.fill?t.feature.fill:this._getFeatureColor(t)}},{key:"_getShape",value:function(t){return t.shape?t.shape:t.feature&&t.feature.shape?t.feature.shape:this._shape?this._shape:t.type?X(t.type):t.feature&&t.feature.type?X(t.feature.type):"rectangle"}},{key:"_createTrack",value:function(){this._layoutObj.init(this._data),Object(r.l)(this).selectAll("div").remove(),this.svg=Object(r.l)(this).append("div").style("line-height",0).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg),this.seq_g=this.svg.append("g").attr("class","sequence-features"),this._createFeatures()}},{key:"_createFeatures",value:function(){var t=this;this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data),this.locations=this.featuresG.enter().append("g").attr("class","feature-group").attr("id",function(t){return"g_".concat(t.accession)}).selectAll("g.location-group").data(function(t){return t.locations.map(function(e){return Object.assign({},e,{feature:t})})}).enter().append("g").attr("class","location-group"),this.features=this.locations.selectAll("g.fragment-group").data(function(t){return t.fragments.map(function(e){return Object.assign({},e,{feature:t.feature})})}).enter().append("path").attr("class",function(e){return"".concat(t._getShape(e)," feature")}).attr("d",function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e))}).attr("transform",function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")}).attr("fill",function(e){return t._getFeatureFillColor(e)}).attr("stroke",function(e){return t._getFeatureColor(e)}).style("fill-opacity",function(t){var e=t.feature;return e.opacity?e.opacity:.9}).style("stroke-opacity",function(t){var e=t.feature;return e.opacity?e.opacity:.9}).call(this.bindEvents,this)}},{key:"_applyFilters",value:function(){var t=this;if(!this._filters||this._filters.length<=0)this._data=this._originalData;else{var e=Object(M.a)(this._filters,"category"),n=Object.values(e).map(function(e){var n=e.map(function(e){return e.filterFn(t._originalData)});return A.a.apply(void 0,V(n))}),r=T.a.apply(void 0,V(n));this._data=r}}},{key:"refresh",value:function(){var t=this;this.xScale&&this.seq_g&&(this.features=this.seq_g.selectAll("path.feature").data(this._data.reduce(function(t,e){return t.concat(e.locations.reduce(function(t,n){return t.concat(n.fragments.map(function(t){return Object.assign({},t,{feature:e})}))},[]))},[])),this.features.attr("d",function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e))}).attr("transform",function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")}),this._updateHighlight())}},{key:"_updateHighlight",value:function(){this.trackHighlighter.updateHighlight()}},{key:"data",set:function(t){this.processData(t),this._applyFilters(),this._layoutObj=this.getLayout(),this._createTrack()}},{key:"filters",set:function(t){this._filters=t,this._applyFilters(),this._createTrack()}}])&&$(n.prototype,i),o&&$(n,o),e}();e.b=et},578:function(t,e,n){"use strict";var r=n(573),i=[{name:"ECO:0000269",description:"Manual assertion based on experiment",shortDescription:"Publication",acronym:"EXP",isManual:!0},{name:"ECO:0000303",description:"Manual assertion based on opinion",shortDescription:"Publication",acronym:"NAS",isManual:!0},{name:"ECO:0000305",description:"Manual assertion inferred by curator",shortDescription:"Curated",acronym:"IC",isManual:!0},{name:"ECO:0000250",description:"Manual assertion inferred from sequence similarity",shortDescription:"By similarity",acronym:"ISS",isManual:!0},{name:"ECO:0000255",description:"Manual assertion according to rules",shortDescription:"Sequence Analysis",acronym:"ISM",isManual:!0},{name:"ECO:0000244",description:"Manual assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXM",isManual:!0},{name:"ECO:0000312",description:"Manual assertion inferred from database entries",shortDescription:"Imported",acronym:"MI",isManual:!0},{name:"ECO:0000256",description:"Automatic assertion according to rules",shortDescription:"Automatic annotation",acronym:"AA"},{name:"ECO:0000259",description:"Automatic assertion inferred from signature match",shortDescription:"Automatic annotation",acronym:"AA"},{name:"ECO:0000213",description:"Automatic assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXA"},{name:"ECO:0000313",description:"Automatic assertion inferred from database entries",shortDescription:"Imported",acronym:"AI"}];function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function(t){return t.map(function(t){var e={};return t.begin&&(e.start=t.begin),function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(n,!0).forEach(function(e){a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,{},e)})},c=function(t){return t?"\n      <ul>".concat(t.map(function(t){var e,n=i.find(function(e){return e.name===t.code});return n?"<li title='".concat(n.description,'\' style="padding: .25rem 0">').concat(n.shortDescription,":&nbsp;").concat(t.source?(e=t.source).name.toLowerCase()==="PubMed".toLowerCase()?"".concat(e.id,"&nbsp;(<a href='").concat(e.url,"' style=\"color:#FFF\" target='_blank'>").concat(e.name,"</a>&nbsp;<a href='").concat(e.alternativeUrl,"' style=\"color:#FFF\" target='_blank'>EuropePMC</a>)"):"&nbsp;<a href='".concat(e.url,"' style=\"color:#FFF\" target='_blank'>").concat(e.id,"</a>&nbsp;(").concat(e.name,")"):"","</li>"):""}).join(""),"</ul>\n    "):""},l=function(t){return"<ul>".concat(t.map(function(t){return'<li style="padding: .25rem 0">'.concat(t.name," ").concat(t.url?'<a href="'.concat(t.url,'" style="color:#FFF" target="_blank">').concat(t.id,"</a>"):"".concat(t.name," ").concat(t.id),"</li>")}).join(""),"</ul>")},u=function(t){var e=c(t.evidences);return"\n      ".concat(t.description?"<h5>Description</h5><p>".concat(t.description,"</p>"):"","\n      ").concat(t.matchScore?"<h5>Match score</h5><p>".concat(t.matchScore,"%</p>"):"","\n      ").concat(t.ftId?"<h5>Feature ID</h5><p>".concat(t.ftId,"</p>"):"","\n      ").concat(t.alternativeSequence?"<h5>Alternative sequence</h5><p>".concat(t.alternativeSequence,"</p>"):"","\n      ").concat(e?"<h5>Evidence</h5>".concat(e):"","\n      ").concat(t.xrefs?"<h5>Cross-references</h5>".concat(l(t.xrefs)):"","\n        ")};function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){var e="function"==typeof Map?new Map:void 0;return(d=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return g(t,arguments,y(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,t)})(t)}function g(t,e,n){return(g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&b(i,n.prototype),i}).apply(null,arguments)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"b",function(){return l}),n.d(e,"c",function(){return c});var _=function(t){var e=[],n=t.features;return n&&n.length>0&&(e=n.map(function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(n,!0).forEach(function(e){v(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,{tooltipContent:u(t),protvistaFeatureId:Object(r.v1)()})}),e=s(e)),e},w=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=p(this,y(e).call(this)))._adaptedData=[],t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,d(HTMLElement)),n=e,(r=[{key:"connectedCallback",value:function(){this.subscribers=this.getAttribute("subscribers"),this._filters=this.getAttribute("filters")?this.getAttribute("filters").split(","):[],this._addLoaderListeners()}},{key:"parseEntry",value:function(t){this._adaptedData=_(t)}},{key:"filterData",value:function(){var t=this;Array.isArray(this._adaptedData)&&this._filters.length>0&&(this._adaptedData=this._adaptedData.filter(function(e){return t._filters.includes(e.type)}))}},{key:"_setSubscriberData",value:function(){var t=this;this.subscribers.forEach(function(e){var n=document.querySelector(e);n?n.data=t._adaptedData:console.error("Element with id '".concat(e,"' not found"))})}},{key:"_emitEvent",value:function(t){this.parseEntry(t),this.filterData(),this.subscribers&&this._setSubscriberData(),this.dispatchEvent(new CustomEvent("load",{detail:{payload:this._adaptedData},bubbles:!0,cancelable:!0}))}},{key:"_addLoaderListeners",value:function(){var t=this;this.addEventListener("load",function(e){if(e.target!==t){e.stopPropagation();try{if(e.detail.payload.errorMessage)throw e.detail.payload.errorMessage;t._emitEvent(e.detail.payload)}catch(e){t.dispatchEvent(new CustomEvent("error",{detail:e,bubbles:!0,cancelable:!0}))}}})}},{key:"data",set:function(t){this._emitEvent(t)}},{key:"subscribers",set:function(t){t&&(this._subscribers=t.split(","))},get:function(){return this._subscribers}},{key:"adaptedData",get:function(){return this._adaptedData}}])&&f(n.prototype,r),i&&f(n,i),e}();e.a=w},582:function(t,e,n){"use strict";var r=n(563),i=n(574),o=n(601);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return h(t,arguments,p(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)})(t)}function h(t,e,n){return(h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&f(i,n.prototype),i}).apply(null,arguments)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r=p(e).call(this),t=!r||"object"!==a(r)&&"function"!=typeof r?l(n):r,e._polyfillElementClosest(),t._updateScaleDomain=t._updateScaleDomain.bind(l(t)),t._initZoom=t._initZoom.bind(l(t)),t.zoomed=t.zoomed.bind(l(t)),t._applyZoomTranslation=t.applyZoomTranslation.bind(l(t)),t._resetEventHandler=t._resetEventHandler.bind(l(t));var o=!1;return t.applyZoomTranslation=function(){o||(o=!0,requestAnimationFrame(function(){o=!1,t._applyZoomTranslation()}))},t._onResize=t._onResize.bind(l(t)),t._listenForResize=t._listenForResize.bind(l(t)),t.trackHighlighter=new i.d({element:l(t),min:1}),t.scrollFilter=new i.b(l(t)),t.wheelListener=function(e){return t.scrollFilter.wheel(e)},t}var n,h,d;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,u(HTMLElement)),n=e,d=[{key:"_getClickCoords",value:function(){return r.e?[r.e.pageX,r.e.pageY]:null}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"observedAttributes",get:function(){return["displaystart","displayend","length","highlight"]}}],(h=[{key:"connectedCallback",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=this.getAttribute("length")?parseFloat(this.getAttribute("length")):0,this._displaystart=this.getAttribute("displaystart")?parseFloat(this.getAttribute("displaystart")):1,this._displayend=this.getAttribute("displayend")?parseFloat(this.getAttribute("displayend")):this.length,this._height=this.getAttribute("height")?Number(this.getAttribute("height")):44,this._highlightEvent=this.getAttribute("highlight-event")?this.getAttribute("highlight-event"):"onclick",this.trackHighlighter.setAttributesInElement(this),this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this._initZoom(),this._listenForResize(),this.addEventListener("error",function(t){console.error(t)}),this.addEventListener("click",this._resetEventHandler),this.hasAttribute("filter-scroll")&&document.addEventListener("wheel",this.wheelListener,{capture:!0})}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro?this._ro.unobserve(this):window.removeEventListener("resize",this._onResize),this.removeEventListener("click",this._resetEventHandler),document.removeEventListener("wheel",this.wheelListener)}},{key:"getWidthWithMargins",value:function(){return this.width?this.width-this.margin.left-this.margin.right:0}},{key:"_updateScaleDomain",value:function(){this.xScale=Object(r.i)().domain([1,this._length+1]).range([0,this.getWidthWithMargins()])}},{key:"_initZoom",value:function(){var t=this;this._zoom=Object(r.m)().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).extent([[0,0],[this.getWidthWithMargins(),0]]).filter(function(){if(!(r.e instanceof WheelEvent))return!0;if(t.hasAttribute("scroll-filter")){var e=t.getAttribute("scrollable");if(e)return"true"===e}return!t.hasAttribute("use-ctrl-to-zoom")||r.e.ctrlKey}).on("zoom",this.zoomed)}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"attributeChangedCallback",value:function(t,e,n){if("null"===n&&(n=null),e!==n){if(t.startsWith("highlight"))return void this.trackHighlighter.changedCallBack(t,n);this.setFloatAttribute(t,n),"length"===t&&(this._updateScaleDomain(),this._originXScale=this.xScale.copy()),this.applyZoomTranslation()}}},{key:"zoomed",value:function(){if(this.xScale=r.e.transform.rescaleX(this._originXScale),!this.dontDispatch){var t=s(this.xScale.domain(),2),e=t[0],n=t[1];this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,e),displayend:Math.min(this.length,Math.max(n-1,e+1))},bubbles:!0,cancelable:!0}))}}},{key:"applyZoomTranslation",value:function(){if(this.svg&&this._originXScale){var t=Math.max(1,this.length/(1+this._displayend-this._displaystart)),e=-this._originXScale(this._displaystart);this.dontDispatch=!0,this.svg.call(this.zoom.transform,r.n.scale(t).translate(e,0)),this.dontDispatch=!1,this.refresh()}}},{key:"_onResize",value:function(){this.width=this.offsetWidth,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this.svg&&this.svg.attr("width",this.width),this._zoom.scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]),this.applyZoomTranslation()}},{key:"_listenForResize",value:function(){this._ro=new o.a(this._onResize),this._ro.observe(this)}},{key:"_resetEventHandler",value:function(t){t.target.closest(".feature")||this.dispatchEvent(this.createEvent("reset",null,!0))}},{key:"getXFromSeqPosition",value:function(t){return this.margin.left+this.xScale(t)}},{key:"getSingleBaseWidth",value:function(){return this.xScale(2)-this.xScale(1)}},{key:"createEvent",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;n&&(n=n.feature?n.feature:n);var l={eventtype:t,coords:e._getClickCoords(),feature:n,target:c};return i&&(n&&n.fragments?l.highlight=n.fragments.map(function(t){return"".concat(t.start,":").concat(t.end)}).join(","):r.e&&r.e.shiftKey&&this._highlight?l.highlight="".concat(this._highlight,",").concat(a,":").concat(s):l.highlight=a&&s?"".concat(a,":").concat(s):null),o&&(l.selectedid=n&&n.protvistaFeatureId),new CustomEvent("change",{detail:l,bubbles:!0,cancelable:!0})}},{key:"bindEvents",value:function(t,e){t.on("mouseover",function(t,n,r){e.dispatchEvent(e.createEvent("mouseover",t,"onmouseover"===e._highlightEvent,!1,t.start,t.end,r[n]))}).on("mouseout",function(){e.dispatchEvent(e.createEvent("mouseout",null,"onmouseover"===e._highlightEvent))}).on("click",function(t,n,r){e.dispatchEvent(e.createEvent("click",t,"onclick"===e._highlightEvent,!0,t.start,t.end,r[n]))})}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",set:function(t){this._height=t},get:function(){return this._height}},{key:"length",set:function(t){this._length=t,this.trackHighlighter.max=t},get:function(){return this._length}},{key:"xScale",get:function(){return this._xScale},set:function(t){this._xScale=t}},{key:"zoom",get:function(){return this._zoom}},{key:"svg",set:function(t){this._svg=t,t.call(this._zoom),this.applyZoomTranslation()},get:function(){return this._svg}},{key:"margin",get:function(){return{top:10,right:10,bottom:10,left:10}}},{key:"fixedHighlight",set:function(t){this.trackHighlighter.setFixedHighlight(t)}}])&&c(n.prototype,h),d&&c(n,d),e}();e.a=d},584:function(t,e,n){var r,i,o=n(567),a=n(568),s=0,c=0;t.exports=function(t,e,n){var l=e&&n||0,u=e||[],h=(t=t||{}).node||r,f=void 0!==t.clockseq?t.clockseq:i;if(null==h||null==f){var p=o();null==h&&(h=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:c+1,b=d-s+(g-c)/1e4;if(b<0&&void 0===t.clockseq&&(f=f+1&16383),(b<0||d>s)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=d,c=g,i=f;var y=(1e4*(268435455&(d+=122192928e5))+g)%4294967296;u[l++]=y>>>24&255,u[l++]=y>>>16&255,u[l++]=y>>>8&255,u[l++]=255&y;var m=d/4294967296*1e4&268435455;u[l++]=m>>>8&255,u[l++]=255&m,u[l++]=m>>>24&15|16,u[l++]=m>>>16&255,u[l++]=f>>>8|128,u[l++]=255&f;for(var v=0;v<6;++v)u[l+v]=h[v];return e||a(u)}},585:function(t,e,n){var r=n(567),i=n(568);t.exports=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[o+s]=a[s];return e||i(a)}},587:function(t,e,n){"use strict";var r=n(569);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return c(t,arguments,u(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,t)})(t)}function c(t,e,n){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l(i,n.prototype),i}).apply(null,arguments)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},p=new Map,d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Headers({accept:"application/json"}),n=p.get(t);if(n)return n;var r=f(void 0,void 0,void 0,regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.fetch(t,{headers:e});case 2:if((r=n.sent).ok){n.next=5;break}throw new Error("Request Failed: Status = ".concat(r.status,"; URI = ").concat(t,"; Time = ").concat(new Date));case 5:if(204!==r.status){n.next=7;break}return n.abrupt("return",{payload:null,headers:r.headers});case 7:return n.next=9,r.json();case 9:return i=n.sent,n.abrupt("return",{payload:i,headers:r.headers});case 11:case"end":return n.stop()}},n)}));return p.set(t,r),r.catch(function(){return p.delete(t)}),r},g=function(t){function e(){var t;return h(this,e),(t=a(this,u(e).call(this)))._data=null,t.selector=(t.getAttribute("selector")||"").trim()||function(t){return t},t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,s(HTMLElement)),n=e,c=[{key:"is",get:function(){return"data-loader"}}],(i=[{key:"fetch",value:function(){return f(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n,i,o,a,s,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(h=this.children,(e=Array.from(h).filter(function(t){return t.matches('source[src], script[type="application/json"]')})).length){t.next=3;break}return t.abrupt("return");case 3:n=[],o=!0,a=!1,s=void 0,t.prev=7,c=e[Symbol.iterator]();case 9:if(o=(l=c.next()).done){t.next=34;break}if(u=l.value,t.prev=11,!(u instanceof HTMLSourceElement)){t.next=24;break}return t.t0=Object,t.t1=Object,t.t2={},t.next=18,d(u.src);case 18:t.t3=t.sent,t.t4=t.t1.assign.call(t.t1,t.t2,t.t3),t.t5={srcElement:u,src:u.src},i=t.t0.assign.call(t.t0,t.t4,t.t5),t.next=25;break;case 24:i={payload:JSON.parse(u.textContent)};case 25:return t.abrupt("break",34);case 28:t.prev=28,t.t6=t.catch(11),n.push(t.t6);case 31:o=!0,t.next=9;break;case 34:t.next=40;break;case 36:t.prev=36,t.t7=t.catch(7),a=!0,s=t.t7;case 40:t.prev=40,t.prev=41,o||null==c.return||c.return();case 43:if(t.prev=43,!a){t.next=46;break}throw s;case 46:return t.finish(43);case 47:return t.finish(40);case 48:if(i){t.next=52;break}this._errors=n;try{this.dispatchEvent(new CustomEvent("error",{detail:n,bubbles:!0,cancelable:!0}))}catch(t){console.error(t)}return t.abrupt("return");case 52:"string"==typeof this.selector?this._data=Object(r.a)(i.payload,this.selector):this._data=this.selector(i.payload),i.payload=this.data,this.dispatchEvent(new CustomEvent("load",{detail:i,bubbles:!0,cancelable:!0}));case 55:case"end":return t.stop()}var h},t,this,[[7,36,40,48],[11,28],[41,,43,47]])}))}},{key:"connectedCallback",value:function(){this.fetch()}},{key:"data",get:function(){return this._data}},{key:"loaded",get:function(){return!!this.data}},{key:"errors",get:function(){return this._errors}},{key:"selector",get:function(){return this._selector},set:function(t){this._selector=t}}])&&o(n.prototype,i),c&&o(n,c),e}();e.a=g},618:function(t){t.exports=JSON.parse('[{"accession":"feature1","start":10,"end":40,"color":"#342ea2"},{"accession":"feature2","locations":[{"fragments":[{"start":50,"end":160}]}],"color":"#A42ea2"},{"accession":"feature3","locations":[{"fragments":[{"start":155,"end":155}]},{"fragments":[{"start":158,"end":158}]}],"color":"#A4Aea2"},{"accession":"feature4","locations":[{"fragments":[{"start":200,"end":204},{"start":206,"end":210}]}]}]')},638:function(t){t.exports=JSON.parse('[{"accession":"chain_A","locations":[{"fragments":[{"start":45,"end":100,"shape":"helix","fill":"transparent","color":"#f06"},{"start":110,"end":200,"shape":"helix","fill":"transparent","color":"#f06"},{"start":5,"end":15,"shape":"strand","color":"#fc0"},{"start":40,"end":43,"shape":"strand","color":"#fc0"}]}]},{"accession":"chain_D","locations":[{"fragments":[{"start":45,"end":51,"shape":"helix","fill":"transparent","color":"#f06"},{"start":55,"end":77,"shape":"helix","fill":"transparent","color":"#f06"},{"start":5,"end":15,"shape":"strand","color":"#fc0"},{"start":19,"end":26,"shape":"strand","color":"#fc0"}]}]}]')},705:function(t,e){t.exports='<h1 id="protvista-track">protvista-track</h1>\n<p><a href="https://www.npmjs.com/package/protvista-track"><img src="https://img.shields.io/npm/v/protvista-track.svg" alt="Published on NPM"></a></p>\n<p>The <code>protvista-track</code> component is used to display protein features. These features have <code>start</code> and <code>end</code> positions (these can be the same if the feature only spans one amino-acid), a specific shape (rectangle is the default) and a colour. Features are passed through the <code>data</code> property. You can specify shapes and colours at an instance level (through a property) or individually in the feature <code>data</code> (see <code>data</code> below). In order to establish the scale, it is necessary to set the <code>length</code> property (length of the protein sequence in amino-acids).</p>\n<p>As <code>protvista-track</code> inherits from <code>protvista-zoomable</code>, it will respond to zooming changes, highlight events and emit events when interacting with features (helpful if you want to display tooltips).</p>\n<p>Loading data can be done directly through the <code>data</code> property, or through the use of a <code>load</code> event emitted by one of <code>protvista-track</code>&#39;s children (e.g. a data adapter with <code>data-loader</code>).</p>\n<p>There are two types of display available for <code>protvista-track</code>:</p>\n<ul>\n<li>overlapping will display all the features on one single line. This means that if a feature overlaps another one, it will be indistinguishable. This layout can be useful to display an overview, or when the data is very dense.</li>\n<li>non-overlapping will calculate the best vertical positions for each feature so that they don&#39;t overlap.</li>\n</ul>\n<p><a href="https://ebi-webcomponents.github.io/nightingale/#/track">Demo</a></p>\n<h2 id="usage">Usage</h2>\n<pre><code class="language-html">&lt;protvista-track length=&quot;456&quot; /&gt;</code></pre>\n<h4 id="setting-the-data-through-property">Setting the data through property</h4>\n<pre><code>const track = document.querySelector(&#39;#my-track-id&#39;);\ntrack.data = myDataObject</code></pre><h4 id="setting-data-through-data-loader">Setting data through &lt;data-loader&gt;</h4>\n<pre><code>&lt;protvista-track length=&quot;770&quot;&gt;\n    &lt;protvista-feature-adapter id=&quot;adapter1&quot;&gt;\n        &lt;data-loader&gt;\n          &lt;source src=&quot;https://www.ebi.ac.uk/proteins/api/features/P05067?categories=PTM&quot; /&gt;\n        &lt;/data-loader&gt;\n    &lt;/protvista-feature-adapter&gt;\n&lt;/protvista-track&gt;</code></pre><h2 id="api-reference">API Reference</h2>\n<h3 id="properties">Properties</h3>\n<h4 id="length-number"><code>length: number</code></h4>\n<p>The protein or nucleic acid sequence length.</p>\n<h4 id="data-array"><code>data: Array</code></h4>\n<p>Array items take the following shape:</p>\n<pre><code class="language-javascript">{\n    accession: String,\n    start: Number,\n    end: Number,\n    color?: String,\n    shape?: rectangle|bridge|diamond|chevron|catFace|triangle|wave|hexagon|pentagon|circle|arrow|doubleBar,\n    tooltipContent?: String\n    locations: [\n        {\n            fragments: [\n                {\n                    start: Number,\n                    end: Number\n                }\n            ]\n        }\n    ]\n}</code></pre>\n<p><strong>Note</strong>: <code>locations</code> is an alternative to <code>start</code>-<code>stop</code> attributes, that expresses that a feature can appear in several locations, and also supports the idea of discontinuous features, by allowing to have <code>fragments</code>.</p>\n<p>So for example a single continuous feature, that only appears once can be represented in 2 ways. The classic <code>{accession:&#39;X&#39;, start:2, end:4}</code> or a more verbose version: <code>{accession:&#39;X&#39;, locations: [{fragments: [{start:2, end:4}]}]}</code> an both should generate a track like this:</p>\n<pre><code>-XXX------</code></pre><p>If the same feature appears in 2 places in the sequence, it can be represented using <code>locations</code>:</p>\n<pre><code class="language-javascript">{\n    accession: &#39;Y&#39;,\n    locations: [\n        {fragments: [{start:2, end:4}]},\n        {fragments: [{start:7, end:9}]}\n    ]\n}</code></pre>\n<p>To generate a track like</p>\n<pre><code>-YYY--YYY-</code></pre><p>Finally a feature can also be discontinuous, to repesent this in our data we use <code>fragments</code>:</p>\n<pre><code class="language-javascript">{\n    accession: &#39;Z&#39;,\n    locations: [\n        {fragments: [\n            {start:2, end:4},\n            {start:7, end:9}]\n        }\n    ]\n}</code></pre>\n<p>This expresses that the same instance of the feature Z is split in 2 fragments, from 2 to 4 and from 7 to 9. Which could be represented as</p>\n<pre><code>-ZZZ==ZZZ-</code></pre><h4 id="layout-overlappingdefaultnon-overlappingoptional"><code>layout?: overlapping(default)|non-overlapping(optional)</code></h4>\n<p>The track layout. Non-overlapping uses a bumping algorhithm to make sure none of the features overlapp.</p>\n<h4 id="shape-see-above"><code>shape?: see above</code></h4>\n<p>Shape of all features within the track</p>\n<h4 id="color-see-above"><code>color?: see above</code></h4>\n<p>Colour of all features within the track</p>\n<h4 id="also-see-protvista-zoomable">also see <a href="https://github.com/ebi-webcomponents/nightingale/blob/master/packages/protvista-zoomable/README.md#properties">protvista-zoomable</a></h4>\n'},706:function(t){t.exports=JSON.parse('[{"accession":"feature1","start":1,"end":1,"color":"#339"},{"accession":"feature2","start":2,"end":2,"color":"#33d"},{"accession":"feature3","start":3,"end":3,"color":"#336"},{"accession":"feature4","start":1,"end":2,"color":"#73d"},{"accession":"feature5","start":2,"end":3,"color":"#63e"},{"accession":"feature6","start":2,"end":2,"color":"#35d","shape":"rectangle"},{"accession":"feature7","start":2,"end":2,"color":"#3a3","shape":"bridge"},{"accession":"feature8","start":1,"end":2,"color":"#3a3","shape":"bridge"},{"accession":"feature9","start":2,"end":2,"color":"#33d","shape":"diamond"},{"accession":"feature10","start":2,"end":3,"color":"#33d","shape":"diamond"},{"accession":"feature11","start":2,"end":2,"color":"#3a3","shape":"chevron"},{"accession":"feature12","start":1,"end":2,"color":"#3a3","shape":"chevron"},{"accession":"feature13","start":2,"end":2,"color":"#d3d","shape":"catFace"},{"accession":"feature14","start":2,"end":3,"color":"#d3d","shape":"catFace"},{"accession":"feature15","start":2,"end":2,"color":"#3a3","shape":"triangle"},{"accession":"feature16","start":1,"end":2,"color":"#3a3","shape":"triangle"},{"accession":"feature17","start":2,"end":2,"color":"#d3d","shape":"wave"},{"accession":"feature18","start":2,"end":3,"color":"#d3d","shape":"wave"},{"accession":"feature15","start":2,"end":2,"color":"#3a3","shape":"hexagon"},{"accession":"feature16","start":1,"end":2,"color":"#3a3","shape":"hexagon"},{"accession":"feature17","start":2,"end":2,"color":"#d3d","shape":"pentagon"},{"accession":"feature18","start":2,"end":3,"color":"#d3d","shape":"pentagon"},{"accession":"feature19","start":2,"end":2,"color":"#3a3","shape":"circle"},{"accession":"feature20","start":1,"end":2,"color":"#3a3","shape":"circle"},{"accession":"feature21","start":2,"end":2,"color":"#d3d","shape":"arrow"},{"accession":"feature22","start":2,"end":3,"color":"#d3d","shape":"arrow"},{"accession":"feature19","start":2,"end":2,"color":"#3a3","shape":"doubleBar"},{"accession":"feature20","start":1,"end":2,"color":"#3a3","shape":"doubleBar"},{"accession":"feature21","start":1,"end":2,"color":"#f06","shape":"helix","fill":"transparent"},{"accession":"feature22","start":2,"end":2,"color":"#fc0","shape":"strand"}]')}}]);